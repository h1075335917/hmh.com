"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3691],{1350:(r,e,n)=>{n.r(e),n.d(e,{assets:()=>c,contentTitle:()=>s,default:()=>l,frontMatter:()=>a,metadata:()=>o,toc:()=>p});let o=JSON.parse('{"id":"project/PROJECT-Build-Microservices","title":"\u9879\u76EE-\u642D\u5EFA\u5FAE\u670D\u52A1","description":"\u4E00\u3001\u4F7F\u7528\u6280\u672F","source":"@site/docs/project/PROJECT-Build-Microservices.md","sourceDirName":"project","slug":"/project/PROJECT-Build-Microservices","permalink":"/mhuahe.com/docs/project/PROJECT-Build-Microservices","draft":false,"unlisted":false,"editUrl":"https://github.dev/mhuahe/mhuahe.com/blob/master-ts/docs/project/PROJECT-Build-Microservices.md","tags":[],"version":"current","lastUpdatedBy":"heminhua","lastUpdatedAt":1725382806000,"frontMatter":{},"sidebar":"project","previous":{"title":"docusaurus","permalink":"/mhuahe.com/docs/project/PROJECT-Build-Blog"},"next":{"title":"\u9879\u76EE-\u624B\u5199Spring","permalink":"/mhuahe.com/docs/project/PROJECT-Handwritten-Spring"}}');var i=n(4848),t=n(8453);let a={},s="\u9879\u76EE-\u642D\u5EFA\u5FAE\u670D\u52A1",c={},p=[{value:"\u4E00\u3001\u4F7F\u7528\u6280\u672F",id:"\u4E00\u4F7F\u7528\u6280\u672F",level:3},{value:"\u4E8C\u3001\u642D\u5EFA",id:"\u4E8C\u642D\u5EFA",level:3},{value:"Nacos-Spring-Cloud",id:"nacos-spring-cloud",level:3}];function d(r){let e={code:"code",h1:"h1",h3:"h3",header:"header",pre:"pre",...(0,t.R)(),...r.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"\u9879\u76EE-\u642D\u5EFA\u5FAE\u670D\u52A1",children:"\u9879\u76EE-\u642D\u5EFA\u5FAE\u670D\u52A1"})}),"\n",(0,i.jsx)(e.h3,{id:"\u4E00\u4F7F\u7528\u6280\u672F",children:"\u4E00\u3001\u4F7F\u7528\u6280\u672F"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"1. spring-cloud\r\n2. jdk1.8\r\n3. maven\u7BA1\u7406\r\n4. redis\u7F13\u5B58\r\n5. mysql\u6570\u636E\u5E93\r\n6. mongodb\u6570\u636E\u5E93\r\n7. nacos\u6CE8\u518C\u4E2D\u5FC3\u548C\u670D\u52A1\u4E2D\u5FC3\r\n8. RocketMQ\u6D88\u606F\u4E2D\u95F4\u4EF6\n"})}),"\n",(0,i.jsx)(e.h3,{id:"\u4E8C\u642D\u5EFA",children:"\u4E8C\u3001\u642D\u5EFA"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"1. new module --> archetypes:maven-archetype-quickstart\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"2. \u6A21\u5757\u5F15\u7528spring-boot-starter-parent\r\n<parent>\r\n    <groupId>org.springframework.boot</groupId>\r\n    <artifactId>spring-boot-starter-parent</artifactId>\r\n    <version>2.6.3</version>\r\n</parent>\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-xml",children:"\u4F5C\u7528\uFF1A\r\n1. \u4F9D\u8D56\u7248\u672C\u7BA1\u7406<dependencyManagement>\r\nspring-boot-starter-parent\u7684\u4F9D\u8D56\u7BA1\u7406\u529F\u80FD\u4F9D\u6258\u4E8Espring-boot-dependencies\r\n2. \u5C5E\u6027\u914D\u7F6E(\u6307\u5B9Ajdk\u7248\u672C\u53CA\u7F16\u7801\u7B49)\r\n    <properties>\r\n        <java.version>1.8</java.version>\r\n        <resource.delimiter>@</resource.delimiter>\r\n        <maven.compiler.source>${java.version}</maven.compiler.source>\r\n        <maven.compiler.target>${java.version}</maven.compiler.target>\r\n        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\r\n        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>\r\n    </properties>\r\n3. \u8D44\u6E90\u8FC7\u6EE4\r\nspring-boot-starter-parent \u6307\u5B9A\u4E86\u7F16\u8BD1\u8D44\u6E90\u6587\u4EF6\u65F6\u5C06 **/application*.properties\u3001**/application*.yml \u548C **/application*.yaml \u4E2D\u7684 maven \u5360\u4F4D\u7B26\u66FF\u6362\u4E3A\u5177\u4F53\u7684\u5C5E\u6027\u503C\r\n    <resources>\r\n          <resource>\r\n            <directory>${basedir}/src/main/resources</directory>\r\n            <filtering>true</filtering>\r\n            <includes>\r\n              <include>**/application*.yml</include>\r\n              <include>**/application*.yaml</include>\r\n              <include>**/application*.properties</include>\r\n            </includes>\r\n          </resource>\r\n          <resource>\r\n            <directory>${basedir}/src/main/resources</directory>\r\n            <excludes>\r\n              <exclude>**/application*.yml</exclude>\r\n              <exclude>**/application*.yaml</exclude>\r\n              <exclude>**/application*.properties</exclude>\r\n            </excludes>\r\n          </resource>\r\n    </resources>\r\n4. \u63D2\u4EF6\u914D\u7F6E\r\n\u5BF9\u4E8E maven-compiler-plugin\uFF0Cspring-boot-starter-parent \u4E3B\u8981\u914D\u7F6E\u4E86parameters \u53C2\u6570\uFF0C\u4EE5\u4FBF\u5C06\u65B9\u6CD5\u53C2\u6570\u540D\u5199\u5165class\u6587\u4EF6\r\n\u5BF9\u4E8E spring-boot-maven-plugin \u63D2\u4EF6\uFF0Cspring-boot-starter-parent \u4E3A\u5176\u914D\u7F6E\u4E86 repackage \u76EE\u6807\u3002spring-boot-maven-plugin \u63D2\u4EF6 repackage \u76EE\u6807\u9ED8\u8BA4\u7ED1\u5B9A maven \u58F0\u660E\u5468\u671F\u4E2D\u7684 package \u9636\u6BB5\uFF0C\u8FD9\u6837\u5F53\u6253\u5305\u540E\u8FD9\u4E2A\u63D2\u4EF6\u5C31\u4F1A\u8FDB\u4E00\u6B65\u5C06\u6240\u6709\u4F9D\u8D56\u7684 jar \u5305\u4EE5\u53CA\u5F53\u524D\u9879\u76EE\u7684\u4EE3\u7801\u6253\u5305\u5230\u4E00\u4E2A jar \u5305\u4E2D\uFF0C\u4ECE\u800C\u652F\u6301 jar -jar \u542F\u52A8 Spring Boot \u9879\u76EE\u3002\r\nspring-boot-starter-parent \u6307\u5B9A spring-boot-maven-plugin \u63D2\u4EF6\u76EE\u6807\u540E\uFF0C\u5F53\u6211\u4EEC\u7684\u9879\u76EE\u6307\u5B9A\u4E86 parent \u4E3A spring-boot-starter-parent \u540E\uFF0C\u5C31\u53EF\u4EE5\u7701\u7565\u63D2\u4EF6\u76EE\u6807\u914D\u7F6E\u4E86\u3002\r\n    <build>\r\n        <plugins>\r\n            <plugin>\r\n                <groupId>org.springframework.boot</groupId>\r\n                <artifactId>spring-boot-maven-plugin</artifactId>\r\n            </plugin>\r\n        </plugins>\r\n    </build>\r\n5. \u4F9D\u8D56\u7248\u672C\u5347\u7EA7\r\n\u5BF9\u4E8E spring-boot-starter-parent \u800C\u8A00\uFF0C\u6211\u4EEC\u53EF\u4EE5\u76F4\u63A5\u5728 properties \u4E2D\u6307\u5B9A\u4F9D\u8D56\u7684\u7248\u672C\u3002\u4EE5\u524D\u6BB5\u65F6\u95F4\u66B4\u9732\u51FA\u6765\u7684 log4j 2 \u6F0F\u6D1E\u4E3A\u4F8B\uFF0C\u4E3A\u4E86\u5347\u7EA7 log4j 2 \u7248\u672C\u53F7\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5728\u81EA\u5DF1\u7684\u9879\u76EE\u4E2D\u8FDB\u884C\u5982\u4E0B\u914D\u7F6E\u3002\r\n    <parent>\r\n        <groupId>org.springframework.boot</groupId>\r\n        <artifactId>spring-boot-starter-parent</artifactId>\r\n        <version>2.2.7.RELEASE</version>\r\n    </parent>\r\n    <properties>\r\n        <log4j2.version>2.17.2</log4j2.version>\r\n    </properties>\r\n\u5BF9\u4E8E spring-boot-dependencies\uFF0C\u5982\u679C\u8981\u8FDB\u884C\u4F9D\u8D56\u5347\u7EA7\uFF0C\u914D\u7F6E\u5C5E\u6027\u662F\u4E0D\u884C\u7684\uFF0C\u9700\u8981\u5728 spring-boot-dependencies \u524D\u9762\u52A0\u4E0A\u8981\u5347\u7EA7\u7684\u4F9D\u8D56\u7684\u5750\u6807\u3002\r\n    <dependencyManagement>\r\n        <dependencies>\r\n            <dependency>\r\n                <groupId>org.apache.logging.log4j</groupId>\r\n                <artifactId>log4j-to-slf4j</artifactId>\r\n                <version>2.17.2</version>\r\n            </dependency>\r\n            <dependency>\r\n                <groupId>org.springframework.boot</groupId>\r\n                <artifactId>spring-boot-dependencies</artifactId>\r\n                <version>2.2.7.RELEASE</version>\r\n                <type>pom</type>\r\n                <scope>import</scope>\r\n            </dependency>\r\n        </dependencies>\r\n    </dependencyManagement>\r\n\u5982\u679C\u8981\u5347\u7EA7\u7684\u4F9D\u8D56\u4E0D\u662Fspring-boot-starter-parent\u6216spring-boot-dependencies\u7BA1\u7406\u7684\u4F9D\u8D56\uFF0C\u8FD8\u53EF\u4EE5\u76F4\u63A5\u628A\u5B83\u52A0\u5230 dependencies \u6807\u7B7E\u4E0B\uFF0C\u8FD9\u6837\u4F9D\u636E\u6700\u77ED\u8DEF\u5F84\u539F\u5219\uFF0C\u6211\u4EEC\u76F4\u63A5\u914D\u7F6E\u7684\u4F9D\u8D56\u4F1A\u8986\u76D6\u95F4\u63A5\u5F15\u5165\u7684\u4F9D\u8D56\r\n    <dependencies>\r\n        <dependency>\r\n            <groupId>org.apache.logging.log4j</groupId>\r\n            <artifactId>log4j-core</artifactId>\r\n            <version>2.17.2</version>\r\n        </dependency>\r\n    </dependencies>\n"})}),"\n",(0,i.jsx)(e.h3,{id:"nacos-spring-cloud",children:"Nacos-Spring-Cloud"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"\u914D\u7F6E\u4E2D\u5FC3\uFF1A\r\n1. \u4F9D\u8D56\r\n<dependency>\r\n    <groupId>com.alibaba.cloud</groupId>\r\n    <artifactId>spring-cloud-starter-alibaba-nacos-config</artifactId>\r\n    <version>${latest.version}</version>\r\n</dependency>\r\n2. \u5728 bootstrap.properties \u4E2D\u914D\u7F6E Nacos server \u7684\u5730\u5740\u548C\u5E94\u7528\u540D\r\nspring.cloud.nacos.config.server-addr=127.0.0.1:8848\r\nspring.application.name=example\r\n3. \u5728 Nacos Spring Cloud \u4E2D\uFF0CdataId \u7684\u5B8C\u6574\u683C\u5F0F\u5982\u4E0B\uFF1A\r\n${prefix}-${spring.profiles.active}.${file-extension}\r\nprefix \u9ED8\u8BA4\u4E3Aspring.application.name\u503C\uFF0C\u4E5F\u53EF\u4EE5\u901A\u8FC7\u914D\u7F6E\u9879spring.cloud.nacos.config.prefix\u6765\u914D\u7F6E\u3002\r\nspring.profiles.active \u5373\u4E3A\u5F53\u524D\u73AF\u5883\u5BF9\u5E94\u7684profile\r\nfile-exetension\u4E3A\u914D\u7F6E\u5185\u5BB9\u7684\u6570\u636E\u683C\u5F0F\uFF0C\u53EF\u4EE5\u901A\u8FC7\u914D\u7F6E\u9879spring.cloud.nacos.config.file-extension \u6765\u914D\u7F6E\u3002\u76EE\u524D\u53EA\u652F\u6301properties\u548Cyaml \u7C7B\u578B\r\n4. \u901A\u8FC7 Spring Cloud \u539F\u751F\u6CE8\u89E3 @RefreshScope \u5B9E\u73B0\u914D\u7F6E\u81EA\u52A8\u66F4\u65B0\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ya",children:"\u6CE8\u518C\u4E2D\u5FC3\uFF1A\r\n1. \u4F9D\u8D56\r\n<dependency>\r\n    <groupId>com.alibaba.cloud</groupId>\r\n    <artifactId>spring-cloud-starter-alibaba-nacos-discovery</artifactId>\r\n    <version>${latest.version}</version>\r\n</dependency>\r\n2. \u5728 application.properties \u4E2D\u914D\u7F6E Nacos server \u7684\u5730\u5740\r\nserver.port=8070\r\nspring.application.name=service-provider\r\nspring.cloud.nacos.discovery.server-addr=127.0.0.1:8848\r\n3. \u901A\u8FC7 Spring Cloud \u539F\u751F\u6CE8\u89E3 @EnableDiscoveryClient \u5F00\u542F\u670D\u52A1\u6CE8\u518C\u53D1\u73B0\u529F\u80FD\r\n4. \u901A\u8FC7 Spring Cloud \u539F\u751F\u6CE8\u89E3 @EnableDiscoveryClient \u5F00\u542F\u670D\u52A1\u6CE8\u518C\u53D1\u73B0\u529F\u80FD\u3002\u7ED9 RestTemplate \u5B9E\u4F8B\u6DFB\u52A0 @LoadBalanced \u6CE8\u89E3\uFF0C\u5F00\u542F @LoadBalanced \u4E0E Ribbon \u7684\u96C6\u6210\n"})})]})}function l(r={}){let{wrapper:e}={...(0,t.R)(),...r.components};return e?(0,i.jsx)(e,{...r,children:(0,i.jsx)(d,{...r})}):d(r)}},8453:(r,e,n)=>{n.d(e,{R:()=>a,x:()=>s});var o=n(6540);let i={},t=o.createContext(i);function a(r){let e=o.useContext(t);return o.useMemo(function(){return"function"==typeof r?r(e):{...e,...r}},[e,r])}function s(r){let e;return e=r.disableParentContext?"function"==typeof r.components?r.components(i):r.components||i:a(r.components),o.createElement(t.Provider,{value:e},r.children)}}}]);
"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6731],{8229:(n,r,e)=>{e.r(r),e.d(r,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>c});let s=JSON.parse('{"id":"sql/MySQL","title":"MySQL","description":"\u7B1B\u5361\u5C14\u79EF","source":"@site/docs/sql/MySQL.md","sourceDirName":"sql","slug":"/sql/MySQL","permalink":"/mhuahe.com/docs/sql/MySQL","draft":false,"unlisted":false,"editUrl":"https://github.dev/mhuahe/mhuahe.com/blob/master-ts/docs/sql/MySQL.md","tags":[],"version":"current","lastUpdatedBy":"mhuahe","lastUpdatedAt":1730367136000,"sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"sql","next":{"title":"Elasticsearch\uFF08\u5F85\u8865\u5145\uFF09","permalink":"/mhuahe.com/docs/sql/Elasticsearch"}}');var l=e(4848),a=e(8453);let t={sidebar_position:1},i="MySQL",d={},c=[{value:"\u7B1B\u5361\u5C14\u79EF",id:"\u7B1B\u5361\u5C14\u79EF",level:3},{value:"\u7B1B\u5361\u5C14\u79EF\u4EA7\u751F\u7684\u539F\u56E0",id:"\u7B1B\u5361\u5C14\u79EF\u4EA7\u751F\u7684\u539F\u56E0",level:4},{value:"\u7B1B\u5361\u5C14\u79EF\u7684\u5F71\u54CD",id:"\u7B1B\u5361\u5C14\u79EF\u7684\u5F71\u54CD",level:4},{value:"\u5E94\u5BF9\u7B56\u7565",id:"\u5E94\u5BF9\u7B56\u7565",level:4},{value:"\u5E38\u7528\u8BED\u53E5",id:"\u5E38\u7528\u8BED\u53E5",level:3},{value:"\u8868\u7ED3\u6784\u64CD\u4F5C",id:"\u8868\u7ED3\u6784\u64CD\u4F5C",level:4},{value:"GROUP BY",id:"group-by",level:4},{value:"concat",id:"concat",level:4},{value:"FIND_IN_SET",id:"find_in_set",level:4},{value:"UUID",id:"uuid",level:4},{value:"IF",id:"if",level:4},{value:"UNION",id:"union",level:4},{value:"PAD",id:"pad",level:4},{value:"choose when otherwise",id:"choose-when-otherwise",level:4},{value:"EXISTS",id:"exists",level:4},{value:"\uFF1C![CDATA[ ]]",id:"cdata-",level:4},{value:"substring",id:"substring",level:4},{value:"any_value",id:"any_value",level:4},{value:"round",id:"round",level:4},{value:"case when then else end",id:"case-when-then-else-end",level:4},{value:"COALESCE",id:"coalesce",level:4},{value:"date_format",id:"date_format",level:4},{value:"DATEDIFF",id:"datediff",level:4},{value:"TIMESTAMPDIFF",id:"timestampdiff",level:4},{value:"day()  last_day()",id:"day--last_day",level:4},{value:"CAST",id:"cast",level:4},{value:"INSTR",id:"instr",level:4},{value:"PERIOD_DIFF",id:"period_diff",level:4},{value:"MOD",id:"mod",level:4},{value:"RIGHT",id:"right",level:4},{value:"REGEXP",id:"regexp",level:4},{value:"\u7A97\u53E3\u51FD\u6570\uFF088.0\u7248\u672C\u524D\uFF09",id:"\u7A97\u53E3\u51FD\u657080\u7248\u672C\u524D",level:4},{value:"DENSE_RANK",id:"dense_rank",level:6},{value:"\u5176\u5B83\u8BED\u53E5",id:"\u5176\u5B83\u8BED\u53E5",level:3},{value:"binlog",id:"binlog",level:4},{value:"\u7D22\u5F15",id:"\u7D22\u5F15",level:4},{value:"\u5B58\u50A8\u8FC7\u7A0B",id:"\u5B58\u50A8\u8FC7\u7A0B",level:4},{value:"\u6570\u636E\u6743\u9650",id:"\u6570\u636E\u6743\u9650",level:4},{value:"\u8D26\u53F7",id:"\u8D26\u53F7",level:4},{value:"\u5B57\u7B26\u96C6",id:"\u5B57\u7B26\u96C6",level:4},{value:"\u6279\u91CF\u63D2\u5165",id:"\u6279\u91CF\u63D2\u5165",level:3},{value:"\u65F6\u95F4\u5B57\u6BB5",id:"\u65F6\u95F4\u5B57\u6BB5",level:3},{value:"\u56DE\u8868",id:"\u56DE\u8868",level:3},{value:"LeetCode",id:"leetcode",level:3},{value:"\u7B2C\u4E8C\u9AD8\u7684\u85AA\u6C34",id:"\u7B2C\u4E8C\u9AD8\u7684\u85AA\u6C34",level:4},{value:"\u7B2CN\u9AD8\u7684\u85AA\u6C34",id:"\u7B2Cn\u9AD8\u7684\u85AA\u6C34",level:4},{value:"\u5206\u6570\u6392\u540D",id:"\u5206\u6570\u6392\u540D",level:4}];function o(n){let r={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h3:"h3",h4:"h4",h6:"h6",header:"header",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.header,{children:(0,l.jsx)(r.h1,{id:"mysql",children:"MySQL"})}),"\n",(0,l.jsx)(r.h3,{id:"\u7B1B\u5361\u5C14\u79EF",children:"\u7B1B\u5361\u5C14\u79EF"}),"\n",(0,l.jsxs)(r.blockquote,{children:["\n",(0,l.jsx)(r.p,{children:"\u5728SQL\u4E2D\uFF0C\u7B1B\u5361\u5C14\u79EF\uFF08Cartesian Product\uFF09\u662F\u6307\u4E24\u4E2A\u6216\u591A\u4E2A\u8868\u7684\u6BCF\u4E00\u884C\u4E0E\u53E6\u4E00\u4E2A\u8868\u7684\u6BCF\u4E00\u884C\u8FDB\u884C\u7EC4\u5408\u7684\u7ED3\u679C\u3002\u5F53\u6CA1\u6709\u4E3A\u8FDE\u63A5\u64CD\u4F5C\u6307\u5B9A\u9002\u5F53\u7684\u6761\u4EF6\u65F6\uFF0C\u5C31\u53EF\u80FD\u5BFC\u81F4\u7B1B\u5361\u5C14\u79EF\u3002"}),"\n"]}),"\n",(0,l.jsx)(r.p,{children:(0,l.jsx)(r.img,{src:"https://wikimedia.org/api/rest_v1/media/math/render/svg/b511477a8bb079f00e37db2d8205df2787a648ad",alt:"X x Y"})}),"\n",(0,l.jsxs)(r.blockquote,{children:["\n",(0,l.jsx)(r.p,{children:"eg\uFF1A"}),"\n"]}),"\n",(0,l.jsx)(r.blockquote,{children:"\n"}),"\n",(0,l.jsxs)(r.blockquote,{children:["\n",(0,l.jsxs)(r.p,{children:["\u5982\u679C\u96C6\u5408\u{1D44B}\u662F13\u4E2A\u5143\u7D20\u7684\u70B9\u6570\u96C6\u5408",(0,l.jsx)(r.code,{children:"{\u{1D434},\u{1D43E},\u{1D444},\u{1D43D},10,9,8,7,6,5,4,3,2}"}),"\uFF0C"]}),"\n"]}),"\n",(0,l.jsx)(r.blockquote,{children:"\n"}),"\n",(0,l.jsxs)(r.blockquote,{children:["\n",(0,l.jsxs)(r.p,{children:["\u800C\u96C6\u5408\u{1D44C}\u662F4\u4E2A\u5143\u7D20\u7684\u82B1\u8272\u96C6\u5408",(0,l.jsx)(r.code,{children:"{\u2660, \u2665, \u2666, \u2663}"}),"\uFF0C"]}),"\n"]}),"\n",(0,l.jsx)(r.blockquote,{children:"\n"}),"\n",(0,l.jsxs)(r.blockquote,{children:["\n",(0,l.jsxs)(r.p,{children:["\u5219\u8FD9\u4E24\u4E2A\u96C6\u5408\u7684\u7B1B\u5361\u513F\u79EF\u662F\u670952\u4E2A\u5143\u7D20\u7684\u6807\u51C6\u6251\u514B\u724C\u7684\u96C6\u5408",(0,l.jsx)(r.code,{children:"{(\u{1D434},\u2660),(\u{1D43E},\u2660),...,(2,\u2660),...,(\u{1D434},\u2663),...,(3,\u2663),(2,\u2663)}"}),"\u3002"]}),"\n"]}),"\n",(0,l.jsx)(r.h4,{id:"\u7B1B\u5361\u5C14\u79EF\u4EA7\u751F\u7684\u539F\u56E0",children:"\u7B1B\u5361\u5C14\u79EF\u4EA7\u751F\u7684\u539F\u56E0"}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsxs)(r.li,{children:["\n",(0,l.jsxs)(r.p,{children:[(0,l.jsx)(r.strong,{children:"\u672A\u4F7F\u7528JOIN\u6761\u4EF6"}),"\uFF1A\u5F53\u67E5\u8BE2\u4E2D\u6D89\u53CA\u4E24\u4E2A\u6216\u591A\u4E2A\u8868\uFF0C\u4F46\u6CA1\u6709\u6307\u5B9A\u8FDE\u63A5\u6761\u4EF6\u65F6\uFF0C",(0,l.jsx)(r.a,{href:"https://cloud.baidu.com/solution/database.html",children:"\u6570\u636E\u5E93"}),"\u7CFB\u7EDF\u4F1A\u9ED8\u8BA4\u6267\u884C\u7B1B\u5361\u5C14\u79EF\u64CD\u4F5C\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(r.li,{children:["\n",(0,l.jsxs)(r.p,{children:[(0,l.jsx)(r.strong,{children:"\u9519\u8BEF\u7684JOIN\u6761\u4EF6"}),"\uFF1A\u6709\u65F6",(0,l.jsx)(r.a,{href:"https://cloud.baidu.com/product/xly.html",children:"\u5F00\u53D1\u8005"}),"\u53EF\u80FD\u9519\u8BEF\u5730\u6307\u5B9A\u4E86JOIN\u6761\u4EF6\uFF0C\u5BFC\u81F4\u539F\u672C\u4E0D\u76F8\u5173\u7684\u884C\u88AB\u9519\u8BEF\u5730\u8FDE\u63A5\u5728\u4E00\u8D77\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(r.li,{children:["\n",(0,l.jsxs)(r.p,{children:[(0,l.jsx)(r.strong,{children:"\u9690\u5F0F\u8F6C\u6362"}),"\uFF1A\u5728\u67D0\u4E9B\u60C5\u51B5\u4E0B\uFF0C\u6570\u636E\u5E93\u7CFB\u7EDF\u53EF\u80FD\u4F1A\u81EA\u52A8\u6267\u884C\u9690\u5F0F\u8F6C\u6362\uFF0C\u5BFC\u81F4\u7B1B\u5361\u5C14\u79EF\u7684\u4EA7\u751F\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(r.h4,{id:"\u7B1B\u5361\u5C14\u79EF\u7684\u5F71\u54CD",children:"\u7B1B\u5361\u5C14\u79EF\u7684\u5F71\u54CD"}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsxs)(r.li,{children:["\n",(0,l.jsxs)(r.p,{children:[(0,l.jsx)(r.strong,{children:"\u6027\u80FD\u95EE\u9898"}),"\uFF1A\u7B1B\u5361\u5C14\u79EF\u4F1A\u4EA7\u751F\u5927\u91CF\u4E0D\u5FC5\u8981\u7684\u6570\u636E\uFF0C\u5BFC\u81F4\u67E5\u8BE2\u6027\u80FD\u4E0B\u964D\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(r.li,{children:["\n",(0,l.jsxs)(r.p,{children:[(0,l.jsx)(r.strong,{children:"\u6570\u636E\u5197\u4F59"}),"\uFF1A\u8FD4\u56DE\u7684\u7ED3\u679C\u96C6\u53EF\u80FD\u5305\u542B\u91CD\u590D\u7684\u884C\uFF0C\u5BFC\u81F4\u6570\u636E\u5197\u4F59\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(r.li,{children:["\n",(0,l.jsxs)(r.p,{children:[(0,l.jsx)(r.strong,{children:"\u903B\u8F91\u9519\u8BEF"}),"\uFF1A\u5F00\u53D1\u8005\u53EF\u80FD\u6CA1\u6709\u610F\u8BC6\u5230\u7B1B\u5361\u5C14\u79EF\u7684\u5B58\u5728\uFF0C\u5BFC\u81F4\u67E5\u8BE2\u7ED3\u679C\u4E0D\u7B26\u5408\u9884\u671F\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(r.h4,{id:"\u5E94\u5BF9\u7B56\u7565",children:"\u5E94\u5BF9\u7B56\u7565"}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsxs)(r.li,{children:["\n",(0,l.jsxs)(r.p,{children:[(0,l.jsx)(r.strong,{children:"\u660E\u786E\u6307\u5B9AJOIN\u6761\u4EF6"}),"\uFF1A\u5728\u4F7F\u7528JOIN\u64CD\u4F5C\u65F6\uFF0C\u5E94\u59CB\u7EC8\u660E\u786E\u6307\u5B9A\u8FDE\u63A5\u6761\u4EF6\uFF0C\u907F\u514D\u4EA7\u751F\u7B1B\u5361\u5C14\u79EF\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(r.li,{children:["\n",(0,l.jsxs)(r.p,{children:[(0,l.jsx)(r.strong,{children:"\u68C0\u67E5\u67E5\u8BE2\u903B\u8F91"}),"\uFF1A\u5728\u7F16\u5199\u590D\u6742\u67E5\u8BE2\u65F6\uFF0C\u8981\u4ED4\u7EC6\u68C0\u67E5\u8FDE\u63A5\u548C\u8FC7\u6EE4\u6761\u4EF6\uFF0C\u786E\u4FDD\u5B83\u4EEC\u662F\u6B63\u786E\u7684\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(r.li,{children:["\n",(0,l.jsxs)(r.p,{children:[(0,l.jsx)(r.strong,{children:"\u4F7F\u7528EXPLAIN\u8BA1\u5212"}),"\uFF1A\u5229\u7528\u6570\u636E\u5E93\u7684EXPLAIN\u8BA1\u5212\u529F\u80FD\uFF0C\u53EF\u4EE5\u67E5\u770B\u67E5\u8BE2\u7684\u6267\u884C\u8BA1\u5212\uFF0C\u4ECE\u800C\u53D1\u73B0\u6F5C\u5728\u7684\u7B1B\u5361\u5C14\u79EF\u95EE\u9898\u3002\u4F8B\u5982\uFF0C\u5728MySQL\u4E2D\uFF0C\u53EF\u4EE5\u4F7F\u7528",(0,l.jsx)(r.code,{children:"EXPLAIN SELECT ..."}),"\u6765\u67E5\u770B\u67E5\u8BE2\u7684\u6267\u884C\u8BA1\u5212\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(r.li,{children:["\n",(0,l.jsxs)(r.p,{children:[(0,l.jsx)(r.strong,{children:"\u4F18\u5316\u6570\u636E\u5E93\u8BBE\u8BA1"}),"\uFF1A\u5408\u7406\u8BBE\u8BA1\u6570\u636E\u5E93\u8868\u7ED3\u6784\uFF0C\u786E\u4FDD\u76F8\u5173\u6570\u636E\u8868\u901A\u8FC7\u5408\u9002\u7684\u952E\u8FDB\u884C\u5173\u8054\uFF0C\u8FD9\u6837\u53EF\u4EE5\u964D\u4F4E\u56E0\u7B1B\u5361\u5C14\u79EF\u5BFC\u81F4\u7684\u95EE\u9898\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(r.li,{children:["\n",(0,l.jsxs)(r.p,{children:[(0,l.jsx)(r.strong,{children:"\u9650\u5236\u7ED3\u679C\u96C6"}),"\uFF1A\u4F7F\u7528",(0,l.jsx)(r.code,{children:"LIMIT"}),"\u5B50\u53E5\u9650\u5236\u8FD4\u56DE\u7684\u6570\u636E\u91CF\uFF0C\u4EE5\u51CF\u5C11\u4E0D\u5FC5\u8981\u7684\u8BA1\u7B97\u548C",(0,l.jsx)(r.a,{href:"https://cloud.baidu.com/product/dts.html",children:"\u6570\u636E\u4F20\u8F93"}),"\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(r.li,{children:["\n",(0,l.jsxs)(r.p,{children:[(0,l.jsx)(r.strong,{children:"\u5B9A\u671F\u5BA1\u67E5\u67E5\u8BE2\u6027\u80FD"}),"\uFF1A\u5B9A\u671F\u5BA1\u67E5\u548C\u5206\u6790\u6570\u636E\u5E93\u67E5\u8BE2\u6027\u80FD\uFF0C\u53CA\u65F6\u53D1\u73B0\u548C\u89E3\u51B3\u6F5C\u5728\u7684\u7B1B\u5361\u5C14\u79EF\u95EE\u9898\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(r.li,{children:["\n",(0,l.jsxs)(r.p,{children:[(0,l.jsx)(r.strong,{children:"\u63D0\u9AD8\u4EE3\u7801\u5BA1\u67E5\u8D28\u91CF"}),"\uFF1A\u8FDB\u884C\u4E25\u683C\u7684\u4EE3\u7801\u5BA1\u67E5\uFF0C\u786E\u4FDDSQL\u67E5\u8BE2\u903B\u8F91\u6B63\u786E\uFF0C\u9632\u6B62\u4EA7\u751F\u4E0D\u5FC5\u8981\u7684\u7B1B\u5361\u5C14\u79EF\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(r.li,{children:["\n",(0,l.jsxs)(r.p,{children:[(0,l.jsx)(r.strong,{children:"\u4F7F\u7528\u6570\u636E\u5E93\u5DE5\u5177"}),"\uFF1A\u5229\u7528\u6570\u636E\u5E93\u7BA1\u7406\u5DE5\u5177\u548CIDE\u63D0\u4F9B\u7684\u4EE3\u7801\u63D0\u793A\u3001\u8BED\u6CD5\u9AD8\u4EAE\u7B49\u529F\u80FD\uFF0C\u63D0\u9AD8\u7F16\u5199\u67E5\u8BE2\u8BED\u53E5\u7684\u51C6\u786E\u6027\u548C\u6548\u7387\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(r.li,{children:["\n",(0,l.jsxs)(r.p,{children:[(0,l.jsxs)(r.strong,{children:["\u57F9\u8BAD\u4E0E",(0,l.jsx)(r.a,{href:"https://cloud.baidu.com/product/doc.html",children:"\u6587\u6863"})]}),"\uFF1A\u7EC4\u7EC7\u6570\u636E\u5E93\u76F8\u5173\u57F9\u8BAD\uFF0C\u63D0\u9AD8\u5F00\u53D1\u4EBA\u5458\u5BF9\u7B1B\u5361\u5C14\u79EF\u7684\u8BA4\u8BC6\uFF1B\u540C\u65F6\u7F16\u5199\u548C\u7EF4\u62A4\u6570\u636E\u5E93\u64CD\u4F5C\u6587\u6863\uFF0C\u786E\u4FDD\u56E2\u961F\u6210\u5458\u9075\u5FAA\u6700\u4F73\u5B9E\u8DF5\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(r.li,{children:["\n",(0,l.jsx)(r.p,{children:"\u6D4B\u8BD5\u4E0E\u9A8C\u8BC1\uFF1A\u5728\u5F00\u53D1\u8FC7\u7A0B\u4E2D\u8FDB\u884C\u5145\u5206\u6D4B\u8BD5\uFF0C\u9A8C\u8BC1\u67E5\u8BE2\u7ED3\u679C\u7684\u6B63\u786E\u6027\uFF1B\u540C\u65F6\u5728\u5B9E\u9645\u5E94\u7528\u4E2D\u6301\u7EED\u76D1\u63A7\u6570\u636E\u5E93\u6027\u80FD\u6307\u6807\uFF0C\u4EE5\u4FBF\u53CA\u65F6\u53D1\u73B0\u548C\u5904\u7406\u95EE\u9898\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(r.h3,{id:"\u5E38\u7528\u8BED\u53E5",children:"\u5E38\u7528\u8BED\u53E5"}),"\n",(0,l.jsx)(r.h4,{id:"\u8868\u7ED3\u6784\u64CD\u4F5C",children:"\u8868\u7ED3\u6784\u64CD\u4F5C"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-sql",children:"\r\n-- \u767B\u5F55mysql\r\n\r\nmysql -h host -u user -p database1\r\n\r\npassword\r\n\r\n-- \u67E5\u8BE2\u7248\u672C\u53F7\u548C\u5F53\u524D\u65F6\u95F4\r\n\r\nSELECT VERSION(), CURRENT_DATE;\r\n\r\n-- \u5C55\u793A\u6240\u6709\u6570\u636E\u5E93\r\n\r\nSHOW DATABASES;\r\n\r\n-- \u5207\u6362/\u4F7F\u7528\u6570\u636E\u5E93\r\n\r\nuse database1;\r\n\r\n-- \u521B\u5EFA\u6570\u636E\u5E93\r\n\r\ncreate database test1;\r\n\r\n-- \u5C55\u793A\u6570\u636E\u5E93\u6240\u6709\u8868\r\n\r\nshow tables;\r\n\r\n-- \u521B\u5EFA\u8868\r\n\r\ncreate table test1 (id varchar(32),name varchar(32),age int(3),sex int(1),birth datetime);\r\n\r\n-- \u5220\u9664\u8868\r\n\r\ndrop table test1;\r\n\r\n-- \u67E5\u8BE2\u8868\u7ED3\u6784\r\n\r\nDESCRIBE test1;\r\n\r\n\r\n-- \u8868\u4E2D\u63D2\u5165\u5B57\u6BB5\u5E76\u8BBE\u7F6E\u5907\u6CE8\r\n\r\nalter table `sys_depart` ADD `name` varchar(32) DEFAULT NULL COMMENT '\u6D4B\u8BD5b'\r\n\r\n-- \u63D2\u5165\u5B57\u6BB5\r\n\r\nalter table sys_cwzd ADD COLUMN name varchar(50)\r\n\r\n-- \u4FEE\u6539\u5B57\u6BB5\r\n\r\nalter table emp modify ename varchar(20)\r\n\r\n-- \u5220\u9664\u8868\u5B57\u6BB5\r\n\r\nalter table emp drop column age\r\n\r\n-- \u5B57\u6BB5\u6539\u540D\r\n\r\nalter table emp change age age1 int(4)\r\n\r\n-- \u4FEE\u6539\u8868\u540D\r\n\r\nalter table emp rename emp1\r\n\r\n-- \u8BBE\u7F6E\u5907\u6CE8\r\n\r\ncomment on column \u8868\u540D.\u5B57\u6BB5\u540D is '\u5907\u6CE8\u540D'\r\n\r\n-- \u4FEE\u6539\u5B57\u6BB5\u9ED8\u8BA4\u503C\r\n\r\nalter TABLE \u8868\u540D ALTER COLUMN \u5B57\u6BB5\u540D set default \u9ED8\u8BA4\u503C\r\n\r\n-- \u5220\u9664\u7EA6\u675F\r\n\r\nALTER TABLE `sys_depart` MODIFY `b` varchar(32) DEFAULT NULL COMMENT '\u6D4B\u8BD5b';\r\n\n"})}),"\n",(0,l.jsx)(r.h4,{id:"group-by",children:"GROUP BY"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-sql",children:"\r\n-- \u6309project_id\u5206\u7EC4\uFF0C\u67E5\u8BE2create_time\u6700\u5927\u7684\u4E00\u6761\u6570\u636E\u3002\u52A0limit\u624D\u4F1A\u5148\u6392\u5E8F\uFF08\u6D3E\u751F\u7C7B\u95EE\u9898\uFF09\r\n\r\nSELECT * FROM ( SELECT * FROM `pms_conference_info` ORDER BY create_time DESC LIMIT 100000000 ) AS pci GROUP BY pci.project_id\r\n\r\n-- \u6216\u8005(\u4F46\u662F\u4F3C\u4E4E\u8981\u5F71\u54CD\u6027\u80FD)\r\n\r\nSELECT * FROM ( SELECT * FROM `pms_conference_info` having 1 ORDER BY create_time DESC) AS pci GROUP BY pci.project_id\r\n\n"})}),"\n",(0,l.jsx)(r.h4,{id:"concat",children:"concat"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-sql",children:"\r\n-- \u5B57\u7B26\u4E32\u8FDE\u63A5\r\n\r\nconcat(str1,str2,...)\r\n\r\n-- 1-2\r\n\r\nselect CONCAT(1,'-','2') \r\n\n"})}),"\n",(0,l.jsx)(r.h4,{id:"find_in_set",children:"FIND_IN_SET"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-sql",children:"\r\n-- \u7C7B\u4F3C\u4E8E id in('1','2','3')\r\n\r\nselect * from table where FIND_IN_SET(id, '1,2,3')\r\n\n"})}),"\n",(0,l.jsx)(r.h4,{id:"uuid",children:"UUID"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-sql",children:"\r\n-- mysql UUID\r\n\r\nREPLACE(UUID(),'-','')\r\n\n"})}),"\n",(0,l.jsx)(r.h4,{id:"if",children:"IF"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-sql",children:'\r\n-- IF\u8868\u8FBE\u5F0F\r\n\r\n\u5982\u679C expr1 \u662FTRUE,\u5219 IF()\u7684\u8FD4\u56DE\u503C\u4E3Aexpr2; \u5426\u5219\u8FD4\u56DE\u503C\u5219\u4E3Aexpr3\r\n\r\nif(sva=1,"\u7537","\u5973")\r\n\r\n\r\n-- IFNULL(expr1,expr2)\r\n\r\n\u5047\u5982expr1 \u4E0D\u4E3A NULL,\u5219 IFNULL()\u7684\u8FD4\u56DE\u503C\u4E3Aexpr1;\u5426\u5219\u5176\u8FD4\u56DE\u503C\u4E3Aexpr2\r\n\r\nIFNULL(1,0) = 1 ; IFNULL(NULL,10) = 10\r\n\r\n\r\n-- IF ELSE\u505A\u4E3A\u6D41\u7A0B\u63A7\u5236\u8BED\u53E5\u4F7F\u7528\r\n\r\n-- \u5F53IF\u4E2D\u6761\u4EF6search_condition\u6210\u7ACB\u65F6\uFF0C\u6267\u884CTHEN\u540E\u7684statement_list\u8BED\u53E5\uFF0C\u5426\u5219\u5224\u65ADELSEIF\u4E2D\u7684\u6761\u4EF6\r\n\r\nIF search_condition THEN   \r\n\r\n    statement_list    \r\n\r\n[ELSEIF search_condition THEN]    \r\n\r\n    statement_list ...    \r\n\r\n[ELSE   \r\n\r\n    statement_list]    \r\n\r\nEND IF\r\n\n'})}),"\n",(0,l.jsx)(r.h4,{id:"union",children:"UNION"}),"\n",(0,l.jsxs)(r.blockquote,{children:["\n",(0,l.jsx)(r.p,{children:"[!TIP]"}),"\n"]}),"\n",(0,l.jsx)(r.blockquote,{children:"\n"}),"\n",(0,l.jsxs)(r.blockquote,{children:["\n",(0,l.jsx)(r.p,{children:"UNION\u4E00\u5B9A\u8BB0\u5F97\u8981\u628A\u4E24\u8FB9\u5BF9\u5E94\u7684\u5B57\u6BB5\uFF0C\u6309\u987A\u5E8F\u4E00\u4E00\u5BF9\u5E94\u4E0A\uFF0C\u4E0D\u7136\u6570\u636E\u4F1A\u9519\u4E71"}),"\n"]}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-sql",children:'\r\n-- UNION\u64CD\u4F5C\u7B26\r\n\r\n\u4ECE "Websites" \u548C "apps" \u8868\u4E2D\u9009\u53D6\u6240\u6709\u4E0D\u540C\u7684country\uFF08\u53EA\u6709\u4E0D\u540C\u7684\u503C\uFF09\r\n\r\nSELECT country FROM Websites\r\n\r\nUNION\r\n\r\nSELECT country FROM apps\r\n\r\nORDER BY country;\r\n\r\n\r\n-- UNION ALL\r\n\r\n\u4ECE "Websites" \u548C "apps" \u8868\u4E2D\u9009\u53D6\u6240\u6709\u7684country\uFF08\u4E5F\u6709\u91CD\u590D\u7684\u503C\uFF09\r\n\r\nSELECT country FROM Websites\r\n\r\nUNION ALL\r\n\r\nSELECT country FROM apps\r\n\r\nORDER BY country;\r\n\r\n\r\n-- \u5E26\u6709 WHERE \u7684 SQL UNION ALL\r\n\r\n\u4ECE "Websites" \u548C "apps" \u8868\u4E2D\u9009\u53D6\u6240\u6709\u7684\u4E2D\u56FD(CN)\u7684\u6570\u636E\uFF08\u4E5F\u6709\u91CD\u590D\u7684\u503C\uFF09\r\n\r\nSELECT country, name FROM Websites\r\n\r\nWHERE country=\'CN\'\r\n\r\nUNION ALL\r\n\r\nSELECT country, app_name FROM apps\r\n\r\nWHERE country=\'CN\'\r\n\r\nORDER BY country;\r\n\n'})}),"\n",(0,l.jsx)(r.h4,{id:"pad",children:"PAD"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-sql",children:"\r\n-- \u524D\u9762\u8865\u96F6\r\n\r\nLPAD(str,len,padstr)\r\n\r\n-- \u7ED3\u679C\u4E3A 00000001\r\n\r\nselect LPAD(\u20181\u2019, 8, 0)\r\n\r\n\r\n-- \u540E\u9762\u8865\u96F6\r\n\r\nRPAD(str,len,padstr)\r\n\r\n-- \u7ED3\u679C\u4E3A10000000\r\n\r\nselect RPAD(\u20181\u2019, 8, 0)\r\n\n"})}),"\n",(0,l.jsx)(r.h4,{id:"choose-when-otherwise",children:"choose when otherwise"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-mysql",children:'\r\n-- choose\u6807\u7B7E\u662F\u6309\u987A\u5E8F\u5224\u65AD\u5176\u5185\u90E8when\u6807\u7B7E\u4E2D\u7684test\u6761\u4EF6\u51FA\u5426\u6210\u7ACB\uFF0C\u5982\u679C\u6709\u4E00\u4E2A\u6210\u7ACB\uFF0C\u5219 choose \u7ED3\u675F\u3002\r\n\r\n-- \u5F53 choose \u4E2D\u6240\u6709 when \u7684\u6761\u4EF6\u90FD\u4E0D\u6EE1\u5219\u65F6\uFF0C\u5219\u6267\u884Cotherwise \u4E2D\u7684sql\u3002\r\n\r\n-- \u7C7B\u4F3C\u4E8EJava \u7684 switch \u8BED\u53E5\uFF0Cchoose \u4E3A switch\uFF0Cwhen \u4E3A case\uFF0Cotherwise \u5219\u4E3A default\u3002\r\n\r\n< choose > \r\n\r\n	< WHEN test = "condition.messageType != null and condition.messageType != \'\'" > \r\n\r\n			AND a.message_type = #{condition.messageType}\r\n\r\n	</ WHEN > \r\n\r\n	< otherwise > \r\n\r\n		AND a.message_type IN \r\n\r\n		< foreach collection = "condition.messageTypes" item = "businessType" OPEN = "(" SEPARATOR = "," CLOSE = ")" > \r\n\r\n			#{businessType}\r\n\r\n		</ foreach > \r\n\r\n	</ otherwise > \r\n\r\n</ choose > \r\n\n'})}),"\n",(0,l.jsx)(r.h4,{id:"exists",children:"EXISTS"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-mysql",children:"\r\n-- EXISTS\u6267\u884C\u987A\u5E8F\uFF1A\r\n\r\n-- 1\u3001\u9996\u5148\u6267\u884C\u4E00\u6B21\u5916\u90E8\u67E5\u8BE2\uFF0C\u5E76\u7F13\u5B58\u7ED3\u679C\u96C6\uFF0C\u5982 SELECT * FROM A\r\n\r\n-- 2\u3001\u904D\u5386\u5916\u90E8\u67E5\u8BE2\u7ED3\u679C\u96C6\u7684\u6BCF\u4E00\u884C\u8BB0\u5F55R\uFF0C\u4EE3\u5165\u5B50\u67E5\u8BE2\u4E2D\u4F5C\u4E3A\u6761\u4EF6\u8FDB\u884C\u67E5\u8BE2\uFF0C\u5982 SELECT 1 FROM B WHERE B.id = A.id\r\n\r\n-- 3\u3001\u5982\u679C\u5B50\u67E5\u8BE2\u6709\u8FD4\u56DE\u7ED3\u679C\uFF0C\u5219EXISTS\u5B50\u53E5\u8FD4\u56DETRUE\uFF0C\u8FD9\u4E00\u884CR\u53EF\u4F5C\u4E3A\u5916\u90E8\u67E5\u8BE2\u7684\u7ED3\u679C\u884C\uFF0C\u5426\u5219\u4E0D\u80FD\u4F5C\u4E3A\u7ED3\u679C\r\n\r\n-- EXISTS\u4E3Atrue\u4FDD\u7559\u5916\u67E5\u8BE2\u7ED3\u679C\uFF0C\u5426\u5219\u4E0D\u4FDD\u7559\u5916\u67E5\u8BE2\u7ED3\u679C\r\n\r\nSELECT * FROM A WHERE EXISTS (SELECT 1 FROM B WHERE B.id = A.id); \r\n\n"})}),"\n",(0,l.jsx)(r.h4,{id:"cdata-",children:"\uFF1C![CDATA[ ]]"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-mysql",children:'\r\n-- \uFF1C![CDATA[ ]]\uFF1E\r\n\r\n-- \u672F\u8BEDCDATA\u6307\u7684\u662F\u4E0D\u5E94\u7531XML\u89E3\u6790\u5668\u8FDB\u884C\u89E3\u6790\u7684\u6587\u672C\u6570\u636E\uFF08Unparsed Character Data\uFF09\r\n\r\n-- \u7531\u4E8EXML\u6587\u4EF6\u5BF9\u4E8E\u5143\u7D20\u4E3A"<"\u548C"&"\u662F\u975E\u6CD5\u7684\uFF0C\u4E0D\u7B26\u5408\u89C4\u5219\u3002\r\n\r\n-- "<"\u7684\u4EA7\u751F\u9519\u8BEF\uFF0C\u662F\u56E0\u4E3A\u89E3\u6790\u5668\u4F1A\u628A\u8BE5\u5B57\u7B26\u89E3\u91CA\u4E3A\u65B0\u5143\u7D20\u7684\u5F00\u59CB\u3002\r\n\r\n-- "&"\u7684\u4EA7\u751F\u9519\u8BEF\uFF0C\u662F\u56E0\u4E3A\u89E3\u6790\u5668\u4F1A\u628A\u8BE5\u5B57\u7B26\u89E3\u91CA\u4E3A\u5B57\u7B26\u5B9E\u4F53\u7684\u5F00\u59CB\u3002\r\n\r\n-- mapper\u6587\u4EF6\u4E2D\u5199sql\u8BED\u53E5\u65F6\uFF0C\u9047\u5230\u7279\u6B8A\u5B57\u7B26\u65F6\uFF0C\u5982\uFF1A< \u7B49\uFF0C\u5EFA\u8BAE\u4F7F\u7528<![CDATA[ ... ]]>\uFF0C\u5C06\u5305\u88F9\u7684\u5185\u5BB9\u4E0D\u88AB\u89E3\u6790\u5668\u89E3\u6790\r\n\r\nselect area, operator from ip_address where INET_ATON(#{ip}) > ip_start_num \r\n\r\nand INET_ATON(#{ip})  <![CDATA[ < ]]>  ip_end_num\r\n\n'})}),"\n",(0,l.jsx)(r.h4,{id:"substring",children:"substring"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-mysql",children:"\r\n-- substring(string, position, length)\r\n\r\n\u7B2C\u4E00\u4E2A\u53C2\u6570string\u6307\u7684\u662F\u9700\u8981\u622A\u53D6\u7684\u539F\u5B57\u7B26\u4E32\u3002\r\n\r\n\u7B2C\u4E8C\u4E2A\u53C2\u6570position\u6307\u7684\u662F\u4ECE\u54EA\u4E2A\u4F4D\u7F6E\u5F00\u59CB\u622A\u53D6\u5B50\u5B57\u7B26\u4E32\uFF0C\u82E5position\u4E3A\u8D1F\u6570\u5219\u4ECE\u53F3\u5F80\u5DE6\u5F00\u59CB\u6570\u4F4D\u7F6E\u3002\r\n\r\n\u7B2C\u4E09\u4E2A\u53C2\u6570length\u6307\u7684\u662F\u9700\u8981\u622A\u53D6\u7684\u5B57\u7B26\u4E32\u957F\u5EA6\uFF0C\u5982\u679C\u4E0D\u5199\uFF0C\u5219\u9ED8\u8BA4\u622A\u53D6\u4ECEposition\u5F00\u59CB\u5230\u6700\u540E\u4E00\u4F4D\u7684\u6240\u6709\u5B57\u7B26\u3002\r\n\r\n\u4F8B\uFF1Asubstring(\u2018pandas\u2019, length(pandas)-2, 2) \u7684\u7ED3\u679C\u4E3A \u2018da\u2019.\r\n\r\n\r\n-- substring(string from position for length)\r\n\r\n\u662F\u4E00\u79CD\u66F4\u52A0\u89C4\u8303\u7684\u5199\u6CD5\uFF0C\u53C2\u6570\u542B\u4E49\u540C\u4E0A\u6240\u8FF0\u3002\r\n\r\n\u540C\u6837\uFF0C\u8FD9\u91CC\u7684 for length\u53EF\u4EE5\u4E0D\u5199\uFF0C\u9ED8\u8BA4\u4ECEposition\u5F00\u59CB\u622A\u53D6\u5230\u6700\u540E\u4E00\u4E2A\u5B57\u7B26\u3002\r\n\r\n\u4F8B\uFF1Asubstring(\u2018pandas\u2019 from 4 for 2) \u7684\u7ED3\u679C\u4E3A \u2018da\u2019.\r\n\n"})}),"\n",(0,l.jsx)(r.h4,{id:"any_value",children:"any_value"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-mysql",children:"\r\n-- any_value()\r\n\r\n-- \u89E3\u51B3\uFF1A\u6291\u5236ONLY_FULL_GROUP_BY\u503C\u88AB\u62D2\u7EDD\uFF0Cany_value()\u4F1A\u9009\u62E9\u88AB\u5206\u5230\u540C\u4E00\u7EC4\u7684\u6570\u636E\u91CC\u7B2C\u4E00\u6761\u6570\u636E\u7684\u6307\u5B9A\u5217\u503C\u4F5C\u4E3A\u8FD4\u56DE\u6570\u636E\u3002\r\n\r\n-- \u62A5\u9519\uFF1AExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 'area.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by\r\n\r\n-- \u539F\u56E0\uFF1AMySQL5.7\u4E4B\u540E\uFF0Csql_mode\u4E2DONLY_FULL_GROUP_BY\u6A21\u5F0F\u9ED8\u8BA4\u8BBE\u7F6E\u4E3A\u6253\u5F00\u72B6\u6001\u3002ONLY_FULL_GROUP_BY\u7684\u8BED\u4E49\u5C31\u662F\u786E\u5B9Aselect target list\u4E2D\u7684\u6240\u6709\u5217\u7684\u503C\u90FD\u662F\u660E\u786E\u8BED\u4E49\uFF0C\u7B80\u5355\u7684\u8BF4\u6765\uFF0C\u5728\u6B64\u6A21\u5F0F\u4E0B\uFF0Ctarget list\u4E2D\u7684\u503C\u8981\u4E48\u662F\u6765\u81EA\u4E8E\u805A\u5408\u51FD\u6570\uFF08sum\u3001avg\u3001max\u7B49\uFF09\u7684\u7ED3\u679C\uFF0C\u8981\u4E48\u662F\u6765\u81EA\u4E8Egroup by list\u4E2D\u7684\u8868\u8FBE\u5F0F\u7684\u503C\u3002\r\n\n"})}),"\n",(0,l.jsx)(r.h4,{id:"round",children:"round"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-mysql",children:"\r\n-- round\u51FD\u6570\u7528\u4E8E\u6570\u636E\u7684\u56DB\u820D\u4E94\u5165\uFF0C\u5B83\u6709\u4E24\u79CD\u5F62\u5F0F\uFF1A\r\n\r\n-- 1\u3001round(x,d)  \uFF0Cx\u6307\u8981\u5904\u7406\u7684\u6570\uFF0Cd\u662F\u6307\u4FDD\u7559\u51E0\u4F4D\u5C0F\u6570.\u8FD9\u91CC\u6709\u4E2A\u503C\u5F97\u6CE8\u610F\u7684\u5730\u65B9\u662F\uFF0Cd\u53EF\u4EE5\u662F\u8D1F\u6570\uFF0C\u8FD9\u65F6\u662F\u6307\u5B9A\u5C0F\u6570\u70B9\u5DE6\u8FB9\u7684d\u4F4D\u6574\u6570\u4F4D\u4E3A0,\u540C\u65F6\u5C0F\u6570\u4F4D\u5747\u4E3A0\uFF1B\r\n\r\n-- \u5982round(112.3,-1)=110\r\n\r\n-- round(112.3,0)=112\r\n\r\n-- 2\u3001round(x)  ,\u5176\u5B9E\u5C31\u662Fround(x,0),\u4E5F\u5C31\u662F\u9ED8\u8BA4d\u4E3A0\uFF1B\r\n\n"})}),"\n",(0,l.jsx)(r.h4,{id:"case-when-then-else-end",children:"case when then else end"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-mysql",children:"\r\n-- case when then else end\r\n\r\n-- case\u5177\u6709\u4E24\u79CD\u683C\u5F0F\u3002\u7B80\u5355case\u51FD\u6570\u548Ccase\u641C\u7D22\u51FD\u6570\u3002\r\n\r\n    -- \u7B80\u5355case\u51FD\u6570\r\n\r\n    case sex\r\n\r\n      when '1' then '\u7537'\r\n\r\n      when '2' then '\u5973\u2019\r\n\r\n      else '\u5176\u4ED6' end\r\n\r\n    -- case\u641C\u7D22\u51FD\u6570\r\n\r\n    case when sex = '1' then '\u7537'\r\n\r\n         when sex = '2' then '\u5973'\r\n\r\n         else '\u5176\u4ED6' end\r\n\n"})}),"\n",(0,l.jsx)(r.h4,{id:"coalesce",children:(0,l.jsx)(r.a,{href:"https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html#function_coalesce",children:"COALESCE"})}),"\n",(0,l.jsxs)(r.blockquote,{children:["\n",(0,l.jsx)(r.p,{children:"\u8FD4\u56DE\u5217\u8868\u4E2D\u7B2C\u4E00\u4E2A\u5206\u5F00\u6570\u503C"}),"\n"]}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-mysql",children:"\r\nSELECT COALESCE(NULL,1); -- 1\r\n\r\nSELECT COALESCE(NULL,NULL,NULL); -- NULL\r\n\n"})}),"\n",(0,l.jsx)(r.h4,{id:"date_format",children:"date_format"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-sql",children:"\r\ndate_format(ii.issue_expire_date, '%Y%m%d')\r\n\n"})}),"\n",(0,l.jsx)(r.h4,{id:"datediff",children:"DATEDIFF"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-mysql",children:"\r\n-- DATEDIFF\u51FD\u6570\u7528\u4E8E\u8FD4\u56DE\u4E24\u4E2A\u65E5\u671F\u7684\u5929\u6570\r\n\r\n-- DATEDIFF(date1,date2)\r\n\r\n-- date1: \u6BD4\u8F83\u65E5\u671F1 \r\n\r\n-- date2: \u6BD4\u8F83\u65E5\u671F2\r\n\r\n-- DATEDIFF\u51FD\u6570\u8FD4\u56DEdate1 - date2\u7684\u8BA1\u7B97\u7ED3\u679C\uFF0Cdate1\u548Cdate2\u4E24\u4E2A\u53C2\u6570\u9700\u662F\u6709\u6548\u7684\u65E5\u671F\u6216\u65E5\u671F\u65F6\u95F4\u503C;\u5982\u679C\u53C2\u6570\u4F20\u9012\u7684\u662F\u65E5\u671F\u65F6\u95F4\u503C\uFF0CDATEDIFF\u51FD\u6570\u4EC5\u5C06\u65E5\u671F\u90E8\u5206\u7528\u4E8E\u8BA1\u7B97\uFF0C\u5E76\u5FFD\u7565\u65F6\u95F4\u90E8\u5206(\u53EA\u6709\u503C\u7684\u65E5\u671F\u90E8\u5206\u53C2\u4E0E\u8BA1\u7B97)\r\n\r\n-- 1\r\n\r\nSELECT DATEDIFF('2022-04-30','2022-04-29');\r\n\r\n-- 0\r\n\r\nSELECT DATEDIFF('2022-04-30','2022-04-30');\r\n\r\n-- -1\r\n\r\nSELECT DATEDIFF('2022-04-29','2022-04-30');\r\n\r\n-- 0\r\n\r\nSELECT DATEDIFF('2022-04-30','2022-04-30 14:00:00');\r\n\r\n-- 1\r\n\r\nSELECT DATEDIFF('2022-04-30 13:00:00','2022-04-29 14:00:00');\r\n\r\n-- 10\r\n\r\nSELECT DATEDIFF('2017-06-25 09:34:21', '2017-06-15');\r\n\n"})}),"\n",(0,l.jsx)(r.h4,{id:"timestampdiff",children:"TIMESTAMPDIFF"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-mysql",children:"\r\n-- TIMESTAMPDIFF\u51FD\u6570\u7528\u4E8E\u8BA1\u7B97\u4E24\u4E2A\u65E5\u671F\u7684\u65F6\u95F4\u5DEE\r\n\r\n-- TIMESTAMPDIFF(unit,datetime_expr1,datetime_expr2)\r\n\r\n-- unit: \u65E5\u671F\u6BD4\u8F83\u8FD4\u56DE\u7684\u65F6\u95F4\u5DEE\u5355\u4F4D\uFF0C\u5E38\u7528\u53EF\u9009\u503C\u5982\u4E0B:\r\n\r\n    SECOND\uFF1A\u79D2\r\n\r\n    MINUTE\uFF1A\u5206\u949F\r\n\r\n    HOUR\uFF1A\u5C0F\u65F6\r\n\r\n    DAY\uFF1A\u5929\r\n\r\n    WEEK\uFF1A\u661F\u671F\r\n\r\n    MONTH\uFF1A\u6708\r\n\r\n    QUARTER\uFF1A\u5B63\u5EA6\r\n\r\n    YEAR\uFF1A\u5E74\r\n\r\n-- datetime_expr1: \u8981\u6BD4\u8F83\u7684\u65E5\u671F1\r\n\r\n-- datetime_expr2: \u8981\u6BD4\u8F83\u7684\u65E5\u671F2\r\n\r\n-- TIMESTAMPDIFF\u51FD\u6570\u8FD4\u56DEdatetime_expr2 - datetime_expr1\u7684\u7ED3\u679C\r\n\r\n-- \u5176\u4E2Ddatetime_expr1\u548Cdatetime_expr2\u53EF\u4EE5\u662FDATE\u6216DATETIME\u7C7B\u578B\u503C\r\n\r\n-- \u76F8\u5DEE\uFF1A25\u79D2\r\n\r\nSELECT TIMESTAMPDIFF(SECOND,'2022-04-23 14:57:00','2022-04-23 14:57:25');\r\n\r\n-- \u76F8\u5DEE\uFF1A5\u5206\u949F\r\n\r\nSELECT TIMESTAMPDIFF(MINUTE,'2022-04-23 15:00:00','2022-04-23 15:05:00');\r\n\r\n-- \u76F8\u5DEE\uFF1A5\u5C0F\u65F6\r\n\r\nSELECT TIMESTAMPDIFF(HOUR,'2022-04-23 11:20:00', '2022-04-23 16:20:00');\r\n\r\n-- \u76F8\u5DEE\uFF1A2\u5929\r\n\r\nSELECT TIMESTAMPDIFF(DAY,'2022-04-23 11:20:00', '2022-04-25 11:20:00');\r\n\r\n-- \u76F8\u5DEE\uFF1A1\u661F\u671F\r\n\r\nSELECT TIMESTAMPDIFF(WEEK,'2022-04-23 11:20:00', '2022-04-30 11:20:00');\r\n\r\n-- \u76F8\u5DEE\uFF1A1\u6708\r\n\r\nSELECT TIMESTAMPDIFF(MONTH,'2022-04-23 11:20:00', '2022-05-30 11:20:00');\r\n\r\n-- \u76F8\u5DEE\uFF1A1\u5B63\u5EA6\r\n\r\nSELECT TIMESTAMPDIFF(QUARTER,'2022-04-23 11:20:00', '2022-07-23 11:20:00');\r\n\r\n-- \u76F8\u5DEE\uFF1A1\u5E74\r\n\r\nSELECT TIMESTAMPDIFF(YEAR,'2022-04-23 11:20:00', '2023-04-23 11:20:00');\r\n\n"})}),"\n",(0,l.jsx)(r.h4,{id:"day--last_day",children:"day()  last_day()"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-mysql",children:"\r\n-- day(date) : \u83B7\u53D6\u65E5\r\n\r\nSELECT DAY('2018-01-15'); -- 15\r\n\r\n\r\n-- last_day() : \u83B7\u53D6\u6700\u540E\u4E00\u5929\r\n\r\nselect LAST_DAY('2018-02-03'); -- 2018-02-28\r\n\r\n\r\n-- day(last_day())\uFF1A \u83B7\u53D6\u67D0\u5E74\u67D0\u6708\u7684\u6700\u540E\u4E00\u5929\r\n\r\nSELECT DAY(LAST_DAY('2018-02-03')); --28\r\n\r\n\r\n-- \u52A0\u4E00\u4E2A\u6708\r\n\r\nselect ADDDATE(current_date,INTERVAL '1' MONTH)\r\n\r\n\r\n-- \u63D0\u53D6\u65E5\u671F\u7684\u5E74/\u6708/\u65E5\r\n\r\nselect YEAR (CURDATE()),MONTH(CURDATE()),DAYOFMONTH(CURDATE())\r\n\r\n\r\n-- \u65E5\u671F\u52A0\u4E00\u5929/\u4E00\u4E2A\u6708\r\n\r\nselect DATE_ADD(CURDATE(),INTERVAL 1 DAY/INTERVAL 1 MOUTH)\r\n\n"})}),"\n",(0,l.jsx)(r.h4,{id:"cast",children:"CAST"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-mysql",children:"\r\n-- CAST\u51FD\u6570\u7528\u4E8E\u5C06\u503C\u4ECE\u4E00\u79CD\u6570\u636E\u7C7B\u578B\u8F6C\u6362\u4E3A\u8868\u8FBE\u5F0F\u4E2D\u6307\u5B9A\u7684\u53E6\u4E00\u79CD\u6570\u636E\u7C7B\u578B\r\n\r\nCAST(value AS datatype)\r\n\r\n-- AS\u5173\u952E\u5B57\u7528\u4E8E\u5206\u9694\u4E24\u4E2A\u53C2\u6570\uFF0C\u5728AS\u4E4B\u524Dvalue\u7684\u662F\u8981\u5904\u7406\u7684\u6570\u636E\uFF0C\u5728AS\u4E4B\u540Edatatype\u7684\u662F\u8981\u8F6C\u6362\u7684\u6570\u636E\u7C7B\u578B\r\n\r\nDATE		\u5C06value\u8F6C\u6362\u6210'YYYY-MM-DD'\u683C\u5F0F\r\n\r\nDATETIME	\u5C06value\u8F6C\u6362\u6210'YYYY-MM-DD HH\uFF1AMM\uFF1ASS'\u683C\u5F0F\r\n\r\nTIME		\u5C06value\u8F6C\u6362\u6210'HH\uFF1AMM\uFF1ASS'\u683C\u5F0F\r\n\r\nCHAR		\u5C06value\u8F6C\u6362\u6210CHAR(\u56FA\u5B9A\u957F\u5EA6\u7684\u5B57\u7B26\u4E32)\u683C\u5F0F\r\n\r\nSIGNED		\u5C06value\u8F6C\u6362\u6210INT(\u6709\u7B26\u53F7\u7684\u6574\u6570)\u683C\u5F0F\r\n\r\nUNSIGNED	\u5C06value\u8F6C\u6362\u6210INT(\u65E0\u7B26\u53F7\u7684\u6574\u6570)\u683C\u5F0F\r\n\r\nDECIMAL		\u5C06value\u8F6C\u6362\u6210FLOAT(\u6D6E\u70B9\u6570)\u683C\u5F0F \r\n\r\nBINARY		\u5C06value\u8F6C\u6362\u6210\u4E8C\u8FDB\u5236\u683C\u5F0F\r\n\r\n\r\n-- DECIMAL(\u6570\u503C\u7CBE\u5EA6\uFF0C\u5C0F\u6570\u70B9\u4FDD\u7559\u957F\u5EA6)\r\n\r\n-- DECIMAL(10,2)\u53EF\u4EE5\u5B58\u50A8\u6700\u591A\u5177\u67098\u4F4D\u6574\u6570\u548C2\u4F4D\u5C0F\u6570\u7684\u6570\u5B57\r\n\r\n-- 9.50\r\n\r\nSELECT CAST('9.5' AS DECIMAL(10,2));\r\n\r\n-- 99999999.99\r\n\r\nSELECT CAST('1234567890.123' AS DECIMAL(10,2));\r\n\r\n-- 220.232\r\n\r\nSELECT CAST('220.23211231' AS DECIMAL(10, 3));\r\n\r\n-- 220.232\r\n\r\nSELECT CAST(220.23211231 AS DECIMAL(10, 3));\r\n\r\n\r\n-- String\u8F6Cdouble\uFF0C\u5E76\u4FDD\u75592\u4F4D\r\n\r\nselect convert('111.11',decimal(10,2))\r\n\r\nselect cast(\"111.11\" as decimal(10,2))\r\n\r\n-- \u4FDD\u7559\u5C0F\u6570\u4F4D\u65702\u4F4D\r\n\r\nselect FORMAT(\"\",2)\r\n\n"})}),"\n",(0,l.jsx)(r.h4,{id:"instr",children:"INSTR"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-mysql",children:"\r\n-- INSTR(str,substr)\uFF0C\u83B7\u53D6substr\u5728str\u7B2C\u4E00\u6B21\u51FA\u73B0\u7684\u4F4D\u7F6E\uFF0C\u5982\u679C\u6CA1\u6709\u627E\u5230\u5219\u8FD4\u56DE0\r\n\r\nSELECT INSTR('111222','2') -- 4\r\n\n"})}),"\n",(0,l.jsx)(r.h4,{id:"period_diff",children:"PERIOD_DIFF"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-mysql",children:"\r\n-- PERIOD_DIFF()\u51FD\u6570\u8FD4\u56DE\u4E24\u4E2A\u65F6\u95F4\u76F8\u5DEE\u7684\u6708\u4EFD\u6570,\u524D\u4E00\u4E2A\u65F6\u95F4\u51CF\u540E\u4E00\u4E2A\u65F6\u95F4\r\n\r\n-- PERIOD_DIFF(period1, period2)\r\n\r\nSELECT PERIOD_DIFF(201710, 201703); -- 7\r\n\n"})}),"\n",(0,l.jsx)(r.h4,{id:"mod",children:"MOD"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-sql",children:"\r\n-- \u53D6\u6A21\r\n\r\nselect MOD(MONTH(CURDATE()), 12)\r\n\n"})}),"\n",(0,l.jsx)(r.h4,{id:"right",children:"RIGHT"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-sql",children:"\r\n-- \u53D6\u53F3/\u5DE64\u4F4D\r\n\r\nselect RIGHT(value,4)/left(value,4)\r\n\n"})}),"\n",(0,l.jsx)(r.h4,{id:"regexp",children:"REGEXP"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-sql",children:"\r\n-- \u6B63\u5219\u8868\u8FBE\u5F0F\r\n\r\nREGEXP()/NOT REGEXP/RLIKE/NOT RLIKE\r\n\n"})}),"\n",(0,l.jsx)(r.h4,{id:"\u7A97\u53E3\u51FD\u657080\u7248\u672C\u524D",children:"\u7A97\u53E3\u51FD\u6570\uFF088.0\u7248\u672C\u524D\uFF09"}),"\n",(0,l.jsx)(r.h6,{id:"dense_rank",children:(0,l.jsx)(r.a,{href:"https://dev.mysql.com/doc/refman/8.0/en/window-function-descriptions.html#function_dense-rank",children:"DENSE_RANK"})}),"\n",(0,l.jsxs)(r.blockquote,{children:["\n",(0,l.jsx)(r.p,{children:"\u6392\u540D"}),"\n"]}),"\n",(0,l.jsx)(r.h3,{id:"\u5176\u5B83\u8BED\u53E5",children:"\u5176\u5B83\u8BED\u53E5"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-mysql",children:"\r\n-- \u5220\u966430\u5929\u524D\u7684\u6570\u636E\r\n\r\nDELETE FROM ly_p12_multiple_log WHERE open_time < date_sub(curdate(),INTERVAL 30 DAY)\r\n\r\n	\r\n-- \u83B7\u53D6\u67D0\u5929\u7684\u6BCF\u4E2A\u5C0F\u65F6\u7684\u6570\u636E\r\n\r\nSELECT HOUR( e.open_time ) AS HOUR,count( * ) AS Count \r\n\r\nFROM ly_p12_multiple e WHERE e.open_time between '2021-07-15 00' and '2021-07-16 00' \r\n\r\nGROUP BY HOUR ( e.open_time ) ORDER BY HOUR ( e.open_time )\r\n\r\n\r\n-- \u67D0\u5B57\u6BB5\u53BB\u91CD\r\n\r\ndelete from `sys_depart` where id not in (select t.max_id from (select max(id) as max_id from `sys_depart` t group by org_code) as t);\r\n\r\n\r\n-- \u53BB\u91CD\r\n\r\ndistinct\r\n\r\n\r\n-- \u67E5\u8BE2\u6700\u5927\u503C\r\n\r\nselect MAX(value);\r\n\r\nselect * from a wher a.value = (select MAX(value));\r\n\r\nselect * from a order by desc limit 1;\r\n\r\n-- \u6309\u7EC4\u67E5\u8BE2\u6700\u5927\u503C\r\n\r\nSELECT value1,MAX(value) FROM a GROUP BY a.value1\r\n\n"})}),"\n",(0,l.jsx)(r.h4,{id:"binlog",children:"binlog"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-mysql",children:"\r\n-- binlog\r\n\r\n-- \u83B7\u53D6binlog\u6587\u4EF6\u5217\u8868\r\n\r\nshow binary logs;\r\n\r\n-- \u6BCF\u5F53\u6211\u4EEC\u505C\u6B62\u6216\u91CD\u542F\u670D\u52A1\u5668\u65F6\uFF0C\u670D\u52A1\u5668\u4F1A\u628A\u65E5\u5FD7\u6587\u4EF6\u8BB0\u5165\u4E0B\u4E00\u4E2A\u65E5\u5FD7\u6587\u4EF6\uFF0CMySQL\u4F1A\u5728\u91CD\u542F\u65F6\u751F\u6210\u4E00\u4E2A\u65B0\u7684\u65E5\u5FD7\u6587\u4EF6\uFF0C\u6587\u4EF6\u5E8F\u53F7\u9012\u589E\u3002\r\n\r\n-- \u5982\u679C\u65E5\u5FD7\u6587\u4EF6\u8D85\u8FC7max_binlog_size\uFF08\u9ED8\u8BA4\u503C1G\uFF09\u7CFB\u7EDF\u53D8\u91CF\u914D\u7F6E\u7684\u4E0A\u9650\u65F6\uFF0C\u4E5F\u4F1A\u751F\u6210\u65B0\u7684\u65E5\u5FD7\u6587\u4EF6\uFF08\u5728\u8FD9\u91CC\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u5982\u679C\u4F60\u6B63\u4F7F\u7528\u5927\u7684\u4E8B\u52A1\uFF0C\u4E8C\u8FDB\u5236\u65E5\u5FD7\u8FD8\u4F1A\u8D85\u8FC7max_binlog_size\uFF0C\u4E0D\u4F1A\u751F\u6210\u65B0\u7684\u65E5\u5FD7\u6587\u4EF6\uFF0C\u4E8B\u52A1\u5168\u5199\u5165\u4E00\u4E2A\u4E8C\u8FDB\u5236\u65E5\u5FD7\u4E2D,\u8FD9\u79CD\u60C5\u51B5\u4E3B\u8981\u662F\u4E3A\u4E86\u4FDD\u8BC1\u4E8B\u52A1\u7684\u5B8C\u6574\u6027\uFF09\r\n\r\n-- \u65E5\u5FD7\u88AB\u5237\u65B0\u65F6\uFF0C\u65B0\u751F\u6210\u4E00\u4E2A\u65E5\u5FD7\u6587\u4EF6flush logs;\r\n\r\nshow binlog events in 'mysql-bin.000898';\r\n\r\nshow binlog events;\r\n\n"})}),"\n",(0,l.jsx)(r.h4,{id:"\u7D22\u5F15",children:"\u7D22\u5F15"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-mysql",children:"\r\n-- \u65B0\u5EFA\u7D22\u5F15\r\n\r\n    -- 1.\u6DFB\u52A0primary key(\u4E3B\u952E\u7D22\u5F15)\r\n\r\n    alter   table  \u8868\u540D   add  primary   key(`\u5B57\u6BB5\u540D`);\r\n\r\n    -- 2.\u6DFB\u52A0unique(\u552F\u4E00\u7D22\u5F15)\r\n\r\n    alter  table  \u8868\u540D  add  unique(\u5217\u540D);\r\n\r\n    -- 3.\u6DFB\u52A0index(\u666E\u901A\u7D22\u5F15)\r\n\r\n    alter  table  \u8868\u540D  add  index  index_name(`\u5B57\u6BB5\u540D`);\r\n\r\n    -- 4.\u6DFB\u52A0fulltext(\u5168\u6587\u7D22\u5F15)\r\n\r\n    alter  table  \u8868\u540D  add  fulltext (`\u5B57\u6BB5\u540D`);\r\n\r\n    -- 5.\u6DFB\u52A0\u591A\u5217\u7D22\u5F15\r\n\r\n    alter  table  \u8868\u540D  add  index  index_name (`\u5B57\u6BB5\u540D1`\uFF0C`\u5B57\u6BB5\u540D2`.......);\r\n\r\n-- \u5220\u9664\u7D22\u5F15\r\n\r\n	DROP INDEX <\u7D22\u5F15\u540D> ON <\u8868\u540D>\r\n\n"})}),"\n",(0,l.jsx)(r.h4,{id:"\u5B58\u50A8\u8FC7\u7A0B",children:"\u5B58\u50A8\u8FC7\u7A0B"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-mysql",children:"\r\n###\u521B\u5EFA\u5B58\u50A8\u8FC7\u7A0B\r\n\r\ncreate procedure update_user_times()\r\n\r\nbegin\r\n\r\nupdate sv_common_user set times_supplement = '5',surplus_times_supplement = '5';\r\n\r\nend;\r\n\r\n###\u521B\u5EFA\u4EFB\u52A1\r\n\r\ncreate event if not exists udpate_user \r\n\r\nON SCHEDULE\r\n\r\nEVERY 1 day\r\n\r\nSTARTS concat('2022-09-01',' 00:00:00')\r\n\r\non completion PRESERVE\r\n\r\ndo call update_user_times();\r\n\r\n### event_scheduler\u67E5\u8BE2\u662F\u5426\u5F00\u542Fevent\r\n\r\nshow variables like '%sche%';\r\n\r\n### \u5982\u679C\u6CA1\u5F00\u542F\uFF0C\u5219\u6267\u884C\u8BED\u53E5\u5F00\u542F\r\n\r\nset global event_scheduler=1;\r\n\r\n#\u5173\u95ED\u4E8B\u4EF6\u4EFB\u52A1\r\n\r\nalter event udpate_user ON COMPLETION PRESERVE DISABLE;\r\n\r\n#\u5F00\u542F\u4E8B\u4EF6\u4EFB\u52A1\r\n\r\nalter event udpate_user ON COMPLETION PRESERVE ENABLE;\r\n\r\n#\u5220\u9664\u4E8B\u4EF6\r\n\r\ndrop event udpate_user;\r\n\r\n#\u5220\u9664\u5B58\u50A8\u8FC7\u7A0B\r\n\r\nDROP PROCEDURE update_user_times;\r\n\r\n#\u67E5\u8BE2\u4E8B\u4EF6\u4FE1\u606F\r\n\r\nselect EVENT_NAME,EVENT_DEFINITION,STARTS,STATUS from information_schema.`EVENTS`\r\n\n"})}),"\n",(0,l.jsx)(r.h4,{id:"\u6570\u636E\u6743\u9650",children:"\u6570\u636E\u6743\u9650"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-sql",children:"\r\n-- \u6388\u4E88\u64CD\u4F5C\u6743\u9650(\u5C06test\u6570\u636E\u5E93\u4E2D\u6240\u6709\u8868\u7684select\u548Cinsert\u6743\u9650\u6388\u4E88test\u7528\u6237)\r\n\r\ngrant select,insert on test.* to 'test'@'localhost' identified by '123'\r\n\r\n\r\n-- \u67E5\u770B\u8D26\u53F7\u6743\u9650\r\n\r\nshow grants for 'test'@'localhost'\r\n\r\n\r\n-- \u6536\u56DE\u64CD\u4F5C\u6743\u9650\r\n\r\nrevoke insert on test.* from 'test'@'localhost'\r\n\r\n\r\n-- \u6388\u4E88\u6240\u6709\u6570\u636E\u5E93\u7684\u6240\u6709\u6743\u9650\r\n\r\ngrant all privileges on *.* to 'test'@'localhost'\r\n\r\n\r\n-- \u6388\u4E88\u6240\u6709\u6570\u636E\u5E93\u7684\u6240\u6709\u6743\u9650(\u5305\u62ECgrant)\r\n\r\ngrant all privileges on *.* to 'test'@'localhost' with grant option\r\n\r\n\r\n-- \u6388\u4E88SUPER PROCESS FILE\u6743\u9650\uFF08\u7CFB\u7EDF\u6743\u9650\u4E0D\u80FD\u6307\u5B9A\u6570\u636E\u5E93\uFF09\r\n\r\ngrant super,process,file on *.* to 'test'@'localhost'\r\n\r\n\r\n-- \u53EA\u6388\u4E88\u767B\u5F55\u6743\u9650\r\n\r\ngrant usage on *.* to 'test'@'localhost'\r\n\n"})}),"\n",(0,l.jsx)(r.h4,{id:"\u8D26\u53F7",children:"\u8D26\u53F7"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-sql",children:"\r\n-- \u5220\u9664\u8D26\u53F7\r\n\r\ndrop user 'test'@'localhost'\r\n\r\n\r\n-- \u4FEE\u6539\u81EA\u5DF1\u7684\u5BC6\u7801\r\n\r\nset password = password('123')\r\n\r\n\r\n-- \u7BA1\u7406\u5458\u4FEE\u6539\u4ED6\u4EBA\u5BC6\u7801\r\n\r\nset password for 'test'@'localhost' = password('123')\r\n\n"})}),"\n",(0,l.jsx)(r.h4,{id:"\u5B57\u7B26\u96C6",children:"\u5B57\u7B26\u96C6"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-sql",children:"\r\n-- \u67E5\u770B\u5B57\u7B26\u96C6\r\n\r\nshow variables like 'character%'\r\n\r\n\r\n-- \u521B\u5EFA\u6570\u636E\u5E93\u65F6\u6307\u5B9A\u5B57\u7B26\u96C6\r\n\r\ncreate database test2 character set utf8\r\n\n"})}),"\n",(0,l.jsx)(r.h3,{id:"\u6279\u91CF\u63D2\u5165",children:"\u6279\u91CF\u63D2\u5165"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-sql",children:'\r\n-- \u7ECF\u8FC7\u9879\u76EE\u5B9E\u8DF5\u53D1\u73B0,\u5F53\u8868\u7684\u5217\u6570\u8F83\u591A\uFF0820+\uFF09,\u4EE5\u53CA\u4E00\u6B21\u6027\u63D2\u5165\u7684\u884C\u6570\u8F83\u591A\uFF085000+\uFF09,\u63D2\u5165\u7684\u8017\u65F6\u5341\u5206\u6F2B\u957F \r\n\r\n<insert id="batchInsert" parameterType="java.util.List">\r\n\r\n    insert into USER (id, name) values\r\n\r\n    <foreach collection="list" item="model" index="index" separator=","> \r\n\r\n        (#{model.id}, #{model.name})\r\n\r\n    </foreach>\r\n\r\n</insert>\r\n\r\n\r\n-- \u8BE5\u4EE3\u7801\u65B9\u5F0F\uFF0C\u5C06\u4F20\u7EDF\u7684\r\n\r\nINSERT INTO `table1` (`field1`, `field2`) VALUES ("data1", "data2");\r\n\r\nINSERT INTO `table1` (`field1`, `field2`) VALUES ("data1", "data2");\r\n\r\n-- \u8F6C\u5316\u6210\r\n\r\nINSERT INTO `table1` (`field1`, `field2`) \r\n\r\nVALUES ("data1", "data2"),\r\n\r\n("data1", "data2");\r\n\r\n\r\n-- \u8017\u65F6\u957F\u539F\u56E0\r\n\r\n\u9ED8\u8BA4\u6267\u884C\u5668\u7C7B\u578B\u4E3ASimple\uFF0C\u4F1A\u4E3A\u6BCF\u4E2A\u8BED\u53E5\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u9884\u5904\u7406\u8BED\u53E5\uFF0C\u4E5F\u5C31\u662F\u521B\u5EFA\u4E00\u4E2APreparedStatement\u5BF9\u8C61\u3002\u5728\u6211\u4EEC\u7684\u9879\u76EE\u4E2D\uFF0C\u4F1A\u4E0D\u505C\u5730\u4F7F\u7528\u6279\u91CF\u63D2\u5165\u8FD9\u4E2A\u65B9\u6CD5\uFF0C\u800C\u56E0\u4E3AMyBatis\u5BF9\u4E8E\u542B\u6709<foreach>\u7684\u8BED\u53E5\uFF0C\u65E0\u6CD5\u91C7\u7528\u7F13\u5B58\uFF0C\u90A3\u4E48\u5728\u6BCF\u6B21\u8C03\u7528\u65B9\u6CD5\u65F6\uFF0C\u90FD\u4F1A\u91CD\u65B0\u89E3\u6790sql\u8BED\u53E5\u3002\r\n\n'})}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-sql",children:'\r\n-- \u66FF\u6362\u65B9\u6848\r\n\r\nhttp://www.mybatis.org/mybatis-dynamic-sql/docs/insert.html\uFF08Batch Insert Support\uFF09\r\n\r\n\r\n-- \u4EE3\u7801\u793A\u4F8B\r\n\r\nSqlSession session = sqlSessionFactory.openSession(ExecutorType.BATCH);\r\n\r\ntry {\r\n\r\n    SimpleTableMapper mapper = session.getMapper(SimpleTableMapper.class);\r\n\r\n    List<SimpleTableRecord> records = getRecordsToInsert(); // not shown\r\n\r\n    BatchInsert<SimpleTableRecord> batchInsert = insert(records)\r\n\r\n            .into(simpleTable)\r\n\r\n            .map(id).toProperty("id")\r\n\r\n            .map(firstName).toProperty("firstName")\r\n\r\n            .map(lastName).toProperty("lastName")\r\n\r\n            .map(birthDate).toProperty("birthDate")\r\n\r\n            .map(employed).toProperty("employed")\r\n\r\n            .map(occupation).toProperty("occupation")\r\n\r\n            .build()\r\n\r\n            .render(RenderingStrategy.MYBATIS3);\r\n\r\n    batchInsert.insertStatements().stream().forEach(mapper::insert);\r\n\r\n    session.commit();\r\n\r\n} finally {\r\n\r\n    session.close();\r\n\r\n}\r\n\r\n\r\n-- \u539F\u7406\r\n\r\n\u57FA\u672C\u601D\u60F3\u662F\u5C06MyBatis session\u7684executor type\u8BBE\u4E3A Batch\uFF0C\u7136\u540E\u591A\u6B21\u6267\u884C\u63D2\u5165\u8BED\u53E5\u3002\u5C31\u7C7B\u4F3C\u4E8EJDBC\u7684\u4E0B\u9762\u8BED\u53E5\u4E00\u6837\u3002\r\n\r\nConnection connection = DriverManager.getConnection("jdbc:mysql://127.0.0.1:3306/mydb?useUnicode=true&characterEncoding=UTF-8&useServerPrepStmts=false&rewriteBatchedStatements=true","root","root");\r\n\r\nconnection.setAutoCommit(false);\r\n\r\nPreparedStatement ps = connection.prepareStatement(\r\n\r\n        "insert into tb_user (name) values(?)");\r\n\r\nfor (int i = 0; i < stuNum; i++) {\r\n\r\n    ps.setString(1,name);\r\n\r\n    ps.addBatch();\r\n\r\n}\r\n\r\nps.executeBatch();\r\n\r\nconnection.commit();\r\n\r\nconnection.close();\r\n\n'})}),"\n",(0,l.jsx)(r.h3,{id:"\u65F6\u95F4\u5B57\u6BB5",children:"\u65F6\u95F4\u5B57\u6BB5"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-sql",children:"\r\nYEAR		YYYY				1901 ~ 2155										   1 \u4E2A\u5B57\u8282\r\n\r\nTIME		HH:MM:SS			-838:59:59 ~ 838:59:59								3 \u4E2A\u5B57\u8282\r\n\r\nDATE		YYYY-MM-DD			1000-01-01 ~ 9999-12-3								3 \u4E2A\u5B57\u8282\r\n\r\nDATETIME	YYYY-MM-DD HH:MM:SS	 1000-01-01 00:00:00 ~ 9999-12-31 23:59:59			   8 \u4E2A\u5B57\u8282\r\n\r\nTIMESTAMP	YYYY-MM-DD HH:MM:SS	 1980-01-01 00:00:01 UTC ~ 2040-01-19 03:14:07 UTC		4 \u4E2A\u5B57\u8282\r\n\n"})}),"\n",(0,l.jsx)(r.h3,{id:"\u56DE\u8868",children:"\u56DE\u8868"}),"\n",(0,l.jsx)(r.hr,{}),"\n",(0,l.jsx)(r.h3,{id:"leetcode",children:"LeetCode"}),"\n",(0,l.jsx)(r.h4,{id:"\u7B2C\u4E8C\u9AD8\u7684\u85AA\u6C34",children:(0,l.jsx)(r.a,{href:"https://leetcode.cn/problems/second-highest-salary/",children:"\u7B2C\u4E8C\u9AD8\u7684\u85AA\u6C34"})}),"\n",(0,l.jsxs)(r.blockquote,{children:["\n",(0,l.jsx)(r.p,{children:"\u6CA1\u6709\u7B2C\u4E8C\u9AD8\u7684\u6570\u636E\u7684\u60C5\u51B5\uFF0C\u600E\u4E48\u53BB\u8FD4\u56DENUll"}),"\n"]}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-mysql",children:"\r\nselect (select distinct salary from Employee order by salary desc limit 1 offset 1 ) as SecondHighestSalary;\r\n\n"})}),"\n",(0,l.jsx)(r.h4,{id:"\u7B2Cn\u9AD8\u7684\u85AA\u6C34",children:(0,l.jsx)(r.a,{href:"https://leetcode.cn/problems/nth-highest-salary/description/",children:"\u7B2CN\u9AD8\u7684\u85AA\u6C34"})}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-mysql",children:"\r\nCREATE FUNCTION getNthHighestSalary(N INT) RETURNS INT\r\n\r\nBEGIN\r\n\r\n  set N = N -1;\r\n\r\n  RETURN (\r\n\r\n      # Write your MySQL query statement below.\r\n\r\n       select (select distinct salary from Employee order by salary desc limit 1 offset N)\r\n\r\n  );\r\n\r\nEND\r\n\n"})}),"\n",(0,l.jsx)(r.h4,{id:"\u5206\u6570\u6392\u540D",children:(0,l.jsx)(r.a,{href:"https://leetcode.cn/problems/rank-scores/",children:"\u5206\u6570\u6392\u540D"})}),"\n",(0,l.jsxs)(r.blockquote,{children:["\n",(0,l.jsx)(r.p,{children:"\u4F7F\u7528\u5B50\u67E5\u8BE2"}),"\n"]}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-mysql",children:"\r\nselect a.score, (select count(distinct score) from Scores where score >= a.score) as 'rank' from Scores a order by a.score DESC\r\n\n"})}),"\n",(0,l.jsxs)(r.blockquote,{children:["\n",(0,l.jsxs)(r.p,{children:["\u4F7F\u7528",(0,l.jsx)(r.a,{href:"#DENSE_RANK",children:"DENSE_RANK"}),"\uFF08\u63A8\u8350\uFF09"]}),"\n"]}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-mysql",children:"\r\nSELECT S.score, DENSE_RANK() OVER (ORDER BY S.score DESC) AS 'rank' FROM Scores S;\r\n\n"})}),"\n",(0,l.jsxs)(r.blockquote,{children:["\n",(0,l.jsx)(r.p,{children:"\u4F7F\u7528INNER JOIN"}),"\n"]}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-mysql",children:"\r\nSELECT  S.score, COUNT(DISTINCT T.score) AS 'rank' FROM Scores S\r\n\r\nINNER JOIN Scores T ON S.score <= T.score\r\n\r\nGROUP BY S.id, S.score ORDER BY S.score DESC;\r\n\n"})})]})}function h(n={}){let{wrapper:r}={...(0,a.R)(),...n.components};return r?(0,l.jsx)(r,{...n,children:(0,l.jsx)(o,{...n})}):o(n)}},8453:(n,r,e)=>{e.d(r,{R:()=>t,x:()=>i});var s=e(6540);let l={},a=s.createContext(l);function t(n){let r=s.useContext(a);return s.useMemo(function(){return"function"==typeof n?n(r):{...r,...n}},[r,n])}function i(n){let r;return r=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:t(n.components),s.createElement(a.Provider,{value:r},n.children)}}}]);
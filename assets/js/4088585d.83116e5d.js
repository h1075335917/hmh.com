"use strict";(self.webpackChunkmhuahe_com=self.webpackChunkmhuahe_com||[]).push([[23],{9087:(n,r,e)=>{e.r(r),e.d(r,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>c});var s=e(4848),l=e(8453);const t={},a=void 0,i={id:"MySQL",title:"MySQL",description:"\u7b1b\u5361\u5c14\u79ef",source:"@site/docs/MySQL.md",sourceDirName:".",slug:"/MySQL",permalink:"/mhuahe.com/docs/MySQL",draft:!1,unlisted:!1,editUrl:"https://github.com/mhuahe/mhuahe.com/tree/master/docs/MySQL.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Linux",permalink:"/mhuahe.com/docs/Linux"},next:{title:"Nginx",permalink:"/mhuahe.com/docs/Nginx"}},d={},c=[{value:"\u7b1b\u5361\u5c14\u79ef",id:"\u7b1b\u5361\u5c14\u79ef",level:3},{value:"\u7b1b\u5361\u5c14\u79ef\u4ea7\u751f\u7684\u539f\u56e0",id:"\u7b1b\u5361\u5c14\u79ef\u4ea7\u751f\u7684\u539f\u56e0",level:4},{value:"\u7b1b\u5361\u5c14\u79ef\u7684\u5f71\u54cd",id:"\u7b1b\u5361\u5c14\u79ef\u7684\u5f71\u54cd",level:4},{value:"\u5e94\u5bf9\u7b56\u7565",id:"\u5e94\u5bf9\u7b56\u7565",level:4},{value:"\u5e38\u7528\u8bed\u53e5",id:"\u5e38\u7528\u8bed\u53e5",level:3},{value:"\u8868\u7ed3\u6784\u64cd\u4f5c",id:"\u8868\u7ed3\u6784\u64cd\u4f5c",level:4},{value:"GROUP BY",id:"group-by",level:4},{value:"concat",id:"concat",level:4},{value:"FIND_IN_SET",id:"find_in_set",level:4},{value:"UUID",id:"uuid",level:4},{value:"IF",id:"if",level:4},{value:"UNION",id:"union",level:4},{value:"PAD",id:"pad",level:4},{value:"choose when otherwise",id:"choose-when-otherwise",level:4},{value:"EXISTS",id:"exists",level:4},{value:"\uff1c![CDATA[ ]]",id:"cdata-",level:4},{value:"substring",id:"substring",level:4},{value:"any_value",id:"any_value",level:4},{value:"round",id:"round",level:4},{value:"case when then else end",id:"case-when-then-else-end",level:4},{value:"COALESCE",id:"coalesce",level:4},{value:"date_format",id:"date_format",level:4},{value:"DATEDIFF",id:"datediff",level:4},{value:"TIMESTAMPDIFF",id:"timestampdiff",level:4},{value:"day()  last_day()",id:"day--last_day",level:4},{value:"CAST",id:"cast",level:4},{value:"INSTR",id:"instr",level:4},{value:"PERIOD_DIFF",id:"period_diff",level:4},{value:"MOD",id:"mod",level:4},{value:"RIGHT",id:"right",level:4},{value:"REGEXP",id:"regexp",level:4},{value:"\u7a97\u53e3\u51fd\u6570\uff088.0\u7248\u672c\u524d\uff09",id:"\u7a97\u53e3\u51fd\u657080\u7248\u672c\u524d",level:4},{value:"DENSE_RANK",id:"dense_rank",level:6},{value:"\u5176\u5b83\u8bed\u53e5",id:"\u5176\u5b83\u8bed\u53e5",level:3},{value:"binlog",id:"binlog",level:4},{value:"\u7d22\u5f15",id:"\u7d22\u5f15",level:4},{value:"\u5b58\u50a8\u8fc7\u7a0b",id:"\u5b58\u50a8\u8fc7\u7a0b",level:4},{value:"\u6570\u636e\u6743\u9650",id:"\u6570\u636e\u6743\u9650",level:4},{value:"\u8d26\u53f7",id:"\u8d26\u53f7",level:4},{value:"\u5b57\u7b26\u96c6",id:"\u5b57\u7b26\u96c6",level:4},{value:"\u6279\u91cf\u63d2\u5165",id:"\u6279\u91cf\u63d2\u5165",level:3},{value:"\u65f6\u95f4\u5b57\u6bb5",id:"\u65f6\u95f4\u5b57\u6bb5",level:3},{value:"\u56de\u8868",id:"\u56de\u8868",level:3},{value:"LeetCode",id:"leetcode",level:3},{value:"\u7b2c\u4e8c\u9ad8\u7684\u85aa\u6c34",id:"\u7b2c\u4e8c\u9ad8\u7684\u85aa\u6c34",level:4},{value:"\u7b2cN\u9ad8\u7684\u85aa\u6c34",id:"\u7b2cn\u9ad8\u7684\u85aa\u6c34",level:4},{value:"\u5206\u6570\u6392\u540d",id:"\u5206\u6570\u6392\u540d",level:4}];function o(n){const r={a:"a",blockquote:"blockquote",code:"code",h3:"h3",h4:"h4",h6:"h6",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.h3,{id:"\u7b1b\u5361\u5c14\u79ef",children:"\u7b1b\u5361\u5c14\u79ef"}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"\u5728SQL\u4e2d\uff0c\u7b1b\u5361\u5c14\u79ef\uff08Cartesian Product\uff09\u662f\u6307\u4e24\u4e2a\u6216\u591a\u4e2a\u8868\u7684\u6bcf\u4e00\u884c\u4e0e\u53e6\u4e00\u4e2a\u8868\u7684\u6bcf\u4e00\u884c\u8fdb\u884c\u7ec4\u5408\u7684\u7ed3\u679c\u3002\u5f53\u6ca1\u6709\u4e3a\u8fde\u63a5\u64cd\u4f5c\u6307\u5b9a\u9002\u5f53\u7684\u6761\u4ef6\u65f6\uff0c\u5c31\u53ef\u80fd\u5bfc\u81f4\u7b1b\u5361\u5c14\u79ef\u3002"}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{src:"https://wikimedia.org/api/rest_v1/media/math/render/svg/b511477a8bb079f00e37db2d8205df2787a648ad",alt:"X x Y"})}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"eg\uff1a"}),"\n"]}),"\n",(0,s.jsx)(r.blockquote,{children:"\n"}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsxs)(r.p,{children:["\u5982\u679c\u96c6\u5408\ud835\udc4b\u662f13\u4e2a\u5143\u7d20\u7684\u70b9\u6570\u96c6\u5408",(0,s.jsx)(r.code,{children:"{\ud835\udc34,\ud835\udc3e,\ud835\udc44,\ud835\udc3d,10,9,8,7,6,5,4,3,2}"}),"\uff0c"]}),"\n"]}),"\n",(0,s.jsx)(r.blockquote,{children:"\n"}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsxs)(r.p,{children:["\u800c\u96c6\u5408\ud835\udc4c\u662f4\u4e2a\u5143\u7d20\u7684\u82b1\u8272\u96c6\u5408",(0,s.jsx)(r.code,{children:"{\u2660, \u2665, \u2666, \u2663}"}),"\uff0c"]}),"\n"]}),"\n",(0,s.jsx)(r.blockquote,{children:"\n"}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsxs)(r.p,{children:["\u5219\u8fd9\u4e24\u4e2a\u96c6\u5408\u7684\u7b1b\u5361\u513f\u79ef\u662f\u670952\u4e2a\u5143\u7d20\u7684\u6807\u51c6\u6251\u514b\u724c\u7684\u96c6\u5408",(0,s.jsx)(r.code,{children:"{(\ud835\udc34,\u2660),(\ud835\udc3e,\u2660),...,(2,\u2660),...,(\ud835\udc34,\u2663),...,(3,\u2663),(2,\u2663)}"}),"\u3002"]}),"\n"]}),"\n",(0,s.jsx)(r.h4,{id:"\u7b1b\u5361\u5c14\u79ef\u4ea7\u751f\u7684\u539f\u56e0",children:"\u7b1b\u5361\u5c14\u79ef\u4ea7\u751f\u7684\u539f\u56e0"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"\u672a\u4f7f\u7528JOIN\u6761\u4ef6"}),"\uff1a\u5f53\u67e5\u8be2\u4e2d\u6d89\u53ca\u4e24\u4e2a\u6216\u591a\u4e2a\u8868\uff0c\u4f46\u6ca1\u6709\u6307\u5b9a\u8fde\u63a5\u6761\u4ef6\u65f6\uff0c",(0,s.jsx)(r.a,{href:"https://cloud.baidu.com/solution/database.html",children:"\u6570\u636e\u5e93"}),"\u7cfb\u7edf\u4f1a\u9ed8\u8ba4\u6267\u884c\u7b1b\u5361\u5c14\u79ef\u64cd\u4f5c\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"\u9519\u8bef\u7684JOIN\u6761\u4ef6"}),"\uff1a\u6709\u65f6",(0,s.jsx)(r.a,{href:"https://cloud.baidu.com/product/xly.html",children:"\u5f00\u53d1\u8005"}),"\u53ef\u80fd\u9519\u8bef\u5730\u6307\u5b9a\u4e86JOIN\u6761\u4ef6\uff0c\u5bfc\u81f4\u539f\u672c\u4e0d\u76f8\u5173\u7684\u884c\u88ab\u9519\u8bef\u5730\u8fde\u63a5\u5728\u4e00\u8d77\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"\u9690\u5f0f\u8f6c\u6362"}),"\uff1a\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u53ef\u80fd\u4f1a\u81ea\u52a8\u6267\u884c\u9690\u5f0f\u8f6c\u6362\uff0c\u5bfc\u81f4\u7b1b\u5361\u5c14\u79ef\u7684\u4ea7\u751f\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h4,{id:"\u7b1b\u5361\u5c14\u79ef\u7684\u5f71\u54cd",children:"\u7b1b\u5361\u5c14\u79ef\u7684\u5f71\u54cd"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"\u6027\u80fd\u95ee\u9898"}),"\uff1a\u7b1b\u5361\u5c14\u79ef\u4f1a\u4ea7\u751f\u5927\u91cf\u4e0d\u5fc5\u8981\u7684\u6570\u636e\uff0c\u5bfc\u81f4\u67e5\u8be2\u6027\u80fd\u4e0b\u964d\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"\u6570\u636e\u5197\u4f59"}),"\uff1a\u8fd4\u56de\u7684\u7ed3\u679c\u96c6\u53ef\u80fd\u5305\u542b\u91cd\u590d\u7684\u884c\uff0c\u5bfc\u81f4\u6570\u636e\u5197\u4f59\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"\u903b\u8f91\u9519\u8bef"}),"\uff1a\u5f00\u53d1\u8005\u53ef\u80fd\u6ca1\u6709\u610f\u8bc6\u5230\u7b1b\u5361\u5c14\u79ef\u7684\u5b58\u5728\uff0c\u5bfc\u81f4\u67e5\u8be2\u7ed3\u679c\u4e0d\u7b26\u5408\u9884\u671f\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h4,{id:"\u5e94\u5bf9\u7b56\u7565",children:"\u5e94\u5bf9\u7b56\u7565"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"\u660e\u786e\u6307\u5b9aJOIN\u6761\u4ef6"}),"\uff1a\u5728\u4f7f\u7528JOIN\u64cd\u4f5c\u65f6\uff0c\u5e94\u59cb\u7ec8\u660e\u786e\u6307\u5b9a\u8fde\u63a5\u6761\u4ef6\uff0c\u907f\u514d\u4ea7\u751f\u7b1b\u5361\u5c14\u79ef\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"\u68c0\u67e5\u67e5\u8be2\u903b\u8f91"}),"\uff1a\u5728\u7f16\u5199\u590d\u6742\u67e5\u8be2\u65f6\uff0c\u8981\u4ed4\u7ec6\u68c0\u67e5\u8fde\u63a5\u548c\u8fc7\u6ee4\u6761\u4ef6\uff0c\u786e\u4fdd\u5b83\u4eec\u662f\u6b63\u786e\u7684\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"\u4f7f\u7528EXPLAIN\u8ba1\u5212"}),"\uff1a\u5229\u7528\u6570\u636e\u5e93\u7684EXPLAIN\u8ba1\u5212\u529f\u80fd\uff0c\u53ef\u4ee5\u67e5\u770b\u67e5\u8be2\u7684\u6267\u884c\u8ba1\u5212\uff0c\u4ece\u800c\u53d1\u73b0\u6f5c\u5728\u7684\u7b1b\u5361\u5c14\u79ef\u95ee\u9898\u3002\u4f8b\u5982\uff0c\u5728MySQL\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528",(0,s.jsx)(r.code,{children:"EXPLAIN SELECT ..."}),"\u6765\u67e5\u770b\u67e5\u8be2\u7684\u6267\u884c\u8ba1\u5212\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"\u4f18\u5316\u6570\u636e\u5e93\u8bbe\u8ba1"}),"\uff1a\u5408\u7406\u8bbe\u8ba1\u6570\u636e\u5e93\u8868\u7ed3\u6784\uff0c\u786e\u4fdd\u76f8\u5173\u6570\u636e\u8868\u901a\u8fc7\u5408\u9002\u7684\u952e\u8fdb\u884c\u5173\u8054\uff0c\u8fd9\u6837\u53ef\u4ee5\u964d\u4f4e\u56e0\u7b1b\u5361\u5c14\u79ef\u5bfc\u81f4\u7684\u95ee\u9898\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"\u9650\u5236\u7ed3\u679c\u96c6"}),"\uff1a\u4f7f\u7528",(0,s.jsx)(r.code,{children:"LIMIT"}),"\u5b50\u53e5\u9650\u5236\u8fd4\u56de\u7684\u6570\u636e\u91cf\uff0c\u4ee5\u51cf\u5c11\u4e0d\u5fc5\u8981\u7684\u8ba1\u7b97\u548c",(0,s.jsx)(r.a,{href:"https://cloud.baidu.com/product/dts.html",children:"\u6570\u636e\u4f20\u8f93"}),"\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"\u5b9a\u671f\u5ba1\u67e5\u67e5\u8be2\u6027\u80fd"}),"\uff1a\u5b9a\u671f\u5ba1\u67e5\u548c\u5206\u6790\u6570\u636e\u5e93\u67e5\u8be2\u6027\u80fd\uff0c\u53ca\u65f6\u53d1\u73b0\u548c\u89e3\u51b3\u6f5c\u5728\u7684\u7b1b\u5361\u5c14\u79ef\u95ee\u9898\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"\u63d0\u9ad8\u4ee3\u7801\u5ba1\u67e5\u8d28\u91cf"}),"\uff1a\u8fdb\u884c\u4e25\u683c\u7684\u4ee3\u7801\u5ba1\u67e5\uff0c\u786e\u4fddSQL\u67e5\u8be2\u903b\u8f91\u6b63\u786e\uff0c\u9632\u6b62\u4ea7\u751f\u4e0d\u5fc5\u8981\u7684\u7b1b\u5361\u5c14\u79ef\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"\u4f7f\u7528\u6570\u636e\u5e93\u5de5\u5177"}),"\uff1a\u5229\u7528\u6570\u636e\u5e93\u7ba1\u7406\u5de5\u5177\u548cIDE\u63d0\u4f9b\u7684\u4ee3\u7801\u63d0\u793a\u3001\u8bed\u6cd5\u9ad8\u4eae\u7b49\u529f\u80fd\uff0c\u63d0\u9ad8\u7f16\u5199\u67e5\u8be2\u8bed\u53e5\u7684\u51c6\u786e\u6027\u548c\u6548\u7387\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsxs)(r.strong,{children:["\u57f9\u8bad\u4e0e",(0,s.jsx)(r.a,{href:"https://cloud.baidu.com/product/doc.html",children:"\u6587\u6863"})]}),"\uff1a\u7ec4\u7ec7\u6570\u636e\u5e93\u76f8\u5173\u57f9\u8bad\uff0c\u63d0\u9ad8\u5f00\u53d1\u4eba\u5458\u5bf9\u7b1b\u5361\u5c14\u79ef\u7684\u8ba4\u8bc6\uff1b\u540c\u65f6\u7f16\u5199\u548c\u7ef4\u62a4\u6570\u636e\u5e93\u64cd\u4f5c\u6587\u6863\uff0c\u786e\u4fdd\u56e2\u961f\u6210\u5458\u9075\u5faa\u6700\u4f73\u5b9e\u8df5\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsx)(r.p,{children:"\u6d4b\u8bd5\u4e0e\u9a8c\u8bc1\uff1a\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u8fdb\u884c\u5145\u5206\u6d4b\u8bd5\uff0c\u9a8c\u8bc1\u67e5\u8be2\u7ed3\u679c\u7684\u6b63\u786e\u6027\uff1b\u540c\u65f6\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\u6301\u7eed\u76d1\u63a7\u6570\u636e\u5e93\u6027\u80fd\u6307\u6807\uff0c\u4ee5\u4fbf\u53ca\u65f6\u53d1\u73b0\u548c\u5904\u7406\u95ee\u9898\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"\u5e38\u7528\u8bed\u53e5",children:"\u5e38\u7528\u8bed\u53e5"}),"\n",(0,s.jsx)(r.h4,{id:"\u8868\u7ed3\u6784\u64cd\u4f5c",children:"\u8868\u7ed3\u6784\u64cd\u4f5c"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sql",children:"\r\n-- \u767b\u5f55mysql\r\n\r\nmysql -h host -u user -p database1\r\n\r\npassword\r\n\r\n-- \u67e5\u8be2\u7248\u672c\u53f7\u548c\u5f53\u524d\u65f6\u95f4\r\n\r\nSELECT VERSION(), CURRENT_DATE;\r\n\r\n-- \u5c55\u793a\u6240\u6709\u6570\u636e\u5e93\r\n\r\nSHOW DATABASES;\r\n\r\n-- \u5207\u6362/\u4f7f\u7528\u6570\u636e\u5e93\r\n\r\nuse database1;\r\n\r\n-- \u521b\u5efa\u6570\u636e\u5e93\r\n\r\ncreate database test1;\r\n\r\n-- \u5c55\u793a\u6570\u636e\u5e93\u6240\u6709\u8868\r\n\r\nshow tables;\r\n\r\n-- \u521b\u5efa\u8868\r\n\r\ncreate table test1 (id varchar(32),name varchar(32),age int(3),sex int(1),birth datetime);\r\n\r\n-- \u5220\u9664\u8868\r\n\r\ndrop table test1;\r\n\r\n-- \u67e5\u8be2\u8868\u7ed3\u6784\r\n\r\nDESCRIBE test1;\r\n\r\n\r\n-- \u8868\u4e2d\u63d2\u5165\u5b57\u6bb5\u5e76\u8bbe\u7f6e\u5907\u6ce8\r\n\r\nalter table `sys_depart` ADD `name` varchar(32) DEFAULT NULL COMMENT '\u6d4b\u8bd5b'\r\n\r\n-- \u63d2\u5165\u5b57\u6bb5\r\n\r\nalter table sys_cwzd ADD COLUMN name varchar(50)\r\n\r\n-- \u4fee\u6539\u5b57\u6bb5\r\n\r\nalter table emp modify ename varchar(20)\r\n\r\n-- \u5220\u9664\u8868\u5b57\u6bb5\r\n\r\nalter table emp drop column age\r\n\r\n-- \u5b57\u6bb5\u6539\u540d\r\n\r\nalter table emp change age age1 int(4)\r\n\r\n-- \u4fee\u6539\u8868\u540d\r\n\r\nalter table emp rename emp1\r\n\r\n-- \u8bbe\u7f6e\u5907\u6ce8\r\n\r\ncomment on column \u8868\u540d.\u5b57\u6bb5\u540d is '\u5907\u6ce8\u540d'\r\n\r\n-- \u4fee\u6539\u5b57\u6bb5\u9ed8\u8ba4\u503c\r\n\r\nalter TABLE \u8868\u540d ALTER COLUMN \u5b57\u6bb5\u540d set default \u9ed8\u8ba4\u503c\r\n\r\n-- \u5220\u9664\u7ea6\u675f\r\n\r\nALTER TABLE `sys_depart` MODIFY `b` varchar(32) DEFAULT NULL COMMENT '\u6d4b\u8bd5b';\r\n\n"})}),"\n",(0,s.jsx)(r.h4,{id:"group-by",children:"GROUP BY"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sql",children:"\r\n-- \u6309project_id\u5206\u7ec4\uff0c\u67e5\u8be2create_time\u6700\u5927\u7684\u4e00\u6761\u6570\u636e\u3002\u52a0limit\u624d\u4f1a\u5148\u6392\u5e8f\uff08\u6d3e\u751f\u7c7b\u95ee\u9898\uff09\r\n\r\nSELECT * FROM ( SELECT * FROM `pms_conference_info` ORDER BY create_time DESC LIMIT 100000000 ) AS pci GROUP BY pci.project_id\r\n\r\n-- \u6216\u8005(\u4f46\u662f\u4f3c\u4e4e\u8981\u5f71\u54cd\u6027\u80fd)\r\n\r\nSELECT * FROM ( SELECT * FROM `pms_conference_info` having 1 ORDER BY create_time DESC) AS pci GROUP BY pci.project_id\r\n\n"})}),"\n",(0,s.jsx)(r.h4,{id:"concat",children:"concat"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sql",children:"\r\n-- \u5b57\u7b26\u4e32\u8fde\u63a5\r\n\r\nconcat(str1,str2,...)\r\n\r\n-- 1-2\r\n\r\nselect CONCAT(1,'-','2') \r\n\n"})}),"\n",(0,s.jsx)(r.h4,{id:"find_in_set",children:"FIND_IN_SET"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sql",children:"\r\n-- \u7c7b\u4f3c\u4e8e id in('1','2','3')\r\n\r\nselect * from table where FIND_IN_SET(id, '1,2,3')\r\n\n"})}),"\n",(0,s.jsx)(r.h4,{id:"uuid",children:"UUID"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sql",children:"\r\n-- mysql UUID\r\n\r\nREPLACE(UUID(),'-','')\r\n\n"})}),"\n",(0,s.jsx)(r.h4,{id:"if",children:"IF"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sql",children:'\r\n-- IF\u8868\u8fbe\u5f0f\r\n\r\n\u5982\u679c expr1 \u662fTRUE,\u5219 IF()\u7684\u8fd4\u56de\u503c\u4e3aexpr2; \u5426\u5219\u8fd4\u56de\u503c\u5219\u4e3aexpr3\r\n\r\nif(sva=1,"\u7537","\u5973")\r\n\r\n\r\n-- IFNULL(expr1,expr2)\r\n\r\n\u5047\u5982expr1 \u4e0d\u4e3a NULL,\u5219 IFNULL()\u7684\u8fd4\u56de\u503c\u4e3aexpr1;\u5426\u5219\u5176\u8fd4\u56de\u503c\u4e3aexpr2\r\n\r\nIFNULL(1,0) = 1 ; IFNULL(NULL,10) = 10\r\n\r\n\r\n-- IF ELSE\u505a\u4e3a\u6d41\u7a0b\u63a7\u5236\u8bed\u53e5\u4f7f\u7528\r\n\r\n-- \u5f53IF\u4e2d\u6761\u4ef6search_condition\u6210\u7acb\u65f6\uff0c\u6267\u884cTHEN\u540e\u7684statement_list\u8bed\u53e5\uff0c\u5426\u5219\u5224\u65adELSEIF\u4e2d\u7684\u6761\u4ef6\r\n\r\nIF search_condition THEN   \r\n\r\n    statement_list    \r\n\r\n[ELSEIF search_condition THEN]    \r\n\r\n    statement_list ...    \r\n\r\n[ELSE   \r\n\r\n    statement_list]    \r\n\r\nEND IF\r\n\n'})}),"\n",(0,s.jsx)(r.h4,{id:"union",children:"UNION"}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"[!TIP]"}),"\n"]}),"\n",(0,s.jsx)(r.blockquote,{children:"\n"}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"UNION\u4e00\u5b9a\u8bb0\u5f97\u8981\u628a\u4e24\u8fb9\u5bf9\u5e94\u7684\u5b57\u6bb5\uff0c\u6309\u987a\u5e8f\u4e00\u4e00\u5bf9\u5e94\u4e0a\uff0c\u4e0d\u7136\u6570\u636e\u4f1a\u9519\u4e71"}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sql",children:'\r\n-- UNION\u64cd\u4f5c\u7b26\r\n\r\n\u4ece "Websites" \u548c "apps" \u8868\u4e2d\u9009\u53d6\u6240\u6709\u4e0d\u540c\u7684country\uff08\u53ea\u6709\u4e0d\u540c\u7684\u503c\uff09\r\n\r\nSELECT country FROM Websites\r\n\r\nUNION\r\n\r\nSELECT country FROM apps\r\n\r\nORDER BY country;\r\n\r\n\r\n-- UNION ALL\r\n\r\n\u4ece "Websites" \u548c "apps" \u8868\u4e2d\u9009\u53d6\u6240\u6709\u7684country\uff08\u4e5f\u6709\u91cd\u590d\u7684\u503c\uff09\r\n\r\nSELECT country FROM Websites\r\n\r\nUNION ALL\r\n\r\nSELECT country FROM apps\r\n\r\nORDER BY country;\r\n\r\n\r\n-- \u5e26\u6709 WHERE \u7684 SQL UNION ALL\r\n\r\n\u4ece "Websites" \u548c "apps" \u8868\u4e2d\u9009\u53d6\u6240\u6709\u7684\u4e2d\u56fd(CN)\u7684\u6570\u636e\uff08\u4e5f\u6709\u91cd\u590d\u7684\u503c\uff09\r\n\r\nSELECT country, name FROM Websites\r\n\r\nWHERE country=\'CN\'\r\n\r\nUNION ALL\r\n\r\nSELECT country, app_name FROM apps\r\n\r\nWHERE country=\'CN\'\r\n\r\nORDER BY country;\r\n\n'})}),"\n",(0,s.jsx)(r.h4,{id:"pad",children:"PAD"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sql",children:"\r\n-- \u524d\u9762\u8865\u96f6\r\n\r\nLPAD(str,len,padstr)\r\n\r\n-- \u7ed3\u679c\u4e3a 00000001\r\n\r\nselect LPAD(\u20181\u2019, 8, 0)\r\n\r\n\r\n-- \u540e\u9762\u8865\u96f6\r\n\r\nRPAD(str,len,padstr)\r\n\r\n-- \u7ed3\u679c\u4e3a10000000\r\n\r\nselect RPAD(\u20181\u2019, 8, 0)\r\n\n"})}),"\n",(0,s.jsx)(r.h4,{id:"choose-when-otherwise",children:"choose when otherwise"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-mysql",children:'\r\n-- choose\u6807\u7b7e\u662f\u6309\u987a\u5e8f\u5224\u65ad\u5176\u5185\u90e8when\u6807\u7b7e\u4e2d\u7684test\u6761\u4ef6\u51fa\u5426\u6210\u7acb\uff0c\u5982\u679c\u6709\u4e00\u4e2a\u6210\u7acb\uff0c\u5219 choose \u7ed3\u675f\u3002\r\n\r\n-- \u5f53 choose \u4e2d\u6240\u6709 when \u7684\u6761\u4ef6\u90fd\u4e0d\u6ee1\u5219\u65f6\uff0c\u5219\u6267\u884cotherwise \u4e2d\u7684sql\u3002\r\n\r\n-- \u7c7b\u4f3c\u4e8eJava \u7684 switch \u8bed\u53e5\uff0cchoose \u4e3a switch\uff0cwhen \u4e3a case\uff0cotherwise \u5219\u4e3a default\u3002\r\n\r\n< choose > \r\n\r\n\t< WHEN test = "condition.messageType != null and condition.messageType != \'\'" > \r\n\r\n\t\t\tAND a.message_type = #{condition.messageType}\r\n\r\n\t</ WHEN > \r\n\r\n\t< otherwise > \r\n\r\n\t\tAND a.message_type IN \r\n\r\n\t\t< foreach collection = "condition.messageTypes" item = "businessType" OPEN = "(" SEPARATOR = "," CLOSE = ")" > \r\n\r\n\t\t\t#{businessType}\r\n\r\n\t\t</ foreach > \r\n\r\n\t</ otherwise > \r\n\r\n</ choose > \r\n\n'})}),"\n",(0,s.jsx)(r.h4,{id:"exists",children:"EXISTS"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-mysql",children:"\r\n-- EXISTS\u6267\u884c\u987a\u5e8f\uff1a\r\n\r\n-- 1\u3001\u9996\u5148\u6267\u884c\u4e00\u6b21\u5916\u90e8\u67e5\u8be2\uff0c\u5e76\u7f13\u5b58\u7ed3\u679c\u96c6\uff0c\u5982 SELECT * FROM A\r\n\r\n-- 2\u3001\u904d\u5386\u5916\u90e8\u67e5\u8be2\u7ed3\u679c\u96c6\u7684\u6bcf\u4e00\u884c\u8bb0\u5f55R\uff0c\u4ee3\u5165\u5b50\u67e5\u8be2\u4e2d\u4f5c\u4e3a\u6761\u4ef6\u8fdb\u884c\u67e5\u8be2\uff0c\u5982 SELECT 1 FROM B WHERE B.id = A.id\r\n\r\n-- 3\u3001\u5982\u679c\u5b50\u67e5\u8be2\u6709\u8fd4\u56de\u7ed3\u679c\uff0c\u5219EXISTS\u5b50\u53e5\u8fd4\u56deTRUE\uff0c\u8fd9\u4e00\u884cR\u53ef\u4f5c\u4e3a\u5916\u90e8\u67e5\u8be2\u7684\u7ed3\u679c\u884c\uff0c\u5426\u5219\u4e0d\u80fd\u4f5c\u4e3a\u7ed3\u679c\r\n\r\n-- EXISTS\u4e3atrue\u4fdd\u7559\u5916\u67e5\u8be2\u7ed3\u679c\uff0c\u5426\u5219\u4e0d\u4fdd\u7559\u5916\u67e5\u8be2\u7ed3\u679c\r\n\r\nSELECT * FROM A WHERE EXISTS (SELECT 1 FROM B WHERE B.id = A.id); \r\n\n"})}),"\n",(0,s.jsx)(r.h4,{id:"cdata-",children:"\uff1c![CDATA[ ]]"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-mysql",children:'\r\n-- \uff1c![CDATA[ ]]\uff1e\r\n\r\n-- \u672f\u8bedCDATA\u6307\u7684\u662f\u4e0d\u5e94\u7531XML\u89e3\u6790\u5668\u8fdb\u884c\u89e3\u6790\u7684\u6587\u672c\u6570\u636e\uff08Unparsed Character Data\uff09\r\n\r\n-- \u7531\u4e8eXML\u6587\u4ef6\u5bf9\u4e8e\u5143\u7d20\u4e3a"<"\u548c"&"\u662f\u975e\u6cd5\u7684\uff0c\u4e0d\u7b26\u5408\u89c4\u5219\u3002\r\n\r\n-- "<"\u7684\u4ea7\u751f\u9519\u8bef\uff0c\u662f\u56e0\u4e3a\u89e3\u6790\u5668\u4f1a\u628a\u8be5\u5b57\u7b26\u89e3\u91ca\u4e3a\u65b0\u5143\u7d20\u7684\u5f00\u59cb\u3002\r\n\r\n-- "&"\u7684\u4ea7\u751f\u9519\u8bef\uff0c\u662f\u56e0\u4e3a\u89e3\u6790\u5668\u4f1a\u628a\u8be5\u5b57\u7b26\u89e3\u91ca\u4e3a\u5b57\u7b26\u5b9e\u4f53\u7684\u5f00\u59cb\u3002\r\n\r\n-- mapper\u6587\u4ef6\u4e2d\u5199sql\u8bed\u53e5\u65f6\uff0c\u9047\u5230\u7279\u6b8a\u5b57\u7b26\u65f6\uff0c\u5982\uff1a< \u7b49\uff0c\u5efa\u8bae\u4f7f\u7528<![CDATA[ ... ]]>\uff0c\u5c06\u5305\u88f9\u7684\u5185\u5bb9\u4e0d\u88ab\u89e3\u6790\u5668\u89e3\u6790\r\n\r\nselect area, operator from ip_address where INET_ATON(#{ip}) > ip_start_num \r\n\r\nand INET_ATON(#{ip})  <![CDATA[ < ]]>  ip_end_num\r\n\n'})}),"\n",(0,s.jsx)(r.h4,{id:"substring",children:"substring"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-mysql",children:"\r\n-- substring(string, position, length)\r\n\r\n\u7b2c\u4e00\u4e2a\u53c2\u6570string\u6307\u7684\u662f\u9700\u8981\u622a\u53d6\u7684\u539f\u5b57\u7b26\u4e32\u3002\r\n\r\n\u7b2c\u4e8c\u4e2a\u53c2\u6570position\u6307\u7684\u662f\u4ece\u54ea\u4e2a\u4f4d\u7f6e\u5f00\u59cb\u622a\u53d6\u5b50\u5b57\u7b26\u4e32\uff0c\u82e5position\u4e3a\u8d1f\u6570\u5219\u4ece\u53f3\u5f80\u5de6\u5f00\u59cb\u6570\u4f4d\u7f6e\u3002\r\n\r\n\u7b2c\u4e09\u4e2a\u53c2\u6570length\u6307\u7684\u662f\u9700\u8981\u622a\u53d6\u7684\u5b57\u7b26\u4e32\u957f\u5ea6\uff0c\u5982\u679c\u4e0d\u5199\uff0c\u5219\u9ed8\u8ba4\u622a\u53d6\u4eceposition\u5f00\u59cb\u5230\u6700\u540e\u4e00\u4f4d\u7684\u6240\u6709\u5b57\u7b26\u3002\r\n\r\n\u4f8b\uff1asubstring(\u2018pandas\u2019, length(pandas)-2, 2) \u7684\u7ed3\u679c\u4e3a \u2018da\u2019.\r\n\r\n\r\n-- substring(string from position for length)\r\n\r\n\u662f\u4e00\u79cd\u66f4\u52a0\u89c4\u8303\u7684\u5199\u6cd5\uff0c\u53c2\u6570\u542b\u4e49\u540c\u4e0a\u6240\u8ff0\u3002\r\n\r\n\u540c\u6837\uff0c\u8fd9\u91cc\u7684 for length\u53ef\u4ee5\u4e0d\u5199\uff0c\u9ed8\u8ba4\u4eceposition\u5f00\u59cb\u622a\u53d6\u5230\u6700\u540e\u4e00\u4e2a\u5b57\u7b26\u3002\r\n\r\n\u4f8b\uff1asubstring(\u2018pandas\u2019 from 4 for 2) \u7684\u7ed3\u679c\u4e3a \u2018da\u2019.\r\n\n"})}),"\n",(0,s.jsx)(r.h4,{id:"any_value",children:"any_value"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-mysql",children:"\r\n-- any_value()\r\n\r\n-- \u89e3\u51b3\uff1a\u6291\u5236ONLY_FULL_GROUP_BY\u503c\u88ab\u62d2\u7edd\uff0cany_value()\u4f1a\u9009\u62e9\u88ab\u5206\u5230\u540c\u4e00\u7ec4\u7684\u6570\u636e\u91cc\u7b2c\u4e00\u6761\u6570\u636e\u7684\u6307\u5b9a\u5217\u503c\u4f5c\u4e3a\u8fd4\u56de\u6570\u636e\u3002\r\n\r\n-- \u62a5\u9519\uff1aExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 'area.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by\r\n\r\n-- \u539f\u56e0\uff1aMySQL5.7\u4e4b\u540e\uff0csql_mode\u4e2dONLY_FULL_GROUP_BY\u6a21\u5f0f\u9ed8\u8ba4\u8bbe\u7f6e\u4e3a\u6253\u5f00\u72b6\u6001\u3002ONLY_FULL_GROUP_BY\u7684\u8bed\u4e49\u5c31\u662f\u786e\u5b9aselect target list\u4e2d\u7684\u6240\u6709\u5217\u7684\u503c\u90fd\u662f\u660e\u786e\u8bed\u4e49\uff0c\u7b80\u5355\u7684\u8bf4\u6765\uff0c\u5728\u6b64\u6a21\u5f0f\u4e0b\uff0ctarget list\u4e2d\u7684\u503c\u8981\u4e48\u662f\u6765\u81ea\u4e8e\u805a\u5408\u51fd\u6570\uff08sum\u3001avg\u3001max\u7b49\uff09\u7684\u7ed3\u679c\uff0c\u8981\u4e48\u662f\u6765\u81ea\u4e8egroup by list\u4e2d\u7684\u8868\u8fbe\u5f0f\u7684\u503c\u3002\r\n\n"})}),"\n",(0,s.jsx)(r.h4,{id:"round",children:"round"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-mysql",children:"\r\n-- round\u51fd\u6570\u7528\u4e8e\u6570\u636e\u7684\u56db\u820d\u4e94\u5165\uff0c\u5b83\u6709\u4e24\u79cd\u5f62\u5f0f\uff1a\r\n\r\n-- 1\u3001round(x,d)  \uff0cx\u6307\u8981\u5904\u7406\u7684\u6570\uff0cd\u662f\u6307\u4fdd\u7559\u51e0\u4f4d\u5c0f\u6570.\u8fd9\u91cc\u6709\u4e2a\u503c\u5f97\u6ce8\u610f\u7684\u5730\u65b9\u662f\uff0cd\u53ef\u4ee5\u662f\u8d1f\u6570\uff0c\u8fd9\u65f6\u662f\u6307\u5b9a\u5c0f\u6570\u70b9\u5de6\u8fb9\u7684d\u4f4d\u6574\u6570\u4f4d\u4e3a0,\u540c\u65f6\u5c0f\u6570\u4f4d\u5747\u4e3a0\uff1b\r\n\r\n-- \u5982round(112.3,-1)=110\r\n\r\n-- round(112.3,0)=112\r\n\r\n-- 2\u3001round(x)  ,\u5176\u5b9e\u5c31\u662fround(x,0),\u4e5f\u5c31\u662f\u9ed8\u8ba4d\u4e3a0\uff1b\r\n\n"})}),"\n",(0,s.jsx)(r.h4,{id:"case-when-then-else-end",children:"case when then else end"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-mysql",children:"\r\n-- case when then else end\r\n\r\n-- case\u5177\u6709\u4e24\u79cd\u683c\u5f0f\u3002\u7b80\u5355case\u51fd\u6570\u548ccase\u641c\u7d22\u51fd\u6570\u3002\r\n\r\n    -- \u7b80\u5355case\u51fd\u6570\r\n\r\n    case sex\r\n\r\n      when '1' then '\u7537'\r\n\r\n      when '2' then '\u5973\u2019\r\n\r\n      else '\u5176\u4ed6' end\r\n\r\n    -- case\u641c\u7d22\u51fd\u6570\r\n\r\n    case when sex = '1' then '\u7537'\r\n\r\n         when sex = '2' then '\u5973'\r\n\r\n         else '\u5176\u4ed6' end\r\n\n"})}),"\n",(0,s.jsx)(r.h4,{id:"coalesce",children:(0,s.jsx)(r.a,{href:"https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html#function_coalesce",children:"COALESCE"})}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"\u8fd4\u56de\u5217\u8868\u4e2d\u7b2c\u4e00\u4e2a\u5206\u5f00\u6570\u503c"}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-mysql",children:"\r\nSELECT COALESCE(NULL,1); -- 1\r\n\r\nSELECT COALESCE(NULL,NULL,NULL); -- NULL\r\n\n"})}),"\n",(0,s.jsx)(r.h4,{id:"date_format",children:"date_format"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sql",children:"\r\ndate_format(ii.issue_expire_date, '%Y%m%d')\r\n\n"})}),"\n",(0,s.jsx)(r.h4,{id:"datediff",children:"DATEDIFF"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-mysql",children:"\r\n-- DATEDIFF\u51fd\u6570\u7528\u4e8e\u8fd4\u56de\u4e24\u4e2a\u65e5\u671f\u7684\u5929\u6570\r\n\r\n-- DATEDIFF(date1,date2)\r\n\r\n-- date1: \u6bd4\u8f83\u65e5\u671f1 \r\n\r\n-- date2: \u6bd4\u8f83\u65e5\u671f2\r\n\r\n-- DATEDIFF\u51fd\u6570\u8fd4\u56dedate1 - date2\u7684\u8ba1\u7b97\u7ed3\u679c\uff0cdate1\u548cdate2\u4e24\u4e2a\u53c2\u6570\u9700\u662f\u6709\u6548\u7684\u65e5\u671f\u6216\u65e5\u671f\u65f6\u95f4\u503c;\u5982\u679c\u53c2\u6570\u4f20\u9012\u7684\u662f\u65e5\u671f\u65f6\u95f4\u503c\uff0cDATEDIFF\u51fd\u6570\u4ec5\u5c06\u65e5\u671f\u90e8\u5206\u7528\u4e8e\u8ba1\u7b97\uff0c\u5e76\u5ffd\u7565\u65f6\u95f4\u90e8\u5206(\u53ea\u6709\u503c\u7684\u65e5\u671f\u90e8\u5206\u53c2\u4e0e\u8ba1\u7b97)\r\n\r\n-- 1\r\n\r\nSELECT DATEDIFF('2022-04-30','2022-04-29');\r\n\r\n-- 0\r\n\r\nSELECT DATEDIFF('2022-04-30','2022-04-30');\r\n\r\n-- -1\r\n\r\nSELECT DATEDIFF('2022-04-29','2022-04-30');\r\n\r\n-- 0\r\n\r\nSELECT DATEDIFF('2022-04-30','2022-04-30 14:00:00');\r\n\r\n-- 1\r\n\r\nSELECT DATEDIFF('2022-04-30 13:00:00','2022-04-29 14:00:00');\r\n\r\n-- 10\r\n\r\nSELECT DATEDIFF('2017-06-25 09:34:21', '2017-06-15');\r\n\n"})}),"\n",(0,s.jsx)(r.h4,{id:"timestampdiff",children:"TIMESTAMPDIFF"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-mysql",children:"\r\n-- TIMESTAMPDIFF\u51fd\u6570\u7528\u4e8e\u8ba1\u7b97\u4e24\u4e2a\u65e5\u671f\u7684\u65f6\u95f4\u5dee\r\n\r\n-- TIMESTAMPDIFF(unit,datetime_expr1,datetime_expr2)\r\n\r\n-- unit: \u65e5\u671f\u6bd4\u8f83\u8fd4\u56de\u7684\u65f6\u95f4\u5dee\u5355\u4f4d\uff0c\u5e38\u7528\u53ef\u9009\u503c\u5982\u4e0b:\r\n\r\n    SECOND\uff1a\u79d2\r\n\r\n    MINUTE\uff1a\u5206\u949f\r\n\r\n    HOUR\uff1a\u5c0f\u65f6\r\n\r\n    DAY\uff1a\u5929\r\n\r\n    WEEK\uff1a\u661f\u671f\r\n\r\n    MONTH\uff1a\u6708\r\n\r\n    QUARTER\uff1a\u5b63\u5ea6\r\n\r\n    YEAR\uff1a\u5e74\r\n\r\n-- datetime_expr1: \u8981\u6bd4\u8f83\u7684\u65e5\u671f1\r\n\r\n-- datetime_expr2: \u8981\u6bd4\u8f83\u7684\u65e5\u671f2\r\n\r\n-- TIMESTAMPDIFF\u51fd\u6570\u8fd4\u56dedatetime_expr2 - datetime_expr1\u7684\u7ed3\u679c\r\n\r\n-- \u5176\u4e2ddatetime_expr1\u548cdatetime_expr2\u53ef\u4ee5\u662fDATE\u6216DATETIME\u7c7b\u578b\u503c\r\n\r\n-- \u76f8\u5dee\uff1a25\u79d2\r\n\r\nSELECT TIMESTAMPDIFF(SECOND,'2022-04-23 14:57:00','2022-04-23 14:57:25');\r\n\r\n-- \u76f8\u5dee\uff1a5\u5206\u949f\r\n\r\nSELECT TIMESTAMPDIFF(MINUTE,'2022-04-23 15:00:00','2022-04-23 15:05:00');\r\n\r\n-- \u76f8\u5dee\uff1a5\u5c0f\u65f6\r\n\r\nSELECT TIMESTAMPDIFF(HOUR,'2022-04-23 11:20:00', '2022-04-23 16:20:00');\r\n\r\n-- \u76f8\u5dee\uff1a2\u5929\r\n\r\nSELECT TIMESTAMPDIFF(DAY,'2022-04-23 11:20:00', '2022-04-25 11:20:00');\r\n\r\n-- \u76f8\u5dee\uff1a1\u661f\u671f\r\n\r\nSELECT TIMESTAMPDIFF(WEEK,'2022-04-23 11:20:00', '2022-04-30 11:20:00');\r\n\r\n-- \u76f8\u5dee\uff1a1\u6708\r\n\r\nSELECT TIMESTAMPDIFF(MONTH,'2022-04-23 11:20:00', '2022-05-30 11:20:00');\r\n\r\n-- \u76f8\u5dee\uff1a1\u5b63\u5ea6\r\n\r\nSELECT TIMESTAMPDIFF(QUARTER,'2022-04-23 11:20:00', '2022-07-23 11:20:00');\r\n\r\n-- \u76f8\u5dee\uff1a1\u5e74\r\n\r\nSELECT TIMESTAMPDIFF(YEAR,'2022-04-23 11:20:00', '2023-04-23 11:20:00');\r\n\n"})}),"\n",(0,s.jsx)(r.h4,{id:"day--last_day",children:"day()  last_day()"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-mysql",children:"\r\n-- day(date) : \u83b7\u53d6\u65e5\r\n\r\nSELECT DAY('2018-01-15'); -- 15\r\n\r\n\r\n-- last_day() : \u83b7\u53d6\u6700\u540e\u4e00\u5929\r\n\r\nselect LAST_DAY('2018-02-03'); -- 2018-02-28\r\n\r\n\r\n-- day(last_day())\uff1a \u83b7\u53d6\u67d0\u5e74\u67d0\u6708\u7684\u6700\u540e\u4e00\u5929\r\n\r\nSELECT DAY(LAST_DAY('2018-02-03')); --28\r\n\r\n\r\n-- \u52a0\u4e00\u4e2a\u6708\r\n\r\nselect ADDDATE(current_date,INTERVAL '1' MONTH)\r\n\r\n\r\n-- \u63d0\u53d6\u65e5\u671f\u7684\u5e74/\u6708/\u65e5\r\n\r\nselect YEAR (CURDATE()),MONTH(CURDATE()),DAYOFMONTH(CURDATE())\r\n\r\n\r\n-- \u65e5\u671f\u52a0\u4e00\u5929/\u4e00\u4e2a\u6708\r\n\r\nselect DATE_ADD(CURDATE(),INTERVAL 1 DAY/INTERVAL 1 MOUTH)\r\n\n"})}),"\n",(0,s.jsx)(r.h4,{id:"cast",children:"CAST"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-mysql",children:"\r\n-- CAST\u51fd\u6570\u7528\u4e8e\u5c06\u503c\u4ece\u4e00\u79cd\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u4e3a\u8868\u8fbe\u5f0f\u4e2d\u6307\u5b9a\u7684\u53e6\u4e00\u79cd\u6570\u636e\u7c7b\u578b\r\n\r\nCAST(value AS datatype)\r\n\r\n-- AS\u5173\u952e\u5b57\u7528\u4e8e\u5206\u9694\u4e24\u4e2a\u53c2\u6570\uff0c\u5728AS\u4e4b\u524dvalue\u7684\u662f\u8981\u5904\u7406\u7684\u6570\u636e\uff0c\u5728AS\u4e4b\u540edatatype\u7684\u662f\u8981\u8f6c\u6362\u7684\u6570\u636e\u7c7b\u578b\r\n\r\nDATE\t\t\u5c06value\u8f6c\u6362\u6210'YYYY-MM-DD'\u683c\u5f0f\r\n\r\nDATETIME\t\u5c06value\u8f6c\u6362\u6210'YYYY-MM-DD HH\uff1aMM\uff1aSS'\u683c\u5f0f\r\n\r\nTIME\t\t\u5c06value\u8f6c\u6362\u6210'HH\uff1aMM\uff1aSS'\u683c\u5f0f\r\n\r\nCHAR\t\t\u5c06value\u8f6c\u6362\u6210CHAR(\u56fa\u5b9a\u957f\u5ea6\u7684\u5b57\u7b26\u4e32)\u683c\u5f0f\r\n\r\nSIGNED\t\t\u5c06value\u8f6c\u6362\u6210INT(\u6709\u7b26\u53f7\u7684\u6574\u6570)\u683c\u5f0f\r\n\r\nUNSIGNED\t\u5c06value\u8f6c\u6362\u6210INT(\u65e0\u7b26\u53f7\u7684\u6574\u6570)\u683c\u5f0f\r\n\r\nDECIMAL\t\t\u5c06value\u8f6c\u6362\u6210FLOAT(\u6d6e\u70b9\u6570)\u683c\u5f0f \r\n\r\nBINARY\t\t\u5c06value\u8f6c\u6362\u6210\u4e8c\u8fdb\u5236\u683c\u5f0f\r\n\r\n\r\n-- DECIMAL(\u6570\u503c\u7cbe\u5ea6\uff0c\u5c0f\u6570\u70b9\u4fdd\u7559\u957f\u5ea6)\r\n\r\n-- DECIMAL(10,2)\u53ef\u4ee5\u5b58\u50a8\u6700\u591a\u5177\u67098\u4f4d\u6574\u6570\u548c2\u4f4d\u5c0f\u6570\u7684\u6570\u5b57\r\n\r\n-- 9.50\r\n\r\nSELECT CAST('9.5' AS DECIMAL(10,2));\r\n\r\n-- 99999999.99\r\n\r\nSELECT CAST('1234567890.123' AS DECIMAL(10,2));\r\n\r\n-- 220.232\r\n\r\nSELECT CAST('220.23211231' AS DECIMAL(10, 3));\r\n\r\n-- 220.232\r\n\r\nSELECT CAST(220.23211231 AS DECIMAL(10, 3));\r\n\r\n\r\n-- String\u8f6cdouble\uff0c\u5e76\u4fdd\u75592\u4f4d\r\n\r\nselect convert('111.11',decimal(10,2))\r\n\r\nselect cast(\"111.11\" as decimal(10,2))\r\n\r\n-- \u4fdd\u7559\u5c0f\u6570\u4f4d\u65702\u4f4d\r\n\r\nselect FORMAT(\"\",2)\r\n\n"})}),"\n",(0,s.jsx)(r.h4,{id:"instr",children:"INSTR"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-mysql",children:"\r\n-- INSTR(str,substr)\uff0c\u83b7\u53d6substr\u5728str\u7b2c\u4e00\u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0c\u5982\u679c\u6ca1\u6709\u627e\u5230\u5219\u8fd4\u56de0\r\n\r\nSELECT INSTR('111222','2') -- 4\r\n\n"})}),"\n",(0,s.jsx)(r.h4,{id:"period_diff",children:"PERIOD_DIFF"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-mysql",children:"\r\n-- PERIOD_DIFF()\u51fd\u6570\u8fd4\u56de\u4e24\u4e2a\u65f6\u95f4\u76f8\u5dee\u7684\u6708\u4efd\u6570,\u524d\u4e00\u4e2a\u65f6\u95f4\u51cf\u540e\u4e00\u4e2a\u65f6\u95f4\r\n\r\n-- PERIOD_DIFF(period1, period2)\r\n\r\nSELECT PERIOD_DIFF(201710, 201703); -- 7\r\n\n"})}),"\n",(0,s.jsx)(r.h4,{id:"mod",children:"MOD"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sql",children:"\r\n-- \u53d6\u6a21\r\n\r\nselect MOD(MONTH(CURDATE()), 12)\r\n\n"})}),"\n",(0,s.jsx)(r.h4,{id:"right",children:"RIGHT"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sql",children:"\r\n-- \u53d6\u53f3/\u5de64\u4f4d\r\n\r\nselect RIGHT(value,4)/left(value,4)\r\n\n"})}),"\n",(0,s.jsx)(r.h4,{id:"regexp",children:"REGEXP"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sql",children:"\r\n-- \u6b63\u5219\u8868\u8fbe\u5f0f\r\n\r\nREGEXP()/NOT REGEXP/RLIKE/NOT RLIKE\r\n\n"})}),"\n",(0,s.jsx)(r.h4,{id:"\u7a97\u53e3\u51fd\u657080\u7248\u672c\u524d",children:"\u7a97\u53e3\u51fd\u6570\uff088.0\u7248\u672c\u524d\uff09"}),"\n",(0,s.jsx)(r.h6,{id:"dense_rank",children:(0,s.jsx)(r.a,{href:"https://dev.mysql.com/doc/refman/8.0/en/window-function-descriptions.html#function_dense-rank",children:"DENSE_RANK"})}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"\u6392\u540d"}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"\u5176\u5b83\u8bed\u53e5",children:"\u5176\u5b83\u8bed\u53e5"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-mysql",children:"\r\n-- \u5220\u966430\u5929\u524d\u7684\u6570\u636e\r\n\r\nDELETE FROM ly_p12_multiple_log WHERE open_time < date_sub(curdate(),INTERVAL 30 DAY)\r\n\r\n\t\r\n-- \u83b7\u53d6\u67d0\u5929\u7684\u6bcf\u4e2a\u5c0f\u65f6\u7684\u6570\u636e\r\n\r\nSELECT HOUR( e.open_time ) AS HOUR,count( * ) AS Count \r\n\r\nFROM ly_p12_multiple e WHERE e.open_time between '2021-07-15 00' and '2021-07-16 00' \r\n\r\nGROUP BY HOUR ( e.open_time ) ORDER BY HOUR ( e.open_time )\r\n\r\n\r\n-- \u67d0\u5b57\u6bb5\u53bb\u91cd\r\n\r\ndelete from `sys_depart` where id not in (select t.max_id from (select max(id) as max_id from `sys_depart` t group by org_code) as t);\r\n\r\n\r\n-- \u53bb\u91cd\r\n\r\ndistinct\r\n\r\n\r\n-- \u67e5\u8be2\u6700\u5927\u503c\r\n\r\nselect MAX(value);\r\n\r\nselect * from a wher a.value = (select MAX(value));\r\n\r\nselect * from a order by desc limit 1;\r\n\r\n-- \u6309\u7ec4\u67e5\u8be2\u6700\u5927\u503c\r\n\r\nSELECT value1,MAX(value) FROM a GROUP BY a.value1\r\n\n"})}),"\n",(0,s.jsx)(r.h4,{id:"binlog",children:"binlog"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-mysql",children:"\r\n-- binlog\r\n\r\n-- \u83b7\u53d6binlog\u6587\u4ef6\u5217\u8868\r\n\r\nshow binary logs;\r\n\r\n-- \u6bcf\u5f53\u6211\u4eec\u505c\u6b62\u6216\u91cd\u542f\u670d\u52a1\u5668\u65f6\uff0c\u670d\u52a1\u5668\u4f1a\u628a\u65e5\u5fd7\u6587\u4ef6\u8bb0\u5165\u4e0b\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6\uff0cMySQL\u4f1a\u5728\u91cd\u542f\u65f6\u751f\u6210\u4e00\u4e2a\u65b0\u7684\u65e5\u5fd7\u6587\u4ef6\uff0c\u6587\u4ef6\u5e8f\u53f7\u9012\u589e\u3002\r\n\r\n-- \u5982\u679c\u65e5\u5fd7\u6587\u4ef6\u8d85\u8fc7max_binlog_size\uff08\u9ed8\u8ba4\u503c1G\uff09\u7cfb\u7edf\u53d8\u91cf\u914d\u7f6e\u7684\u4e0a\u9650\u65f6\uff0c\u4e5f\u4f1a\u751f\u6210\u65b0\u7684\u65e5\u5fd7\u6587\u4ef6\uff08\u5728\u8fd9\u91cc\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u4f60\u6b63\u4f7f\u7528\u5927\u7684\u4e8b\u52a1\uff0c\u4e8c\u8fdb\u5236\u65e5\u5fd7\u8fd8\u4f1a\u8d85\u8fc7max_binlog_size\uff0c\u4e0d\u4f1a\u751f\u6210\u65b0\u7684\u65e5\u5fd7\u6587\u4ef6\uff0c\u4e8b\u52a1\u5168\u5199\u5165\u4e00\u4e2a\u4e8c\u8fdb\u5236\u65e5\u5fd7\u4e2d,\u8fd9\u79cd\u60c5\u51b5\u4e3b\u8981\u662f\u4e3a\u4e86\u4fdd\u8bc1\u4e8b\u52a1\u7684\u5b8c\u6574\u6027\uff09\r\n\r\n-- \u65e5\u5fd7\u88ab\u5237\u65b0\u65f6\uff0c\u65b0\u751f\u6210\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6flush logs;\r\n\r\nshow binlog events in 'mysql-bin.000898';\r\n\r\nshow binlog events;\r\n\n"})}),"\n",(0,s.jsx)(r.h4,{id:"\u7d22\u5f15",children:"\u7d22\u5f15"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-mysql",children:"\r\n-- \u65b0\u5efa\u7d22\u5f15\r\n\r\n    -- 1.\u6dfb\u52a0primary key(\u4e3b\u952e\u7d22\u5f15)\r\n\r\n    alter   table  \u8868\u540d   add  primary   key(`\u5b57\u6bb5\u540d`);\r\n\r\n    -- 2.\u6dfb\u52a0unique(\u552f\u4e00\u7d22\u5f15)\r\n\r\n    alter  table  \u8868\u540d  add  unique(\u5217\u540d);\r\n\r\n    -- 3.\u6dfb\u52a0index(\u666e\u901a\u7d22\u5f15)\r\n\r\n    alter  table  \u8868\u540d  add  index  index_name(`\u5b57\u6bb5\u540d`);\r\n\r\n    -- 4.\u6dfb\u52a0fulltext(\u5168\u6587\u7d22\u5f15)\r\n\r\n    alter  table  \u8868\u540d  add  fulltext (`\u5b57\u6bb5\u540d`);\r\n\r\n    -- 5.\u6dfb\u52a0\u591a\u5217\u7d22\u5f15\r\n\r\n    alter  table  \u8868\u540d  add  index  index_name (`\u5b57\u6bb5\u540d1`\uff0c`\u5b57\u6bb5\u540d2`.......);\r\n\r\n-- \u5220\u9664\u7d22\u5f15\r\n\r\n\tDROP INDEX <\u7d22\u5f15\u540d> ON <\u8868\u540d>\r\n\n"})}),"\n",(0,s.jsx)(r.h4,{id:"\u5b58\u50a8\u8fc7\u7a0b",children:"\u5b58\u50a8\u8fc7\u7a0b"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-mysql",children:"\r\n###\u521b\u5efa\u5b58\u50a8\u8fc7\u7a0b\r\n\r\ncreate procedure update_user_times()\r\n\r\nbegin\r\n\r\nupdate sv_common_user set times_supplement = '5',surplus_times_supplement = '5';\r\n\r\nend;\r\n\r\n###\u521b\u5efa\u4efb\u52a1\r\n\r\ncreate event if not exists udpate_user \r\n\r\nON SCHEDULE\r\n\r\nEVERY 1 day\r\n\r\nSTARTS concat('2022-09-01',' 00:00:00')\r\n\r\non completion PRESERVE\r\n\r\ndo call update_user_times();\r\n\r\n### event_scheduler\u67e5\u8be2\u662f\u5426\u5f00\u542fevent\r\n\r\nshow variables like '%sche%';\r\n\r\n### \u5982\u679c\u6ca1\u5f00\u542f\uff0c\u5219\u6267\u884c\u8bed\u53e5\u5f00\u542f\r\n\r\nset global event_scheduler=1;\r\n\r\n#\u5173\u95ed\u4e8b\u4ef6\u4efb\u52a1\r\n\r\nalter event udpate_user ON COMPLETION PRESERVE DISABLE;\r\n\r\n#\u5f00\u542f\u4e8b\u4ef6\u4efb\u52a1\r\n\r\nalter event udpate_user ON COMPLETION PRESERVE ENABLE;\r\n\r\n#\u5220\u9664\u4e8b\u4ef6\r\n\r\ndrop event udpate_user;\r\n\r\n#\u5220\u9664\u5b58\u50a8\u8fc7\u7a0b\r\n\r\nDROP PROCEDURE update_user_times;\r\n\r\n#\u67e5\u8be2\u4e8b\u4ef6\u4fe1\u606f\r\n\r\nselect EVENT_NAME,EVENT_DEFINITION,STARTS,STATUS from information_schema.`EVENTS`\r\n\n"})}),"\n",(0,s.jsx)(r.h4,{id:"\u6570\u636e\u6743\u9650",children:"\u6570\u636e\u6743\u9650"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sql",children:"\r\n-- \u6388\u4e88\u64cd\u4f5c\u6743\u9650(\u5c06test\u6570\u636e\u5e93\u4e2d\u6240\u6709\u8868\u7684select\u548cinsert\u6743\u9650\u6388\u4e88test\u7528\u6237)\r\n\r\ngrant select,insert on test.* to 'test'@'localhost' identified by '123'\r\n\r\n\r\n-- \u67e5\u770b\u8d26\u53f7\u6743\u9650\r\n\r\nshow grants for 'test'@'localhost'\r\n\r\n\r\n-- \u6536\u56de\u64cd\u4f5c\u6743\u9650\r\n\r\nrevoke insert on test.* from 'test'@'localhost'\r\n\r\n\r\n-- \u6388\u4e88\u6240\u6709\u6570\u636e\u5e93\u7684\u6240\u6709\u6743\u9650\r\n\r\ngrant all privileges on *.* to 'test'@'localhost'\r\n\r\n\r\n-- \u6388\u4e88\u6240\u6709\u6570\u636e\u5e93\u7684\u6240\u6709\u6743\u9650(\u5305\u62ecgrant)\r\n\r\ngrant all privileges on *.* to 'test'@'localhost' with grant option\r\n\r\n\r\n-- \u6388\u4e88SUPER PROCESS FILE\u6743\u9650\uff08\u7cfb\u7edf\u6743\u9650\u4e0d\u80fd\u6307\u5b9a\u6570\u636e\u5e93\uff09\r\n\r\ngrant super,process,file on *.* to 'test'@'localhost'\r\n\r\n\r\n-- \u53ea\u6388\u4e88\u767b\u5f55\u6743\u9650\r\n\r\ngrant usage on *.* to 'test'@'localhost'\r\n\n"})}),"\n",(0,s.jsx)(r.h4,{id:"\u8d26\u53f7",children:"\u8d26\u53f7"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sql",children:"\r\n-- \u5220\u9664\u8d26\u53f7\r\n\r\ndrop user 'test'@'localhost'\r\n\r\n\r\n-- \u4fee\u6539\u81ea\u5df1\u7684\u5bc6\u7801\r\n\r\nset password = password('123')\r\n\r\n\r\n-- \u7ba1\u7406\u5458\u4fee\u6539\u4ed6\u4eba\u5bc6\u7801\r\n\r\nset password for 'test'@'localhost' = password('123')\r\n\n"})}),"\n",(0,s.jsx)(r.h4,{id:"\u5b57\u7b26\u96c6",children:"\u5b57\u7b26\u96c6"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sql",children:"\r\n-- \u67e5\u770b\u5b57\u7b26\u96c6\r\n\r\nshow variables like 'character%'\r\n\r\n\r\n-- \u521b\u5efa\u6570\u636e\u5e93\u65f6\u6307\u5b9a\u5b57\u7b26\u96c6\r\n\r\ncreate database test2 character set utf8\r\n\n"})}),"\n",(0,s.jsx)(r.h3,{id:"\u6279\u91cf\u63d2\u5165",children:"\u6279\u91cf\u63d2\u5165"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sql",children:'\r\n-- \u7ecf\u8fc7\u9879\u76ee\u5b9e\u8df5\u53d1\u73b0,\u5f53\u8868\u7684\u5217\u6570\u8f83\u591a\uff0820+\uff09,\u4ee5\u53ca\u4e00\u6b21\u6027\u63d2\u5165\u7684\u884c\u6570\u8f83\u591a\uff085000+\uff09,\u63d2\u5165\u7684\u8017\u65f6\u5341\u5206\u6f2b\u957f \r\n\r\n<insert id="batchInsert" parameterType="java.util.List">\r\n\r\n    insert into USER (id, name) values\r\n\r\n    <foreach collection="list" item="model" index="index" separator=","> \r\n\r\n        (#{model.id}, #{model.name})\r\n\r\n    </foreach>\r\n\r\n</insert>\r\n\r\n\r\n-- \u8be5\u4ee3\u7801\u65b9\u5f0f\uff0c\u5c06\u4f20\u7edf\u7684\r\n\r\nINSERT INTO `table1` (`field1`, `field2`) VALUES ("data1", "data2");\r\n\r\nINSERT INTO `table1` (`field1`, `field2`) VALUES ("data1", "data2");\r\n\r\n-- \u8f6c\u5316\u6210\r\n\r\nINSERT INTO `table1` (`field1`, `field2`) \r\n\r\nVALUES ("data1", "data2"),\r\n\r\n("data1", "data2");\r\n\r\n\r\n-- \u8017\u65f6\u957f\u539f\u56e0\r\n\r\n\u9ed8\u8ba4\u6267\u884c\u5668\u7c7b\u578b\u4e3aSimple\uff0c\u4f1a\u4e3a\u6bcf\u4e2a\u8bed\u53e5\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u9884\u5904\u7406\u8bed\u53e5\uff0c\u4e5f\u5c31\u662f\u521b\u5efa\u4e00\u4e2aPreparedStatement\u5bf9\u8c61\u3002\u5728\u6211\u4eec\u7684\u9879\u76ee\u4e2d\uff0c\u4f1a\u4e0d\u505c\u5730\u4f7f\u7528\u6279\u91cf\u63d2\u5165\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u800c\u56e0\u4e3aMyBatis\u5bf9\u4e8e\u542b\u6709<foreach>\u7684\u8bed\u53e5\uff0c\u65e0\u6cd5\u91c7\u7528\u7f13\u5b58\uff0c\u90a3\u4e48\u5728\u6bcf\u6b21\u8c03\u7528\u65b9\u6cd5\u65f6\uff0c\u90fd\u4f1a\u91cd\u65b0\u89e3\u6790sql\u8bed\u53e5\u3002\r\n\n'})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sql",children:'\r\n-- \u66ff\u6362\u65b9\u6848\r\n\r\nhttp://www.mybatis.org/mybatis-dynamic-sql/docs/insert.html\uff08Batch Insert Support\uff09\r\n\r\n\r\n-- \u4ee3\u7801\u793a\u4f8b\r\n\r\nSqlSession session = sqlSessionFactory.openSession(ExecutorType.BATCH);\r\n\r\ntry {\r\n\r\n    SimpleTableMapper mapper = session.getMapper(SimpleTableMapper.class);\r\n\r\n    List<SimpleTableRecord> records = getRecordsToInsert(); // not shown\r\n\r\n    BatchInsert<SimpleTableRecord> batchInsert = insert(records)\r\n\r\n            .into(simpleTable)\r\n\r\n            .map(id).toProperty("id")\r\n\r\n            .map(firstName).toProperty("firstName")\r\n\r\n            .map(lastName).toProperty("lastName")\r\n\r\n            .map(birthDate).toProperty("birthDate")\r\n\r\n            .map(employed).toProperty("employed")\r\n\r\n            .map(occupation).toProperty("occupation")\r\n\r\n            .build()\r\n\r\n            .render(RenderingStrategy.MYBATIS3);\r\n\r\n    batchInsert.insertStatements().stream().forEach(mapper::insert);\r\n\r\n    session.commit();\r\n\r\n} finally {\r\n\r\n    session.close();\r\n\r\n}\r\n\r\n\r\n-- \u539f\u7406\r\n\r\n\u57fa\u672c\u601d\u60f3\u662f\u5c06MyBatis session\u7684executor type\u8bbe\u4e3a Batch\uff0c\u7136\u540e\u591a\u6b21\u6267\u884c\u63d2\u5165\u8bed\u53e5\u3002\u5c31\u7c7b\u4f3c\u4e8eJDBC\u7684\u4e0b\u9762\u8bed\u53e5\u4e00\u6837\u3002\r\n\r\nConnection connection = DriverManager.getConnection("jdbc:mysql://127.0.0.1:3306/mydb?useUnicode=true&characterEncoding=UTF-8&useServerPrepStmts=false&rewriteBatchedStatements=true","root","root");\r\n\r\nconnection.setAutoCommit(false);\r\n\r\nPreparedStatement ps = connection.prepareStatement(\r\n\r\n        "insert into tb_user (name) values(?)");\r\n\r\nfor (int i = 0; i < stuNum; i++) {\r\n\r\n    ps.setString(1,name);\r\n\r\n    ps.addBatch();\r\n\r\n}\r\n\r\nps.executeBatch();\r\n\r\nconnection.commit();\r\n\r\nconnection.close();\r\n\n'})}),"\n",(0,s.jsx)(r.h3,{id:"\u65f6\u95f4\u5b57\u6bb5",children:"\u65f6\u95f4\u5b57\u6bb5"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sql",children:"\r\nYEAR\t\tYYYY\t\t\t\t1901 ~ 2155\t\t\t\t\t\t\t\t\t\t   1 \u4e2a\u5b57\u8282\r\n\r\nTIME\t\tHH:MM:SS\t\t\t-838:59:59 ~ 838:59:59\t\t\t\t\t\t\t\t3 \u4e2a\u5b57\u8282\r\n\r\nDATE\t\tYYYY-MM-DD\t\t\t1000-01-01 ~ 9999-12-3\t\t\t\t\t\t\t\t3 \u4e2a\u5b57\u8282\r\n\r\nDATETIME\tYYYY-MM-DD HH:MM:SS\t 1000-01-01 00:00:00 ~ 9999-12-31 23:59:59\t\t\t   8 \u4e2a\u5b57\u8282\r\n\r\nTIMESTAMP\tYYYY-MM-DD HH:MM:SS\t 1980-01-01 00:00:01 UTC ~ 2040-01-19 03:14:07 UTC\t\t4 \u4e2a\u5b57\u8282\r\n\n"})}),"\n",(0,s.jsx)(r.h3,{id:"\u56de\u8868",children:"\u56de\u8868"}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h3,{id:"leetcode",children:"LeetCode"}),"\n",(0,s.jsx)(r.h4,{id:"\u7b2c\u4e8c\u9ad8\u7684\u85aa\u6c34",children:(0,s.jsx)(r.a,{href:"https://leetcode.cn/problems/second-highest-salary/",children:"\u7b2c\u4e8c\u9ad8\u7684\u85aa\u6c34"})}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"\u6ca1\u6709\u7b2c\u4e8c\u9ad8\u7684\u6570\u636e\u7684\u60c5\u51b5\uff0c\u600e\u4e48\u53bb\u8fd4\u56deNUll"}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-mysql",children:"\r\nselect (select distinct salary from Employee order by salary desc limit 1 offset 1 ) as SecondHighestSalary;\r\n\n"})}),"\n",(0,s.jsx)(r.h4,{id:"\u7b2cn\u9ad8\u7684\u85aa\u6c34",children:(0,s.jsx)(r.a,{href:"https://leetcode.cn/problems/nth-highest-salary/description/",children:"\u7b2cN\u9ad8\u7684\u85aa\u6c34"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-mysql",children:"\r\nCREATE FUNCTION getNthHighestSalary(N INT) RETURNS INT\r\n\r\nBEGIN\r\n\r\n  set N = N -1;\r\n\r\n  RETURN (\r\n\r\n      # Write your MySQL query statement below.\r\n\r\n       select (select distinct salary from Employee order by salary desc limit 1 offset N)\r\n\r\n  );\r\n\r\nEND\r\n\n"})}),"\n",(0,s.jsx)(r.h4,{id:"\u5206\u6570\u6392\u540d",children:(0,s.jsx)(r.a,{href:"https://leetcode.cn/problems/rank-scores/",children:"\u5206\u6570\u6392\u540d"})}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"\u4f7f\u7528\u5b50\u67e5\u8be2"}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-mysql",children:"\r\nselect a.score, (select count(distinct score) from Scores where score >= a.score) as 'rank' from Scores a order by a.score DESC\r\n\n"})}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsxs)(r.p,{children:["\u4f7f\u7528",(0,s.jsx)(r.a,{href:"#DENSE_RANK",children:"DENSE_RANK"}),"\uff08\u63a8\u8350\uff09"]}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-mysql",children:"\r\nSELECT S.score, DENSE_RANK() OVER (ORDER BY S.score DESC) AS 'rank' FROM Scores S;\r\n\n"})}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"\u4f7f\u7528INNER JOIN"}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-mysql",children:"\r\nSELECT  S.score, COUNT(DISTINCT T.score) AS 'rank' FROM Scores S\r\n\r\nINNER JOIN Scores T ON S.score <= T.score\r\n\r\nGROUP BY S.id, S.score ORDER BY S.score DESC;\r\n\n"})})]})}function h(n={}){const{wrapper:r}={...(0,l.R)(),...n.components};return r?(0,s.jsx)(r,{...n,children:(0,s.jsx)(o,{...n})}):o(n)}},8453:(n,r,e)=>{e.d(r,{R:()=>a,x:()=>i});var s=e(6540);const l={},t=s.createContext(l);function a(n){const r=s.useContext(t);return s.useMemo((function(){return"function"==typeof n?n(r):{...r,...n}}),[r,n])}function i(n){let r;return r=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:a(n.components),s.createElement(t.Provider,{value:r},n.children)}}}]);
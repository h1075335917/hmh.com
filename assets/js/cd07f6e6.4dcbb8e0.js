"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9839],{2884:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>d,contentTitle:()=>a,default:()=>g,frontMatter:()=>i,metadata:()=>o,toc:()=>s});let o=JSON.parse('{"id":"java/JAVA-MongoDB","title":"JAVA-MongoDB","description":"\u6570\u636E\u5E93\u64CD\u4F5C","source":"@site/docs/java/JAVA-MongoDB.md","sourceDirName":"java","slug":"/java/JAVA-MongoDB","permalink":"/mhuahe.com/docs/java/JAVA-MongoDB","draft":false,"unlisted":false,"editUrl":"https://github.dev/mhuahe/mhuahe.com/blob/master-ts/docs/java/JAVA-MongoDB.md","tags":[],"version":"current","lastUpdatedBy":"heminhua","lastUpdatedAt":1725382806000,"frontMatter":{},"sidebar":"java","previous":{"title":"JAVA-Maven","permalink":"/mhuahe.com/docs/java/JAVA-Maven"},"next":{"title":"JAVA-MybatisPlus","permalink":"/mhuahe.com/docs/java/JAVA-MybatisPlus"}}');var t=r(4848),l=r(8453);let i={},a="JAVA-MongoDB",d={},s=[{value:"\u6570\u636E\u5E93\u64CD\u4F5C",id:"\u6570\u636E\u5E93\u64CD\u4F5C",level:4},{value:"\u96C6\u5408\u64CD\u4F5C",id:"\u96C6\u5408\u64CD\u4F5C",level:4},{value:"\u6587\u6863\u64CD\u4F5C",id:"\u6587\u6863\u64CD\u4F5C",level:4},{value:"\u5176\u4ED6\u64CD\u4F5C",id:"\u5176\u4ED6\u64CD\u4F5C",level:4},{value:"\u6B63\u5219\u8868\u8FBE\u5F0F",id:"\u6B63\u5219\u8868\u8FBE\u5F0F",level:4}];function c(n){let e={code:"code",h1:"h1",h4:"h4",header:"header",pre:"pre",...(0,l.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"java-mongodb",children:"JAVA-MongoDB"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:"-- \u4E0B\u8F7DMongoDB\u5B89\u88C5\u5305\uFF0C\u9009\u62E9Windows\u793E\u533A\u7248\u5B89\u88C5\uFF0C\u4E0B\u8F7D\u5730\u5740\uFF1A\r\nhttps://www.mongodb.com/download-center/community\r\n\r\n-- \u53D6\u6D88MongoDB Compass\u7684\u5B89\u88C5\u9009\u9879\uFF08\u4E0D\u53D6\u6D88\u5B89\u88C5\u6781\u6162\uFF09\uFF0C\u9700\u8981\u53EF\u81EA\u884C\u5B89\u88C5\r\n\r\n-- \u53CC\u51FBmongo.exe\u53EF\u4EE5\u8FD0\u884CMongoDB\u81EA\u5E26\u5BA2\u6237\u7AEF\uFF0C\u64CD\u4F5CMongoDB\r\n\r\n-- \u5982\u679C\u9700\u8981\u79FB\u9664MongoDB\u670D\u52A1\uFF0C\u53EA\u9700\u4F7F\u7528\u7BA1\u7406\u5458\u6743\u9650\u8FD0\u884Ccmd\u5DE5\u5177\uFF0C\u5E76\u8F93\u5165\u5982\u4E0B\u547D\u4EE4\r\nsc.exe delete MongoDB\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:'-- \u4E0B\u8F7D\u5730\u5740\r\nhttps://fastdl.mongodb.org/win32/mongodb-win32-x86_64-2008plus-ssl-3.2.21-signed.msi\r\n-- \u521B\u5EFA\u6587\u4EF6\r\n\u5728\u5B89\u88C5\u8DEF\u5F84\u4E0B\u521B\u5EFAdata\\db\u548Cdata\\log\u4E24\u4E2A\u6587\u4EF6\u5939\r\n-- \u5728\u5B89\u88C5\u8DEF\u5F84\u4E0B\u521B\u5EFAmongod.cfg\u914D\u7F6E\u6587\u4EF6\r\nsystemLog:\r\n    destination: file\r\n    path: D:\\developer\\env\\MongoDB\\data\\log\\mongod.log\r\nstorage:\r\n    dbPath: D:\\developer\\env\\MongoDB\\data\\db\r\n-- \u5B89\u88C5\u4E3A\u670D\u52A1\uFF08\u8FD0\u884C\u547D\u4EE4\u9700\u8981\u7528\u7BA1\u7406\u5458\u6743\u9650\uFF09\r\nD:\\developer\\env\\MongoDB\\bin\\mongod.exe --config "D:\\developer\\env\\MongoDB\\mongod.cfg" --install\r\n\r\n-- \u5BA2\u6237\u7AEF\r\nstudio 3T for MongoDB\n'})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:"-- \u5E38\u7528\u6CE8\u89E3\r\n@Document:\u6807\u793A\u6620\u5C04\u5230Mongodb\u6587\u6863\u4E0A\u7684\u9886\u57DF\u5BF9\u8C61\r\n@Id:\u6807\u793A\u67D0\u4E2A\u57DF\u4E3AID\u57DF\r\n@Indexed:\u6807\u793A\u67D0\u4E2A\u5B57\u6BB5\u4E3AMongodb\u7684\u7D22\u5F15\u5B57\u6BB5\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:"SQL\u6982\u5FF5		MongoDB\u6982\u5FF5		\u89E3\u91CA/\u8BF4\u660E\r\ndatabase		database		\u6570\u636E\u5E93\r\ntable			collection		\u6570\u636E\u5E93\u8868/\u96C6\u5408\r\nrow				document		\u6570\u636E\u8BB0\u5F55\u884C/\u6587\u6863\r\ncolumn			field			\u6570\u636E\u5B57\u6BB5/\u57DF\r\nindex			index			\u7D22\u5F15\r\nprimary key		primary key		\u4E3B\u952E,MongoDB\u81EA\u52A8\u5C06_id\u5B57\u6BB5\u8BBE\u7F6E\u4E3A\u4E3B\u952E\n"})}),"\n",(0,t.jsx)(e.h4,{id:"\u6570\u636E\u5E93\u64CD\u4F5C",children:"\u6570\u636E\u5E93\u64CD\u4F5C"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:'-- \u5C55\u793A\u6570\u636E\u5E93\r\nshow dbs\r\n-- \u5207\u6362\u6570\u636E\u5E93(\u521B\u5EFA\u6570\u636E\u5E93)\r\nuse test\r\n-- \u5220\u9664\u6570\u636E\u5E93\r\ndb.dropDatabase()\r\n-- \u63D2\u5165\u8868\u6570\u636E\uFF08\u65B0\u589E\u7B2C\u4E00\u6761\u6570\u636E\u65F6\u4F1A\u521B\u5EFA\u6570\u636E\u5E93\uFF09\r\ndb.article.insert({name:"MongoDB \u6559\u7A0B"})\r\n-- \u67E5\u8BE2\u8868\r\ndb.getCollection("article").find({})\n'})}),"\n",(0,t.jsx)(e.h4,{id:"\u96C6\u5408\u64CD\u4F5C",children:"\u96C6\u5408\u64CD\u4F5C"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:'-- \u521B\u5EFA\u96C6\u5408\r\ndb.createCollection("article")\r\n-- \u5C55\u793A\u96C6\u5408\r\nshow collections\r\n-- \u5220\u9664\u96C6\u5408\r\ndb.article.drop()\n'})}),"\n",(0,t.jsx)(e.h4,{id:"\u6587\u6863\u64CD\u4F5C",children:"\u6587\u6863\u64CD\u4F5C"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:'-- \u63D2\u5165\u6587\u6863\r\ndb.article.insert({\r\n    title: \'MongoDB \u6559\u7A0B\', \r\n    description: \'MongoDB \u662F\u4E00\u4E2A Nosql \u6570\u636E\u5E93\',\r\n    by: \'Andy\',\r\n    url: \'https://www.mongodb.com/\',\r\n    tags: [\'mongodb\', \'database\', \'NoSQL\'],\r\n    likes: 100\r\n})\r\n\r\n-- \u66F4\u65B0\u6587\u6863\r\ndb.collection.update(\r\n   <query>,\r\n   <update>,\r\n   {\r\n     multi: <boolean>\r\n   }\r\n)\r\n# query\uFF1A\u4FEE\u6539\u7684\u67E5\u8BE2\u6761\u4EF6\uFF0C\u7C7B\u4F3C\u4E8ESQL\u4E2D\u7684WHERE\u90E8\u5206\r\n# update\uFF1A\u66F4\u65B0\u5C5E\u6027\u7684\u64CD\u4F5C\u7B26\uFF0C\u7C7B\u4F3C\u4E0ESQL\u4E2D\u7684SET\u90E8\u5206\r\n# multi\uFF1A\u8BBE\u7F6E\u4E3Atrue\u65F6\u4F1A\u66F4\u65B0\u6240\u6709\u7B26\u5408\u6761\u4EF6\u7684\u6587\u6863\uFF0C\u9ED8\u8BA4\u4E3Afalse\u53EA\u66F4\u65B0\u627E\u5230\u7684\u7B2C\u4E00\u6761\r\n\u5982\uFF1Adb.article.update({\'title\':\'MongoDB \u6559\u7A0B\'},{$set:{\'title\':\'MongoDB\'}},{multi:true})\r\n\r\n-- \u4F7F\u7528save\u66F4\u65B0\u6587\u6863\uFF08\u5C06ObjectId\u4E3A5e9943661379a112845e4056\u7684\u6587\u6863\u7684title\u6539\u4E3AMongoDB \u6559\u7A0B\uFF09\r\ndb.article.save({\r\n    "_id" : ObjectId("5e9943661379a112845e4056"),\r\n    "title" : "MongoDB \u6559\u7A0B",\r\n    "description" : "MongoDB \u662F\u4E00\u4E2A Nosql \u6570\u636E\u5E93",\r\n    "by" : "Andy",\r\n    "url" : "https://www.mongodb.com/",\r\n    "tags" : [ \r\n        "mongodb", \r\n        "database", \r\n        "NoSQL"\r\n    ],\r\n    "likes" : 100.0\r\n})\r\n\r\n-- \u5220\u9664\u6587\u6863\r\ndb.collection.remove(\r\n   <query>,\r\n   {\r\n     justOne: <boolean>\r\n   }\r\n)\r\n# query\uFF1A\u5220\u9664\u7684\u67E5\u8BE2\u6761\u4EF6\uFF0C\u7C7B\u4F3C\u4E8ESQL\u4E2D\u7684WHERE\u90E8\u5206\r\n# justOne\uFF1A\u8BBE\u7F6E\u4E3Atrue\u53EA\u5220\u9664\u4E00\u6761\u8BB0\u5F55\uFF0C\u9ED8\u8BA4\u4E3Afalse\u5220\u9664\u6240\u6709\u8BB0\u5F55\r\n\u5982\uFF1Adb.article.remove({\'title\':\'MongoDB \u6559\u7A0B\'})\r\n\r\n-- \u67E5\u8BE2\u6587\u6863\r\ndb.collection.find(query, projection)\r\n# query\uFF1A\u67E5\u8BE2\u6761\u4EF6\uFF0C\u7C7B\u4F3C\u4E8ESQL\u4E2D\u7684WHERE\u90E8\u5206\r\n# projection\uFF1A\u53EF\u9009\uFF0C\u4F7F\u7528\u6295\u5F71\u64CD\u4F5C\u7B26\u6307\u5B9A\u8FD4\u56DE\u7684\u952E\r\n\r\n0\u3001\u6761\u4EF6\u64CD\u4F5C\u7B26\r\n\u7B49\u4E8E			{<key>:<value>}\r\n\u5C0F\u4E8E			{<key>:{$lt:<value>}\r\n\u5C0F\u4E8E\u6216\u7B49\u4E8E	  {<key>:{$lte:<value>}}\r\n\u5927\u4E8E			{<key>:{$gt:<value>}}\r\n\u5927\u4E8E\u6216\u7B49\u4E8E	  {<key>:{$gte:<value>}}\r\n\u4E0D\u7B49\u4E8E		    {<key>:{$ne:<value>}}\r\n\r\n1\u3001\u67E5\u8BE2article\u96C6\u5408\u4E2D\u7684\u6240\u6709\u6587\u6863\r\ndb.article.find()\r\n\r\n2\u3001\u6761\u4EF6\u67E5\u8BE2\uFF0C\u67E5\u8BE2title\u4E3AMongoDB \u6559\u7A0B\u7684\u6240\u6709\u6587\u6863\r\ndb.article.find({\'title\':\'MongoDB \u6559\u7A0B\'})\r\n\r\n3\u3001\u6761\u4EF6\u67E5\u8BE2\uFF0C\u67E5\u8BE2likes\u5927\u4E8E50\u7684\u6240\u6709\u6587\u6863\r\ndb.article.find({\'likes\':{$gt:50}})\r\n\r\n4\u3001\u6761\u4EF6\u67E5\u8BE2\uFF0C\u67E5\u8BE2title\u4E3AMongoDB \u6559\u7A0B\u5E76\u4E14by\u4E3AAndy\u7684\u6240\u6709\u6587\u6863\r\ndb.article.find({\'title\':\'MongoDB \u6559\u7A0B\',\'by\':\'Andy\'})\r\n\r\n5\u3001\u6761\u4EF6\u67E5\u8BE2\uFF0C\u67E5\u8BE2title\u4E3ARedis \u6559\u7A0B\u6216MongoDB \u6559\u7A0B\u7684\u6240\u6709\u6587\u6863\r\ndb.article.find({$or:[{"title":"Redis \u6559\u7A0B"},{"title": "MongoDB \u6559\u7A0B"}]})\r\n\r\n6\u3001\u67E5\u8BE2likes\u5927\u4E8E50\uFF0C\u5E76\u4E14title\u4E3ARedis \u6559\u7A0B\u6216\u8005"MongoDB \u6559\u7A0B\u7684\u6240\u6709\u6587\u6863\r\ndb.article.find({"likes": {$gt:50}, $or: [{"title": "Redis \u6559\u7A0B"},{"title": "MongoDB \u6559\u7A0B"}]})\n'})}),"\n",(0,t.jsx)(e.h4,{id:"\u5176\u4ED6\u64CD\u4F5C",children:"\u5176\u4ED6\u64CD\u4F5C"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:'-- Limit\u4E0ESkip\u64CD\u4F5C\r\n1\u3001\u53EA\u67E5\u8BE2article\u96C6\u5408\u4E2D\u76842\u6761\u6570\u636E\r\ndb.article.find().limit(2)\r\n\r\n2\u3001\u4ECE\u7B2C\u4E8C\u6761\u5F00\u59CB\uFF0C\u67E5\u8BE2article\u96C6\u5408\u4E2D\u76842\u6761\u6570\u636E\r\ndb.article.find().limit(2).skip(1)\r\n\r\n-- \u6392\u5E8F\uFF081\u4E3A\u5347\u5E8F\uFF0C-1\u4E3A\u964D\u5E8F\uFF09\r\n1\u3001\u6309article\u96C6\u5408\u4E2D\u6587\u6863\u7684likes\u5B57\u6BB5\u964D\u5E8F\u6392\u5217\r\ndb.article.find().sort({likes:-1})\r\n\r\n-- \u7D22\u5F15\r\ndb.collection.createIndex(keys, options)\r\n# background\uFF1A\u5EFA\u7D22\u5F15\u8FC7\u7A0B\u4F1A\u963B\u585E\u5176\u5B83\u6570\u636E\u5E93\u64CD\u4F5C\uFF0C\u8BBE\u7F6E\u4E3Atrue\u8868\u793A\u540E\u53F0\u521B\u5EFA\uFF0C\u9ED8\u8BA4\u4E3Afalse\r\n# unique\uFF1A\u8BBE\u7F6E\u4E3Atrue\u8868\u793A\u521B\u5EFA\u552F\u4E00\u7D22\u5F15\r\n# name\uFF1A\u6307\u5B9A\u7D22\u5F15\u540D\u79F0\uFF0C\u5982\u679C\u6CA1\u6709\u6307\u5B9A\u4F1A\u81EA\u52A8\u751F\u6210\r\n\r\n1\u3001\u7ED9title\u548Cdescription\u5B57\u6BB5\u521B\u5EFA\u7D22\u5F15\uFF0C1\u8868\u793A\u5347\u5E8F\u7D22\u5F15\uFF0C-1\u8868\u793A\u964D\u5E8F\u7D22\u5F15\uFF0C\u6307\u5B9A\u4EE5\u540E\u53F0\u65B9\u5F0F\u521B\u5EFA\r\ndb.article.createIndex({"title":1,"description":-1}, {background: true})\r\n\r\n2\u3001\u67E5\u770Barticle\u96C6\u5408\u4E2D\u5DF2\u7ECF\u521B\u5EFA\u7684\u7D22\u5F15\r\ndb.article.getIndexes()\r\n\r\n-- \u805A\u5408\r\n$sum	\u8BA1\u7B97\u603B\u548C\r\n$avg	\u8BA1\u7B97\u5E73\u5747\u503C\r\n$min	\u8BA1\u7B97\u6700\u5C0F\u503C\r\n$max	\u8BA1\u7B97\u6700\u5927\u503C\r\n1\u3001\u6839\u636Eby\u5B57\u6BB5\u805A\u5408\u6587\u6863\u5E76\u8BA1\u7B97\u6587\u6863\u6570\u91CF\uFF0C\u7C7B\u4F3C\u4E0ESQL\u4E2D\u7684count()\u51FD\u6570\r\ndb.article.aggregate([{$group : {_id : "$by", sum_count : {$sum : 1}}}])\r\n\r\n2\u3001\u6839\u636Eby\u5B57\u6BB5\u805A\u5408\u6587\u6863\u5E76\u8BA1\u7B97likes\u5B57\u6BB5\u7684\u5E73\u5C40\u503C\uFF0C\u7C7B\u4F3C\u4E0ESQL\u4E2D\u7684avg()\u8BED\u53E5\r\ndb.article.aggregate([{$group : {_id : "$by", avg_likes : {$avg : "$likes"}}}])\n'})}),"\n",(0,t.jsx)(e.h4,{id:"\u6B63\u5219\u8868\u8FBE\u5F0F",children:"\u6B63\u5219\u8868\u8FBE\u5F0F"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:'-- MongoDB\u4F7F\u7528$regex\u64CD\u4F5C\u7B26\u6765\u8BBE\u7F6E\u5339\u914D\u5B57\u7B26\u4E32\u7684\u6B63\u5219\u8868\u8FBE\u5F0F\uFF0C\u53EF\u4EE5\u7528\u6765\u6A21\u7CCA\u67E5\u8BE2\uFF0C\u7C7B\u4F3C\u4E8ESQL\u4E2D\u7684like\u64CD\u4F5C\r\n1\u3001\u67E5\u8BE2title\u4E2D\u5305\u542B\u6559\u7A0B\u7684\u6587\u6863\r\ndb.article.find({title:{$regex:"\u6559\u7A0B"}})\r\n\r\n2\u3001\u4E0D\u533A\u5206\u5927\u5C0F\u5199\u7684\u6A21\u7CCA\u67E5\u8BE2\uFF0C\u4F7F\u7528$options\u64CD\u4F5C\u7B26\r\ndb.article.find({title:{$regex:"mongodb",$options:"$i"}})\n'})})]})}function g(n={}){let{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(c,{...n})}):c(n)}},8453:(n,e,r)=>{r.d(e,{R:()=>i,x:()=>a});var o=r(6540);let t={},l=o.createContext(t);function i(n){let e=o.useContext(l);return o.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:i(n.components),o.createElement(l.Provider,{value:e},n.children)}}}]);
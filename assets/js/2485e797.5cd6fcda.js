"use strict";(self.webpackChunkmhuahe_com=self.webpackChunkmhuahe_com||[]).push([[5088],{7302:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>a,contentTitle:()=>l,default:()=>g,frontMatter:()=>i,metadata:()=>d,toc:()=>s});var t=r(4848),o=r(8453);const i={},l="JAVA-MongoDB",d={id:"JAVA-MongoDB",title:"JAVA-MongoDB",description:"\u6570\u636e\u5e93\u64cd\u4f5c",source:"@site/docs/JAVA-MongoDB.md",sourceDirName:".",slug:"/JAVA-MongoDB",permalink:"/mhuahe.com/docs/JAVA-MongoDB",draft:!1,unlisted:!1,editUrl:"https://github.com/mhuahe/mhuahe.com/tree/master/docs/JAVA-MongoDB.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"JAVA-Maven",permalink:"/mhuahe.com/docs/JAVA-Maven"},next:{title:"JAVA-MybatisPlus",permalink:"/mhuahe.com/docs/JAVA-MybatisPlus"}},a={},s=[{value:"\u6570\u636e\u5e93\u64cd\u4f5c",id:"\u6570\u636e\u5e93\u64cd\u4f5c",level:4},{value:"\u96c6\u5408\u64cd\u4f5c",id:"\u96c6\u5408\u64cd\u4f5c",level:4},{value:"\u6587\u6863\u64cd\u4f5c",id:"\u6587\u6863\u64cd\u4f5c",level:4},{value:"\u5176\u4ed6\u64cd\u4f5c",id:"\u5176\u4ed6\u64cd\u4f5c",level:4},{value:"\u6b63\u5219\u8868\u8fbe\u5f0f",id:"\u6b63\u5219\u8868\u8fbe\u5f0f",level:4}];function c(n){const e={code:"code",h1:"h1",h4:"h4",header:"header",pre:"pre",...(0,o.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"java-mongodb",children:"JAVA-MongoDB"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:"-- \u4e0b\u8f7dMongoDB\u5b89\u88c5\u5305\uff0c\u9009\u62e9Windows\u793e\u533a\u7248\u5b89\u88c5\uff0c\u4e0b\u8f7d\u5730\u5740\uff1a\r\nhttps://www.mongodb.com/download-center/community\r\n\r\n-- \u53d6\u6d88MongoDB Compass\u7684\u5b89\u88c5\u9009\u9879\uff08\u4e0d\u53d6\u6d88\u5b89\u88c5\u6781\u6162\uff09\uff0c\u9700\u8981\u53ef\u81ea\u884c\u5b89\u88c5\r\n\r\n-- \u53cc\u51fbmongo.exe\u53ef\u4ee5\u8fd0\u884cMongoDB\u81ea\u5e26\u5ba2\u6237\u7aef\uff0c\u64cd\u4f5cMongoDB\r\n\r\n-- \u5982\u679c\u9700\u8981\u79fb\u9664MongoDB\u670d\u52a1\uff0c\u53ea\u9700\u4f7f\u7528\u7ba1\u7406\u5458\u6743\u9650\u8fd0\u884ccmd\u5de5\u5177\uff0c\u5e76\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\r\nsc.exe delete MongoDB\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:'-- \u4e0b\u8f7d\u5730\u5740\r\nhttps://fastdl.mongodb.org/win32/mongodb-win32-x86_64-2008plus-ssl-3.2.21-signed.msi\r\n-- \u521b\u5efa\u6587\u4ef6\r\n\u5728\u5b89\u88c5\u8def\u5f84\u4e0b\u521b\u5efadata\\db\u548cdata\\log\u4e24\u4e2a\u6587\u4ef6\u5939\r\n-- \u5728\u5b89\u88c5\u8def\u5f84\u4e0b\u521b\u5efamongod.cfg\u914d\u7f6e\u6587\u4ef6\r\nsystemLog:\r\n    destination: file\r\n    path: D:\\developer\\env\\MongoDB\\data\\log\\mongod.log\r\nstorage:\r\n    dbPath: D:\\developer\\env\\MongoDB\\data\\db\r\n-- \u5b89\u88c5\u4e3a\u670d\u52a1\uff08\u8fd0\u884c\u547d\u4ee4\u9700\u8981\u7528\u7ba1\u7406\u5458\u6743\u9650\uff09\r\nD:\\developer\\env\\MongoDB\\bin\\mongod.exe --config "D:\\developer\\env\\MongoDB\\mongod.cfg" --install\r\n\r\n-- \u5ba2\u6237\u7aef\r\nstudio 3T for MongoDB\n'})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:"-- \u5e38\u7528\u6ce8\u89e3\r\n@Document:\u6807\u793a\u6620\u5c04\u5230Mongodb\u6587\u6863\u4e0a\u7684\u9886\u57df\u5bf9\u8c61\r\n@Id:\u6807\u793a\u67d0\u4e2a\u57df\u4e3aID\u57df\r\n@Indexed:\u6807\u793a\u67d0\u4e2a\u5b57\u6bb5\u4e3aMongodb\u7684\u7d22\u5f15\u5b57\u6bb5\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:"SQL\u6982\u5ff5\t\tMongoDB\u6982\u5ff5\t\t\u89e3\u91ca/\u8bf4\u660e\r\ndatabase\t\tdatabase\t\t\u6570\u636e\u5e93\r\ntable\t\t\tcollection\t\t\u6570\u636e\u5e93\u8868/\u96c6\u5408\r\nrow\t\t\t\tdocument\t\t\u6570\u636e\u8bb0\u5f55\u884c/\u6587\u6863\r\ncolumn\t\t\tfield\t\t\t\u6570\u636e\u5b57\u6bb5/\u57df\r\nindex\t\t\tindex\t\t\t\u7d22\u5f15\r\nprimary key\t\tprimary key\t\t\u4e3b\u952e,MongoDB\u81ea\u52a8\u5c06_id\u5b57\u6bb5\u8bbe\u7f6e\u4e3a\u4e3b\u952e\n"})}),"\n",(0,t.jsx)(e.h4,{id:"\u6570\u636e\u5e93\u64cd\u4f5c",children:"\u6570\u636e\u5e93\u64cd\u4f5c"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:'-- \u5c55\u793a\u6570\u636e\u5e93\r\nshow dbs\r\n-- \u5207\u6362\u6570\u636e\u5e93(\u521b\u5efa\u6570\u636e\u5e93)\r\nuse test\r\n-- \u5220\u9664\u6570\u636e\u5e93\r\ndb.dropDatabase()\r\n-- \u63d2\u5165\u8868\u6570\u636e\uff08\u65b0\u589e\u7b2c\u4e00\u6761\u6570\u636e\u65f6\u4f1a\u521b\u5efa\u6570\u636e\u5e93\uff09\r\ndb.article.insert({name:"MongoDB \u6559\u7a0b"})\r\n-- \u67e5\u8be2\u8868\r\ndb.getCollection("article").find({})\n'})}),"\n",(0,t.jsx)(e.h4,{id:"\u96c6\u5408\u64cd\u4f5c",children:"\u96c6\u5408\u64cd\u4f5c"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:'-- \u521b\u5efa\u96c6\u5408\r\ndb.createCollection("article")\r\n-- \u5c55\u793a\u96c6\u5408\r\nshow collections\r\n-- \u5220\u9664\u96c6\u5408\r\ndb.article.drop()\n'})}),"\n",(0,t.jsx)(e.h4,{id:"\u6587\u6863\u64cd\u4f5c",children:"\u6587\u6863\u64cd\u4f5c"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:'-- \u63d2\u5165\u6587\u6863\r\ndb.article.insert({\r\n    title: \'MongoDB \u6559\u7a0b\', \r\n    description: \'MongoDB \u662f\u4e00\u4e2a Nosql \u6570\u636e\u5e93\',\r\n    by: \'Andy\',\r\n    url: \'https://www.mongodb.com/\',\r\n    tags: [\'mongodb\', \'database\', \'NoSQL\'],\r\n    likes: 100\r\n})\r\n\r\n-- \u66f4\u65b0\u6587\u6863\r\ndb.collection.update(\r\n   <query>,\r\n   <update>,\r\n   {\r\n     multi: <boolean>\r\n   }\r\n)\r\n# query\uff1a\u4fee\u6539\u7684\u67e5\u8be2\u6761\u4ef6\uff0c\u7c7b\u4f3c\u4e8eSQL\u4e2d\u7684WHERE\u90e8\u5206\r\n# update\uff1a\u66f4\u65b0\u5c5e\u6027\u7684\u64cd\u4f5c\u7b26\uff0c\u7c7b\u4f3c\u4e0eSQL\u4e2d\u7684SET\u90e8\u5206\r\n# multi\uff1a\u8bbe\u7f6e\u4e3atrue\u65f6\u4f1a\u66f4\u65b0\u6240\u6709\u7b26\u5408\u6761\u4ef6\u7684\u6587\u6863\uff0c\u9ed8\u8ba4\u4e3afalse\u53ea\u66f4\u65b0\u627e\u5230\u7684\u7b2c\u4e00\u6761\r\n\u5982\uff1adb.article.update({\'title\':\'MongoDB \u6559\u7a0b\'},{$set:{\'title\':\'MongoDB\'}},{multi:true})\r\n\r\n-- \u4f7f\u7528save\u66f4\u65b0\u6587\u6863\uff08\u5c06ObjectId\u4e3a5e9943661379a112845e4056\u7684\u6587\u6863\u7684title\u6539\u4e3aMongoDB \u6559\u7a0b\uff09\r\ndb.article.save({\r\n    "_id" : ObjectId("5e9943661379a112845e4056"),\r\n    "title" : "MongoDB \u6559\u7a0b",\r\n    "description" : "MongoDB \u662f\u4e00\u4e2a Nosql \u6570\u636e\u5e93",\r\n    "by" : "Andy",\r\n    "url" : "https://www.mongodb.com/",\r\n    "tags" : [ \r\n        "mongodb", \r\n        "database", \r\n        "NoSQL"\r\n    ],\r\n    "likes" : 100.0\r\n})\r\n\r\n-- \u5220\u9664\u6587\u6863\r\ndb.collection.remove(\r\n   <query>,\r\n   {\r\n     justOne: <boolean>\r\n   }\r\n)\r\n# query\uff1a\u5220\u9664\u7684\u67e5\u8be2\u6761\u4ef6\uff0c\u7c7b\u4f3c\u4e8eSQL\u4e2d\u7684WHERE\u90e8\u5206\r\n# justOne\uff1a\u8bbe\u7f6e\u4e3atrue\u53ea\u5220\u9664\u4e00\u6761\u8bb0\u5f55\uff0c\u9ed8\u8ba4\u4e3afalse\u5220\u9664\u6240\u6709\u8bb0\u5f55\r\n\u5982\uff1adb.article.remove({\'title\':\'MongoDB \u6559\u7a0b\'})\r\n\r\n-- \u67e5\u8be2\u6587\u6863\r\ndb.collection.find(query, projection)\r\n# query\uff1a\u67e5\u8be2\u6761\u4ef6\uff0c\u7c7b\u4f3c\u4e8eSQL\u4e2d\u7684WHERE\u90e8\u5206\r\n# projection\uff1a\u53ef\u9009\uff0c\u4f7f\u7528\u6295\u5f71\u64cd\u4f5c\u7b26\u6307\u5b9a\u8fd4\u56de\u7684\u952e\r\n\r\n0\u3001\u6761\u4ef6\u64cd\u4f5c\u7b26\r\n\u7b49\u4e8e\t\t\t{<key>:<value>}\r\n\u5c0f\u4e8e\t\t\t{<key>:{$lt:<value>}\r\n\u5c0f\u4e8e\u6216\u7b49\u4e8e\t  {<key>:{$lte:<value>}}\r\n\u5927\u4e8e\t\t\t{<key>:{$gt:<value>}}\r\n\u5927\u4e8e\u6216\u7b49\u4e8e\t  {<key>:{$gte:<value>}}\r\n\u4e0d\u7b49\u4e8e\t\t    {<key>:{$ne:<value>}}\r\n\r\n1\u3001\u67e5\u8be2article\u96c6\u5408\u4e2d\u7684\u6240\u6709\u6587\u6863\r\ndb.article.find()\r\n\r\n2\u3001\u6761\u4ef6\u67e5\u8be2\uff0c\u67e5\u8be2title\u4e3aMongoDB \u6559\u7a0b\u7684\u6240\u6709\u6587\u6863\r\ndb.article.find({\'title\':\'MongoDB \u6559\u7a0b\'})\r\n\r\n3\u3001\u6761\u4ef6\u67e5\u8be2\uff0c\u67e5\u8be2likes\u5927\u4e8e50\u7684\u6240\u6709\u6587\u6863\r\ndb.article.find({\'likes\':{$gt:50}})\r\n\r\n4\u3001\u6761\u4ef6\u67e5\u8be2\uff0c\u67e5\u8be2title\u4e3aMongoDB \u6559\u7a0b\u5e76\u4e14by\u4e3aAndy\u7684\u6240\u6709\u6587\u6863\r\ndb.article.find({\'title\':\'MongoDB \u6559\u7a0b\',\'by\':\'Andy\'})\r\n\r\n5\u3001\u6761\u4ef6\u67e5\u8be2\uff0c\u67e5\u8be2title\u4e3aRedis \u6559\u7a0b\u6216MongoDB \u6559\u7a0b\u7684\u6240\u6709\u6587\u6863\r\ndb.article.find({$or:[{"title":"Redis \u6559\u7a0b"},{"title": "MongoDB \u6559\u7a0b"}]})\r\n\r\n6\u3001\u67e5\u8be2likes\u5927\u4e8e50\uff0c\u5e76\u4e14title\u4e3aRedis \u6559\u7a0b\u6216\u8005"MongoDB \u6559\u7a0b\u7684\u6240\u6709\u6587\u6863\r\ndb.article.find({"likes": {$gt:50}, $or: [{"title": "Redis \u6559\u7a0b"},{"title": "MongoDB \u6559\u7a0b"}]})\n'})}),"\n",(0,t.jsx)(e.h4,{id:"\u5176\u4ed6\u64cd\u4f5c",children:"\u5176\u4ed6\u64cd\u4f5c"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:'-- Limit\u4e0eSkip\u64cd\u4f5c\r\n1\u3001\u53ea\u67e5\u8be2article\u96c6\u5408\u4e2d\u76842\u6761\u6570\u636e\r\ndb.article.find().limit(2)\r\n\r\n2\u3001\u4ece\u7b2c\u4e8c\u6761\u5f00\u59cb\uff0c\u67e5\u8be2article\u96c6\u5408\u4e2d\u76842\u6761\u6570\u636e\r\ndb.article.find().limit(2).skip(1)\r\n\r\n-- \u6392\u5e8f\uff081\u4e3a\u5347\u5e8f\uff0c-1\u4e3a\u964d\u5e8f\uff09\r\n1\u3001\u6309article\u96c6\u5408\u4e2d\u6587\u6863\u7684likes\u5b57\u6bb5\u964d\u5e8f\u6392\u5217\r\ndb.article.find().sort({likes:-1})\r\n\r\n-- \u7d22\u5f15\r\ndb.collection.createIndex(keys, options)\r\n# background\uff1a\u5efa\u7d22\u5f15\u8fc7\u7a0b\u4f1a\u963b\u585e\u5176\u5b83\u6570\u636e\u5e93\u64cd\u4f5c\uff0c\u8bbe\u7f6e\u4e3atrue\u8868\u793a\u540e\u53f0\u521b\u5efa\uff0c\u9ed8\u8ba4\u4e3afalse\r\n# unique\uff1a\u8bbe\u7f6e\u4e3atrue\u8868\u793a\u521b\u5efa\u552f\u4e00\u7d22\u5f15\r\n# name\uff1a\u6307\u5b9a\u7d22\u5f15\u540d\u79f0\uff0c\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u4f1a\u81ea\u52a8\u751f\u6210\r\n\r\n1\u3001\u7ed9title\u548cdescription\u5b57\u6bb5\u521b\u5efa\u7d22\u5f15\uff0c1\u8868\u793a\u5347\u5e8f\u7d22\u5f15\uff0c-1\u8868\u793a\u964d\u5e8f\u7d22\u5f15\uff0c\u6307\u5b9a\u4ee5\u540e\u53f0\u65b9\u5f0f\u521b\u5efa\r\ndb.article.createIndex({"title":1,"description":-1}, {background: true})\r\n\r\n2\u3001\u67e5\u770barticle\u96c6\u5408\u4e2d\u5df2\u7ecf\u521b\u5efa\u7684\u7d22\u5f15\r\ndb.article.getIndexes()\r\n\r\n-- \u805a\u5408\r\n$sum\t\u8ba1\u7b97\u603b\u548c\r\n$avg\t\u8ba1\u7b97\u5e73\u5747\u503c\r\n$min\t\u8ba1\u7b97\u6700\u5c0f\u503c\r\n$max\t\u8ba1\u7b97\u6700\u5927\u503c\r\n1\u3001\u6839\u636eby\u5b57\u6bb5\u805a\u5408\u6587\u6863\u5e76\u8ba1\u7b97\u6587\u6863\u6570\u91cf\uff0c\u7c7b\u4f3c\u4e0eSQL\u4e2d\u7684count()\u51fd\u6570\r\ndb.article.aggregate([{$group : {_id : "$by", sum_count : {$sum : 1}}}])\r\n\r\n2\u3001\u6839\u636eby\u5b57\u6bb5\u805a\u5408\u6587\u6863\u5e76\u8ba1\u7b97likes\u5b57\u6bb5\u7684\u5e73\u5c40\u503c\uff0c\u7c7b\u4f3c\u4e0eSQL\u4e2d\u7684avg()\u8bed\u53e5\r\ndb.article.aggregate([{$group : {_id : "$by", avg_likes : {$avg : "$likes"}}}])\n'})}),"\n",(0,t.jsx)(e.h4,{id:"\u6b63\u5219\u8868\u8fbe\u5f0f",children:"\u6b63\u5219\u8868\u8fbe\u5f0f"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:'-- MongoDB\u4f7f\u7528$regex\u64cd\u4f5c\u7b26\u6765\u8bbe\u7f6e\u5339\u914d\u5b57\u7b26\u4e32\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u53ef\u4ee5\u7528\u6765\u6a21\u7cca\u67e5\u8be2\uff0c\u7c7b\u4f3c\u4e8eSQL\u4e2d\u7684like\u64cd\u4f5c\r\n1\u3001\u67e5\u8be2title\u4e2d\u5305\u542b\u6559\u7a0b\u7684\u6587\u6863\r\ndb.article.find({title:{$regex:"\u6559\u7a0b"}})\r\n\r\n2\u3001\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u7684\u6a21\u7cca\u67e5\u8be2\uff0c\u4f7f\u7528$options\u64cd\u4f5c\u7b26\r\ndb.article.find({title:{$regex:"mongodb",$options:"$i"}})\n'})})]})}function g(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(c,{...n})}):c(n)}},8453:(n,e,r)=>{r.d(e,{R:()=>l,x:()=>d});var t=r(6540);const o={},i=t.createContext(o);function l(n){const e=t.useContext(i);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:l(n.components),t.createElement(i.Provider,{value:e},n.children)}}}]);
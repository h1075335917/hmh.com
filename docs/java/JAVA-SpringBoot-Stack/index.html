<!doctype html><html lang=zh-Hans dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-java/JAVA-SpringBoot-Stack" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.6.0"><title data-rh=true>JAVA-SpringBootæŠ€æœ¯æ ˆ | è´ºæ•åçš„å®˜æ–¹ç½‘ç«™</title><meta data-rh=true name=viewport content="width=device-width,initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:image content=https://mhuahe.github.io/mhuahe.com/img/docusaurus-social-card.jpg><meta data-rh=true name=twitter:image content=https://mhuahe.github.io/mhuahe.com/img/docusaurus-social-card.jpg><meta data-rh=true property=og:url content=https://mhuahe.github.io/mhuahe.com/docs/java/JAVA-SpringBoot-Stack><meta data-rh=true property=og:locale content=zh_Hans><meta data-rh=true name=docusaurus_locale content=zh-Hans><meta data-rh=true name=docsearch:language content=zh-Hans><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="JAVA-SpringBootæŠ€æœ¯æ ˆ | è´ºæ•åçš„å®˜æ–¹ç½‘ç«™"><meta data-rh=true name=description content=spring-boot-redis><meta data-rh=true property=og:description content=spring-boot-redis><link data-rh=true rel=icon href=/mhuahe.com/img/m_two_logo.ico><link data-rh=true rel=canonical href=https://mhuahe.github.io/mhuahe.com/docs/java/JAVA-SpringBoot-Stack><link data-rh=true rel=alternate href=https://mhuahe.github.io/mhuahe.com/docs/java/JAVA-SpringBoot-Stack hreflang=zh-Hans><link data-rh=true rel=alternate href=https://mhuahe.github.io/mhuahe.com/docs/java/JAVA-SpringBoot-Stack hreflang=x-default><link rel=alternate type=application/rss+xml href=/mhuahe.com/blog/rss.xml title="è´ºæ•åçš„å®˜æ–¹ç½‘ç«™ RSS Feed"><link rel=alternate type=application/atom+xml href=/mhuahe.com/blog/atom.xml title="è´ºæ•åçš„å®˜æ–¹ç½‘ç«™ Atom Feed"><link rel=stylesheet href=/mhuahe.com/assets/css/styles.06d361cb.css><script src=/mhuahe.com/assets/js/runtime~main.1b34b5c1.js defer></script><script src=/mhuahe.com/assets/js/main.82c2ad4c.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":(window.matchMedia("(prefers-color-scheme: light)").matches,"light"),document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id=__docusaurus><div role=region aria-label=è·³åˆ°ä¸»è¦å†…å®¹><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>è·³åˆ°ä¸»è¦å†…å®¹</a></div><div class=announcementBar_mb4j role=banner><div class=announcementBarPlaceholder_vyr4></div><div class="content_knG7 announcementBarContent_xLdY">ğŸ‰ï¸<b>æœ¬ç½‘ç«™æ­£åœ¨å»ºè®¾ä¸­ï¼Œæ¬¢è¿æå‡ºå®è´µæ„è§ï¼<a target=_blank href=https://github.com/mhuahe/mhuahe.com>æºç åœ°å€</a></b> ğŸ¥³ï¸</div><button type=button aria-label=å…³é—­ class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width=14 height=14><g stroke=currentColor stroke-width=3.1><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"/></g></svg></button></div><nav aria-label=ä¸»å¯¼èˆª class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><button aria-label=åˆ‡æ¢å¯¼èˆªæ  aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/mhuahe.com/><div class=navbar__logo><img src=/mhuahe.com/img/m_two_logo.svg alt="mhuahe site logo" class="themedComponent_mlkZ themedComponent--light_NVdE" height=32 width=32><img src=/mhuahe.com/img/m_two_logo.svg alt="mhuahe site logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" height=32 width=32></div><b class="navbar__title text--truncate">è´ºæ•åçš„å®˜æ–¹ç½‘ç«™</b></a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/mhuahe.com/docs/java/>Java</a><a class="navbar__item navbar__link" href=/mhuahe.com/docs/web/>å‰ç«¯</a><a class="navbar__item navbar__link" href=/mhuahe.com/docs/c/>Cè¯­è¨€</a><a class="navbar__item navbar__link" href=/mhuahe.com/docs/linux/>Linux</a><a class="navbar__item navbar__link" href=/mhuahe.com/docs/sql/MySQL>SQL</a><a class="navbar__item navbar__link" href=/mhuahe.com/docs/python/>Python</a><a class="navbar__item navbar__link" href=/mhuahe.com/docs/tool/>å·¥å…·</a><a class="navbar__item navbar__link" href=/mhuahe.com/docs/project/>é¡¹ç›®</a><a class="navbar__item navbar__link" href=/mhuahe.com/docs/knowledge/ä»€ä¹ˆæ˜¯SaaS>çŸ¥è¯†</a><a class="navbar__item navbar__link" href=/mhuahe.com/docs/other/OTHER-Examination>å…¶ä»–</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href=/mhuahe.com/docs/example/EXAMPLE-Video>ç¤ºä¾‹</a><a class="navbar__item navbar__link" href=/mhuahe.com/blog>Blog</a><a href=https://mhuahe.github.io/pintree/ target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">ä¹¦ç­¾<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><a href=https://github.com/mhuahe/mhuahe.com target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title=åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰ aria-label=åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰ aria-live=polite aria-pressed=false><svg viewBox="0 0 24 24" width=24 height=24 class=lightToggleIcon_pyhR><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 class=darkToggleIcon_wfgR><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg></button></div><div class=navbarSearchContainer_Bca1><div class="navbar__search searchBarContainer_NW3z" dir=ltr><input placeholder=æœç´¢ aria-label=Search class=navbar__search-input value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label=å›åˆ°é¡¶éƒ¨ class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label=æ–‡æ¡£ä¾§è¾¹æ  class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/mhuahe.com/docs/java/><div> <!-- -->JAVA</div></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/mhuahe.com/docs/java/JAVA-Algorithm><div> <!-- -->JAVA-ç®—æ³•</div></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/mhuahe.com/docs/java/JAVA-Code-Generation><div> <!-- -->JAVA-ä»£ç ç”Ÿæˆ</div></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/mhuahe.com/docs/java/JAVA-Data-Structure><div> <!-- -->JAVA-æ•°æ®ç»“æ„</div></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/mhuahe.com/docs/java/JAVA-Design-Pattern><div> <!-- -->JAVA-è®¾è®¡æ¨¡å¼</div></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/mhuahe.com/docs/java/JAVA-Elaticsearch><div> <!-- -->JAVA-ES</div></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/mhuahe.com/docs/java/JAVA-Encryption><div> <!-- -->JAVA-åŠ å¯†æ–¹å¼</div></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/mhuahe.com/docs/java/JAVA-Error-Record><div> <!-- -->JAVA-é”™è¯¯è®°å½•</div></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/mhuahe.com/docs/java/JAVA-Hutool><div> <!-- -->JAVA-HuToolå·¥å…·</div></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/mhuahe.com/docs/java/JAVA-JDK-Version><div> <!-- -->JAVA-JDKç‰ˆæœ¬</div></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/mhuahe.com/docs/java/JAVA-JVM><div> <!-- -->JAVA-JVM</div></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/mhuahe.com/docs/java/JAVA-Knowledge-Question><div> <!-- -->JAVA-çŸ¥è¯†é¢˜</div></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/mhuahe.com/docs/java/JAVA-MQ><div> <!-- -->JAVA-æ¶ˆæ¯é˜Ÿåˆ—</div></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/mhuahe.com/docs/java/JAVA-Maven-Dependent><div> <!-- -->JAVA-Mavenä¾èµ–</div></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/mhuahe.com/docs/java/JAVA-Maven><div> <!-- -->JAVA-Maven</div></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/mhuahe.com/docs/java/JAVA-MongoDB><div> <!-- -->JAVA-MongoDB</div></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/mhuahe.com/docs/java/JAVA-MybatisPlus><div> <!-- -->JAVA-MybatisPlus</div></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/mhuahe.com/docs/java/JAVA-OAuth2-SourceCode><div> <!-- -->JAVA-oauth2æºç è§£è¯»</div></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/mhuahe.com/docs/java/JAVA-PDF><div> <!-- -->JAVA-PDF</div></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/mhuahe.com/docs/java/JAVA-SQL-Interceptor><div> <!-- -->JAVA-SQLæ‹¦æˆªå™¨</div></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/mhuahe.com/docs/java/JAVA-Servlet><div> <!-- -->JAVA-Servlet</div></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current=page href=/mhuahe.com/docs/java/JAVA-SpringBoot-Stack><div> <!-- -->JAVA-SpringBootæŠ€æœ¯æ ˆ</div></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/mhuahe.com/docs/java/JAVA-SpringBoot-Version><div> <!-- -->JAVA-SpringBootç‰ˆæœ¬</div></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/mhuahe.com/docs/java/JAVA-SpringCloud-Stack><div> <!-- -->JAVA-SpringCloudæŠ€æœ¯æ ˆ</div></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/mhuahe.com/docs/java/JAVA-Thread><div> <!-- -->JAVA-å¤šçº¿ç¨‹</div></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/mhuahe.com/docs/java/JAVA-WebSocket><div> <!-- -->JAVA-WebSocket</div></a></ul></nav><button type=button title=æ”¶èµ·ä¾§è¾¹æ  aria-label=æ”¶èµ·ä¾§è¾¹æ  class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width=20 height=20 aria-hidden=true class=collapseSidebarButtonIcon_kv0_><g fill=#7a7a7a><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"/><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"/></g></svg></button></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_z5aJ"><div class=docItemContainer_c0TR><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=é¡µé¢è·¯å¾„><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label=ä¸»é¡µé¢ class=breadcrumbs__link href=/mhuahe.com/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>JAVA-SpringBootæŠ€æœ¯æ ˆ</span><meta itemprop=position content=1></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">æœ¬é¡µæ€»è§ˆ</button></div><div class="theme-doc-markdown markdown"><header><h1>JAVA-SpringBootæŠ€æœ¯æ ˆ</h1></header>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=spring-boot-redis>spring-boot-redis<a href=#spring-boot-redis class=hash-link aria-label=spring-boot-redisçš„ç›´æ¥é“¾æ¥ title=spring-boot-redisçš„ç›´æ¥é“¾æ¥>â€‹</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=å¯åŠ¨å‘½ä»¤>å¯åŠ¨å‘½ä»¤<a href=#å¯åŠ¨å‘½ä»¤ class=hash-link aria-label=å¯åŠ¨å‘½ä»¤çš„ç›´æ¥é“¾æ¥ title=å¯åŠ¨å‘½ä»¤çš„ç›´æ¥é“¾æ¥>â€‹</a></h4>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>-- å¯åŠ¨</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">redis</span><span class="token operator" style=color:#393A34>-</span><span class="token plain">server</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">exe redis</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">windows</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">conf</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>-- å®‰è£…ä¸ºæœåŠ¡</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">redis</span><span class="token operator" style=color:#393A34>-</span><span class="token plain">server </span><span class="token comment" style=color:#999988;font-style:italic>--service-install redis.windows.conf</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>-- å¯åŠ¨æœåŠ¡</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">redis</span><span class="token operator" style=color:#393A34>-</span><span class="token plain">server </span><span class="token comment" style=color:#999988;font-style:italic>--service-start </span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>-- åœæ­¢æœåŠ¡</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">redis</span><span class="token operator" style=color:#393A34>-</span><span class="token plain">server </span><span class="token comment" style=color:#999988;font-style:italic>--service-stop</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>-- å¸è½½æœåŠ¡</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">redis</span><span class="token operator" style=color:#393A34>-</span><span class="token plain">server </span><span class="token comment" style=color:#999988;font-style:italic>--service-uninstall</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=ä¾èµ–>ä¾èµ–<a href=#ä¾èµ– class=hash-link aria-label=ä¾èµ–çš„ç›´æ¥é“¾æ¥ title=ä¾èµ–çš„ç›´æ¥é“¾æ¥>â€‹</a></h4>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>dependency</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>groupId</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>groupId</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">	</span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>artifactId</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain">spring-boot-starter-data-redis</span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>artifactId</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">	</span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>version</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain">2.1.3.RELEASE</span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>version</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>dependency</span><span class="token tag punctuation" style=color:#393A34>></span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=æ–‡ä»¶é…ç½®>æ–‡ä»¶é…ç½®<a href=#æ–‡ä»¶é…ç½® class=hash-link aria-label=æ–‡ä»¶é…ç½®çš„ç›´æ¥é“¾æ¥ title=æ–‡ä»¶é…ç½®çš„ç›´æ¥é“¾æ¥>â€‹</a></h4>
<div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yml codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token key atrule" style=color:#00a4db>spring</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token key atrule" style=color:#00a4db>redis</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>database</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>13</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>host</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> r</span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain">bp1nlprt5p3vckecl4pd.redis.rds.aliyuncs.com</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>password</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'hayes:Hh2050401938'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>port</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>6379</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>lettuce</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>pool</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>max-active</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>50</span><span class="token plain">   </span><span class="token comment" style=color:#999988;font-style:italic>#æœ€å¤§è¿æ¥æ•°æ®åº“è¿æ¥æ•°,è®¾ 0 ä¸ºæ²¡æœ‰é™åˆ¶</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>max-idle</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>50</span><span class="token plain">     </span><span class="token comment" style=color:#999988;font-style:italic>#æœ€å¤§ç­‰å¾…è¿æ¥ä¸­çš„æ•°é‡,è®¾ 0 ä¸ºæ²¡æœ‰é™åˆ¶</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>max-wait</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain">1ms  </span><span class="token comment" style=color:#999988;font-style:italic>#æœ€å¤§å»ºç«‹è¿æ¥ç­‰å¾…æ—¶é—´ã€‚å¦‚æœè¶…è¿‡æ­¤æ—¶é—´å°†æ¥åˆ°å¼‚å¸¸ã€‚è®¾ä¸º-1è¡¨ç¤ºæ— é™åˆ¶ã€‚</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>min-idle</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token plain">     </span><span class="token comment" style=color:#999988;font-style:italic>#æœ€å°ç­‰å¾…è¿æ¥ä¸­çš„æ•°é‡,è®¾ 0 ä¸ºæ²¡æœ‰é™åˆ¶</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=é…ç½®ç±»>é…ç½®ç±»<a href=#é…ç½®ç±» class=hash-link aria-label=é…ç½®ç±»çš„ç›´æ¥é“¾æ¥ title=é…ç½®ç±»çš„ç›´æ¥é“¾æ¥>â€‹</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-java codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">package com.lingyun.middleware.redis;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">import com.fasterxml.jackson.annotation.JsonAutoDetect.Visibility;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">import com.fasterxml.jackson.annotation.PropertyAccessor;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">import com.fasterxml.jackson.databind.ObjectMapper;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">import com.fasterxml.jackson.databind.ObjectMapper.DefaultTyping;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">import org.springframework.cache.CacheManager;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">import org.springframework.cache.annotation.CacheConfig;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">import org.springframework.cache.annotation.CachingConfigurerSupport;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">import org.springframework.cache.interceptor.KeyGenerator;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">import org.springframework.context.annotation.Bean;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">import org.springframework.context.annotation.Configuration;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">import org.springframework.data.redis.cache.RedisCacheConfiguration;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">import org.springframework.data.redis.cache.RedisCacheManager;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">import org.springframework.data.redis.cache.RedisCacheWriter;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">import org.springframework.data.redis.connection.RedisConnectionFactory;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">import org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">import org.springframework.data.redis.core.RedisTemplate;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">import org.springframework.data.redis.listener.RedisMessageListenerContainer;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">import org.springframework.data.redis.serializer.Jackson2JsonRedisSerializer;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">import org.springframework.data.redis.serializer.RedisSerializer;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">import org.springframework.data.redis.serializer.StringRedisSerializer;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">import javax.annotation.Resource;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">import java.lang.reflect.Method;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">import java.time.Duration;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">import java.util.Arrays;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">import static java.util.Collections.singletonMap;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">@Configuration</span><br></span><span class=token-line style=color:#393A34><span class="token plain">@CacheConfig</span><br></span><span class=token-line style=color:#393A34><span class="token plain">public class RedisConfig extends CachingConfigurerSupport {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	@Resource</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	private LettuceConnectionFactory lettuceConnectionFactory;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	/**</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	 * @description è‡ªå®šä¹‰çš„ç¼“å­˜keyçš„ç”Ÿæˆç­–ç•¥ è‹¥æƒ³ä½¿ç”¨è¿™ä¸ªkey</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	 *              åªéœ€è¦è®²æ³¨è§£ä¸ŠkeyGeneratorçš„å€¼è®¾ç½®ä¸ºkeyGeneratorå³å¯&lt;/br></span><br></span><span class=token-line style=color:#393A34><span class="token plain">	 * @return è‡ªå®šä¹‰ç­–ç•¥ç”Ÿæˆçš„key</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	 */</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	@Override</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	@Bean</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	public KeyGenerator keyGenerator() {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		return new KeyGenerator() {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">			@Override</span><br></span><span class=token-line style=color:#393A34><span class="token plain">			public Object generate(Object target, Method method, Object... params) {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">				StringBuilder sb = new StringBuilder();</span><br></span><span class=token-line style=color:#393A34><span class="token plain">				sb.append(target.getClass().getName());</span><br></span><span class=token-line style=color:#393A34><span class="token plain">				sb.append(method.getDeclaringClass().getName());</span><br></span><span class=token-line style=color:#393A34><span class="token plain">				Arrays.stream(params).map(Object::toString).forEach(sb::append);</span><br></span><span class=token-line style=color:#393A34><span class="token plain">				return sb.toString();</span><br></span><span class=token-line style=color:#393A34><span class="token plain">			}</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		};</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	}</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	/**</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	 * RedisTemplateé…ç½®</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	 */</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	@Bean</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	public RedisTemplate&lt;String, Object> redisTemplate(LettuceConnectionFactory lettuceConnectionFactory) {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		// è®¾ç½®åºåˆ—åŒ–</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		Jackson2JsonRedisSerializer&lt;Object> jackson2JsonRedisSerializer = new Jackson2JsonRedisSerializer&lt;Object>(Object.class);</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		ObjectMapper om = new ObjectMapper();</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		om.setVisibility(PropertyAccessor.ALL, Visibility.ANY);</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		om.enableDefaultTyping(DefaultTyping.NON_FINAL);</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		jackson2JsonRedisSerializer.setObjectMapper(om);</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		// é…ç½®redisTemplate</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		RedisTemplate&lt;String, Object> redisTemplate = new RedisTemplate&lt;String, Object>();</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		redisTemplate.setConnectionFactory(lettuceConnectionFactory);</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		RedisSerializer&lt;?> stringSerializer = new StringRedisSerializer();</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		redisTemplate.setKeySerializer(stringSerializer);// keyåºåˆ—åŒ–</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		redisTemplate.setValueSerializer(jackson2JsonRedisSerializer);// valueåºåˆ—åŒ–</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		redisTemplate.setHashKeySerializer(stringSerializer);// Hash keyåºåˆ—åŒ–</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		redisTemplate.setHashValueSerializer(jackson2JsonRedisSerializer);// Hash valueåºåˆ—åŒ–</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		redisTemplate.afterPropertiesSet();</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		return redisTemplate;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	}</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	/**</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	 * ç¼“å­˜é…ç½®ç®¡ç†å™¨</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	 */</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	@Bean</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	public CacheManager cacheManager(LettuceConnectionFactory factory) {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		// ä»¥é”å†™å…¥çš„æ–¹å¼åˆ›å»ºRedisCacheWriterå¯¹è±¡</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		RedisCacheWriter writer = RedisCacheWriter.lockingRedisCacheWriter(factory);</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		// åˆ›å»ºé»˜è®¤ç¼“å­˜é…ç½®å¯¹è±¡</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		/* é»˜è®¤é…ç½®ï¼Œè®¾ç½®ç¼“å­˜æœ‰æ•ˆæœŸ 1å°æ—¶*/</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		RedisCacheConfiguration defaultCacheConfig = RedisCacheConfiguration.defaultCacheConfig().entryTtl(Duration.ofHours(1));</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		/* é…ç½®testçš„è¶…æ—¶æ—¶é—´ä¸º120s*/</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		RedisCacheManager cacheManager = RedisCacheManager.builder(RedisCacheWriter.lockingRedisCacheWriter(lettuceConnectionFactory)).cacheDefaults(defaultCacheConfig)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">				.withInitialCacheConfigurations(singletonMap("test", RedisCacheConfiguration.defaultCacheConfig().entryTtl(Duration.ofMinutes(120)).disableCachingNullValues()))</span><br></span><span class=token-line style=color:#393A34><span class="token plain">				.transactionAware().build();</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		return cacheManager;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	}</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	@Bean</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	RedisMessageListenerContainer container(RedisConnectionFactory connectionFactory) {</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">		RedisMessageListenerContainer container = new RedisMessageListenerContainer();</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		container.setConnectionFactory(connectionFactory);</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		// container.addMessageListener(new RedisExpiredListener(), new</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		// PatternTopic("__keyevent@0__:expired"));</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		return container;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	}</span><br></span><span class=token-line style=color:#393A34><span class="token plain">}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-java codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">/**</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> * Redisé…ç½®ç±»</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> * Created by macro on 2020/3/2.</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> */</span><br></span><span class=token-line style=color:#393A34><span class="token plain">@EnableCaching</span><br></span><span class=token-line style=color:#393A34><span class="token plain">@Configuration</span><br></span><span class=token-line style=color:#393A34><span class="token plain">public class RedisConfig extends CachingConfigurerSupport {</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    /**</span><br></span><span class=token-line style=color:#393A34><span class="token plain">     * redisæ•°æ®åº“è‡ªå®šä¹‰key</span><br></span><span class=token-line style=color:#393A34><span class="token plain">     */</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    public  static final String REDIS_KEY_DATABASE="mall";</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    @Bean</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    public RedisTemplate&lt;String, Object> redisTemplate(RedisConnectionFactory redisConnectionFactory) {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        RedisSerializer&lt;Object> serializer = redisSerializer();</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        RedisTemplate&lt;String, Object> redisTemplate = new RedisTemplate&lt;>();</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        redisTemplate.setConnectionFactory(redisConnectionFactory);</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        redisTemplate.setKeySerializer(new StringRedisSerializer());</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        redisTemplate.setValueSerializer(serializer);</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        redisTemplate.setHashKeySerializer(new StringRedisSerializer());</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        redisTemplate.setHashValueSerializer(serializer);</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        redisTemplate.afterPropertiesSet();</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        return redisTemplate;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    }</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    @Bean</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    public RedisSerializer&lt;Object> redisSerializer() {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        //åˆ›å»ºJSONåºåˆ—åŒ–å™¨</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        Jackson2JsonRedisSerializer&lt;Object> serializer = new Jackson2JsonRedisSerializer&lt;>(Object.class);</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        ObjectMapper objectMapper = new ObjectMapper();</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        objectMapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        objectMapper.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        serializer.setObjectMapper(objectMapper);</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        return serializer;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    }</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    @Bean</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    public RedisCacheManager redisCacheManager(RedisConnectionFactory redisConnectionFactory) {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        RedisCacheWriter redisCacheWriter = RedisCacheWriter.nonLockingRedisCacheWriter(redisConnectionFactory);</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        //è®¾ç½®Redisç¼“å­˜æœ‰æ•ˆæœŸä¸º1å¤©</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        RedisCacheConfiguration redisCacheConfiguration = RedisCacheConfiguration.defaultCacheConfig()</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                .serializeValuesWith(RedisSerializationContext.SerializationPair.fromSerializer(redisSerializer())).entryTtl(Duration.ofDays(1));</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        return new RedisCacheManager(redisCacheWriter, redisCacheConfiguration);</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    }</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=è¿‡æœŸç›‘å¬>è¿‡æœŸç›‘å¬<a href=#è¿‡æœŸç›‘å¬ class=hash-link aria-label=è¿‡æœŸç›‘å¬çš„ç›´æ¥é“¾æ¥ title=è¿‡æœŸç›‘å¬çš„ç›´æ¥é“¾æ¥>â€‹</a></h4>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>-- å­˜åœ¨å»¶è¿Ÿ</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">Redisè¿‡æœŸäº‹ä»¶çš„å‘å¸ƒä¸æ˜¯æŒ‡</span><span class="token keyword" style=color:#00009f>key</span><span class="token plain">åˆ°äº†è¿‡æœŸæ—¶é—´å°±å‘å¸ƒï¼Œè€Œæ˜¯</span><span class="token keyword" style=color:#00009f>key</span><span class="token plain">åˆ°äº†è¿‡æœŸæ—¶é—´è¢«æ¸…é™¤ä¹‹åæ‰ä¼šå‘å¸ƒäº‹ä»¶ã€‚</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>-- Redisè¿‡æœŸkeyçš„ä¸¤ç§æ¸…é™¤ç­–ç•¥ï¼š</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">æƒ°æ€§æ¸…é™¤ã€‚å½“è¿™ä¸ª</span><span class="token keyword" style=color:#00009f>key</span><span class="token plain">è¿‡æœŸä¹‹åï¼Œè®¿é—®æ—¶ï¼Œè¿™ä¸ª</span><span class="token keyword" style=color:#00009f>Key</span><span class="token plain">æ‰ä¼šè¢«æ¸…é™¤</span><br></span><span class=token-line style=color:#393A34><span class="token plain">å®šæ—¶æ¸…é™¤ã€‚åå°ä¼šå®šæœŸæ£€æŸ¥ä¸€éƒ¨åˆ†</span><span class="token keyword" style=color:#00009f>key</span><span class="token plain">ï¼Œå¦‚æœæœ‰</span><span class="token keyword" style=color:#00009f>key</span><span class="token plain">è¿‡æœŸäº†ï¼Œå°±ä¼šè¢«æ¸…é™¤</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">æ‰€ä»¥å³ä½¿</span><span class="token keyword" style=color:#00009f>key</span><span class="token plain">åˆ°äº†è¿‡æœŸæ—¶é—´ï¼ŒRedisä¹Ÿä¸ä¸€å®šä¼šå‘é€</span><span class="token keyword" style=color:#00009f>key</span><span class="token plain">è¿‡æœŸäº‹ä»¶ï¼Œè¿™å°±åˆ°å¯¼è‡´è™½ç„¶å»¶è¿Ÿä»»åŠ¡åˆ°äº†å»¶è¿Ÿæ—¶é—´ä¹Ÿå¯èƒ½è·å–ä¸åˆ°å»¶è¿Ÿä»»åŠ¡ã€‚</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>-- ä¸¢æ¶ˆæ¯å¤ªé¢‘ç¹</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">Rediså®ç°çš„å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œæ¶ˆæ¯æ˜¯æ²¡æœ‰æŒä¹…åŒ–æœºåˆ¶ï¼Œå½“æ¶ˆæ¯å‘å¸ƒåˆ°æŸä¸ªchannelä¹‹åï¼Œå¦‚æœæ²¡æœ‰å®¢æˆ·ç«¯è®¢é˜…è¿™ä¸ªchannelï¼Œé‚£ä¹ˆè¿™ä¸ªæ¶ˆæ¯å°±ä¸¢äº†ï¼Œå¹¶ä¸ä¼šåƒMQä¸€æ ·è¿›è¡ŒæŒä¹…åŒ–ï¼Œç­‰æœ‰æ¶ˆè´¹è€…è®¢é˜…çš„æ—¶å€™å†ç»™æ¶ˆè´¹è€…æ¶ˆè´¹ã€‚</span><br></span><span class=token-line style=color:#393A34><span class="token plain">æ‰€ä»¥è¯´ï¼Œå‡è®¾æœåŠ¡é‡å¯æœŸé—´ï¼ŒæŸä¸ªç”Ÿäº§è€…æˆ–è€…æ˜¯Redisæœ¬èº«å‘å¸ƒäº†ä¸€æ¡æ¶ˆæ¯åˆ°æŸä¸ªchannelï¼Œç”±äºæœåŠ¡é‡å¯ï¼Œæ²¡æœ‰ç›‘å¬è¿™ä¸ªchannelï¼Œé‚£ä¹ˆè¿™ä¸ªæ¶ˆæ¯è‡ªç„¶å°±ä¸¢äº†ã€‚</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>-- æ¶ˆæ¯æ¶ˆè´¹åªæœ‰å¹¿æ’­æ¨¡å¼</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">Redisçš„å‘å¸ƒè®¢é˜…æ¨¡å¼æ¶ˆæ¯æ¶ˆè´¹åªæœ‰å¹¿æ’­æ¨¡å¼ä¸€ç§ã€‚</span><br></span><span class=token-line style=color:#393A34><span class="token plain">æ‰€è°“çš„å¹¿æ’­æ¨¡å¼å°±æ˜¯å¤šä¸ªæ¶ˆè´¹è€…è®¢é˜…åŒä¸€ä¸ªchannelï¼Œé‚£ä¹ˆæ¯ä¸ªæ¶ˆè´¹è€…éƒ½èƒ½æ¶ˆè´¹åˆ°å‘å¸ƒåˆ°è¿™ä¸ªchannelçš„æ‰€æœ‰æ¶ˆæ¯ã€‚</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>-- æ¥æ”¶åˆ°æ‰€æœ‰keyçš„æŸä¸ªäº‹ä»¶</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">è¿™ä¸ªä¸å±äºRediså‘å¸ƒè®¢é˜…æ¨¡å¼çš„é—®é¢˜ï¼Œè€Œæ˜¯Redisæœ¬èº«äº‹ä»¶é€šçŸ¥çš„é—®é¢˜ã€‚</span><br></span><span class=token-line style=color:#393A34><span class="token plain">å½“ç›‘å¬äº†__keyevent@</span><span class="token operator" style=color:#393A34>&lt;</span><span class="token plain">db</span><span class="token operator" style=color:#393A34>></span><span class="token plain">__:expiredçš„channelï¼Œé‚£ä¹ˆæ‰€æœ‰çš„Redisçš„</span><span class="token keyword" style=color:#00009f>key</span><span class="token plain">åªè¦å‘ç”Ÿäº†è¿‡æœŸäº‹ä»¶éƒ½ä¼šè¢«é€šçŸ¥ç»™æ¶ˆè´¹è€…ï¼Œä¸ç®¡è¿™ä¸ª</span><span class="token keyword" style=color:#00009f>key</span><span class="token plain">æ˜¯ä¸æ˜¯æ¶ˆè´¹è€…æƒ³æ¥æ”¶åˆ°çš„ã€‚</span><br></span><span class=token-line style=color:#393A34><span class="token plain">æ‰€ä»¥å¦‚æœä½ åªæƒ³æ¶ˆè´¹æŸä¸€ç±»æ¶ˆæ¯çš„</span><span class="token keyword" style=color:#00009f>key</span><span class="token plain">ï¼Œé‚£ä¹ˆè¿˜å¾—è‡ªè¡ŒåŠ ä¸€äº›æ ‡è®°ï¼Œæ¯”å¦‚æ¶ˆæ¯çš„</span><span class="token keyword" style=color:#00009f>key</span><span class="token plain">åŠ ä¸ªå‰ç¼€ï¼Œæ¶ˆè´¹çš„æ—¶å€™åˆ¤æ–­ä¸€ä¸‹å¸¦å‰ç¼€çš„</span><span class="token keyword" style=color:#00009f>key</span><span class="token plain">å°±æ˜¯éœ€è¦æ¶ˆè´¹çš„ä»»åŠ¡ã€‚</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-java codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">@Component</span><br></span><span class=token-line style=color:#393A34><span class="token plain">@Log4j2</span><br></span><span class=token-line style=color:#393A34><span class="token plain">public class RedisKeyExpirationListener extends KeyExpirationEventMessageListener {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	public RedisKeyExpirationListener(RedisMessageListenerContainer listenerContainer) {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		super(listenerContainer);</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	}</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	@Override</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	public void onMessage(Message message, byte[] pattern) {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		//è·å–è¿‡æœŸçš„key</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		String expireKey = message.toString();</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		log.info("ç›‘å¬åˆ°è¿‡æœŸkeyï¼š{}",expireKey);</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	}</span><br></span><span class=token-line style=color:#393A34><span class="token plain">}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=ç¼“å­˜æ³¨è§£>ç¼“å­˜æ³¨è§£<a href=#ç¼“å­˜æ³¨è§£ class=hash-link aria-label=ç¼“å­˜æ³¨è§£çš„ç›´æ¥é“¾æ¥ title=ç¼“å­˜æ³¨è§£çš„ç›´æ¥é“¾æ¥>â€‹</a></h4>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token variable" style=color:#36acaa>@EnableCaching</span><span class="token plain">ï¼šå¯ç”¨ç¼“å­˜</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>-- æ³¨ï¼šåœ¨Serviceç”Ÿæ•ˆã€‚Controllerå±‚ä¸ç”Ÿæ•ˆ</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token variable" style=color:#36acaa>@Cacheable</span><span class="token plain">ï¼š</span><br></span><span class=token-line style=color:#393A34><span class="token plain">è·å–ç¼“å­˜ï¼Œç¼“å­˜ä¸å­˜åœ¨åˆ™æ‰§è¡Œæ–¹æ³•è·å–æ•°æ®å¹¶æŠŠæ•°æ®å­˜å…¥ç¼“å­˜</span><br></span><span class=token-line style=color:#393A34><span class="token plain">ä½¿ç”¨è¯¥æ³¨è§£çš„æ–¹æ³•å½“ç¼“å­˜å­˜åœ¨æ—¶ï¼Œä¼šä»ç¼“å­˜ä¸­è·å–æ•°æ®è€Œä¸æ‰§è¡Œæ–¹æ³•ï¼Œå½“ç¼“å­˜ä¸å­˜åœ¨æ—¶ï¼Œä¼šæ‰§è¡Œæ–¹æ³•å¹¶æŠŠè¿”å›ç»“æœå­˜å…¥ç¼“å­˜ä¸­ã€‚ä¸€èˆ¬ä½¿ç”¨åœ¨æŸ¥è¯¢æ–¹æ³•ä¸Šï¼Œå¯ä»¥è®¾ç½®å¦‚ä¸‹å±æ€§ï¼š</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>value</span><span class="token plain">ï¼šç¼“å­˜åç§°ï¼ˆå¿…å¡«ï¼‰ï¼ŒæŒ‡å®šç¼“å­˜çš„å‘½åç©ºé—´ï¼›</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>key</span><span class="token plain">ï¼šç”¨äºè®¾ç½®åœ¨å‘½åç©ºé—´ä¸­çš„ç¼“å­˜</span><span class="token keyword" style=color:#00009f>key</span><span class="token plain">å€¼ï¼Œå¯ä»¥ä½¿ç”¨SpELè¡¨è¾¾å¼å®šä¹‰ï¼›</span><br></span><span class=token-line style=color:#393A34><span class="token plain">unlessï¼šæ¡ä»¶ç¬¦åˆåˆ™ä¸ç¼“å­˜ï¼›</span><br></span><span class=token-line style=color:#393A34><span class="token plain">conditionï¼šæ¡ä»¶ç¬¦åˆåˆ™ç¼“å­˜ã€‚</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token variable" style=color:#36acaa>@CachePut</span><span class="token plain">ï¼š</span><br></span><span class=token-line style=color:#393A34><span class="token plain">ä½¿ç”¨è¯¥æ³¨è§£çš„æ–¹æ³•æ¯æ¬¡æ‰§è¡Œæ—¶éƒ½ä¼šæŠŠè¿”å›ç»“æœå­˜å…¥ç¼“å­˜ä¸­ã€‚ä¸€èˆ¬ä½¿ç”¨åœ¨æ–°å¢æ–¹æ³•ä¸Šï¼Œå¯ä»¥è®¾ç½®å¦‚ä¸‹å±æ€§ï¼š</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>value</span><span class="token plain">ï¼šç¼“å­˜åç§°ï¼ˆå¿…å¡«ï¼‰ï¼ŒæŒ‡å®šç¼“å­˜çš„å‘½åç©ºé—´ï¼›</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>key</span><span class="token plain">ï¼šç”¨äºè®¾ç½®åœ¨å‘½åç©ºé—´ä¸­çš„ç¼“å­˜</span><span class="token keyword" style=color:#00009f>key</span><span class="token plain">å€¼ï¼Œå¯ä»¥ä½¿ç”¨SpELè¡¨è¾¾å¼å®šä¹‰ï¼›</span><br></span><span class=token-line style=color:#393A34><span class="token plain">unlessï¼šæ¡ä»¶ç¬¦åˆåˆ™ä¸ç¼“å­˜ï¼›</span><br></span><span class=token-line style=color:#393A34><span class="token plain">conditionï¼šæ¡ä»¶ç¬¦åˆåˆ™ç¼“å­˜ã€‚</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token variable" style=color:#36acaa>@CacheEvict</span><span class="token plain">ï¼š</span><br></span><span class=token-line style=color:#393A34><span class="token plain">ä½¿ç”¨è¯¥æ³¨è§£çš„æ–¹æ³•æ‰§è¡Œæ—¶ä¼šæ¸…ç©ºæŒ‡å®šçš„ç¼“å­˜ã€‚ä¸€èˆ¬ä½¿ç”¨åœ¨æ›´æ–°æˆ–åˆ é™¤æ–¹æ³•ä¸Šï¼Œå¯ä»¥è®¾ç½®å¦‚ä¸‹å±æ€§ï¼š</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>value</span><span class="token plain">ï¼šç¼“å­˜åç§°ï¼ˆå¿…å¡«ï¼‰ï¼ŒæŒ‡å®šç¼“å­˜çš„å‘½åç©ºé—´ï¼›</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>key</span><span class="token plain">ï¼šç”¨äºè®¾ç½®åœ¨å‘½åç©ºé—´ä¸­çš„ç¼“å­˜</span><span class="token keyword" style=color:#00009f>key</span><span class="token plain">å€¼ï¼Œå¯ä»¥ä½¿ç”¨SpELè¡¨è¾¾å¼å®šä¹‰ï¼›</span><br></span><span class=token-line style=color:#393A34><span class="token plain">conditionï¼šæ¡ä»¶ç¬¦åˆåˆ™ç¼“å­˜ã€‚</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=redisè¿æ¥æ± >Redisè¿æ¥æ± <a href=#redisè¿æ¥æ±  class=hash-link aria-label=Redisè¿æ¥æ± çš„ç›´æ¥é“¾æ¥ title=Redisè¿æ¥æ± çš„ç›´æ¥é“¾æ¥>â€‹</a></h4>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>&lt;!-- </span><br></span><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>ç”±äºSpringBoot 2.xä¸­é»˜è®¤å¹¶æ²¡æœ‰ä½¿ç”¨Redisè¿æ¥æ± ï¼Œæ‰€ä»¥éœ€è¦åœ¨pom.xmlä¸­æ·»åŠ commons-pool2çš„ä¾èµ–</span><br></span><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>--></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>dependency</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>groupId</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain">org.apache.commons</span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>groupId</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>artifactId</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain">commons-pool2</span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>artifactId</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>version</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain">2.10.0</span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>version</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>dependency</span><span class="token tag punctuation" style=color:#393A34>></span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=spring-retry>spring-retry<a href=#spring-retry class=hash-link aria-label=spring-retryçš„ç›´æ¥é“¾æ¥ title=spring-retryçš„ç›´æ¥é“¾æ¥>â€‹</a></h3>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>dependency</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>groupId</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain">org.springframework.retry</span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>groupId</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>artifactId</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain">spring-retry</span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>artifactId</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>dependency</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>dependency</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>groupId</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain">org.aspectj</span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>groupId</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>artifactId</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain">aspectjweaver</span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>artifactId</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>dependency</span><span class="token tag punctuation" style=color:#393A34>></span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-java codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">1.å¯åŠ¨ç±»ä¸ŠåŠ å¯ç”¨æ³¨è§£ -- å¼€å¯é‡è¯•æœºåˆ¶</span><br></span><span class=token-line style=color:#393A34><span class="token plain">@EnableRetry </span><br></span><span class=token-line style=color:#393A34><span class="token plain">2.demo</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-java codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">private final static Logger logger = LoggerFactory.getLogger(RetryService.class);</span><br></span><span class=token-line style=color:#393A34><span class="token plain">private final int totalNum = 100000;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">/**</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> * @Retryableçš„å‚æ•°è¯´æ˜ï¼š â€¢valueï¼šæŠ›å‡ºæŒ‡å®šå¼‚å¸¸æ‰ä¼šé‡è¯•</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> * â€¢includeï¼šå’Œvalueä¸€æ ·ï¼Œé»˜è®¤ä¸ºç©ºï¼Œå½“excludeä¹Ÿä¸ºç©ºæ—¶ï¼Œé»˜è®¤æ‰€ä»¥å¼‚å¸¸</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> * â€¢excludeï¼šæŒ‡å®šä¸å¤„ç†çš„å¼‚å¸¸</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> * â€¢maxAttemptsï¼šæœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œé»˜è®¤3æ¬¡</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> * â€¢backoffï¼šé‡è¯•ç­‰å¾…ç­–ç•¥ï¼Œé»˜è®¤ä½¿ç”¨@Backoffï¼Œ@Backoffçš„valueé»˜è®¤ä¸º1000Lï¼Œæˆ‘ä»¬è®¾ç½®ä¸º2000Lï¼›multiplierï¼ˆæŒ‡å®šå»¶è¿Ÿå€æ•°ï¼‰é»˜è®¤ä¸º0ï¼Œè¡¨ç¤ºå›ºå®šæš‚åœ1ç§’åè¿›è¡Œé‡è¯•ï¼Œå¦‚æœæŠŠmultiplierè®¾ç½®ä¸º1.5ï¼Œåˆ™ç¬¬ä¸€æ¬¡é‡è¯•ä¸º2ç§’ï¼Œç¬¬äºŒæ¬¡ä¸º3ç§’ï¼Œç¬¬ä¸‰æ¬¡ä¸º4.5ç§’ã€‚</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> */</span><br></span><span class=token-line style=color:#393A34><span class="token plain">@Retryable(value = Exception.class, maxAttempts = 3, backoff = @Backoff(delay = 2000L, multiplier = 1.5))</span><br></span><span class=token-line style=color:#393A34><span class="token plain">public int retry(int num) {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    logger.info("å‡åº“å­˜å¼€å§‹" + LocalTime.now());</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    try {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        int i = 1 / 0;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    } catch (Exception e) {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        logger.error("illegal");</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    if (num &lt;= 0) {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        throw new IllegalArgumentException("æ•°é‡ä¸å¯¹");</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    logger.info("å‡åº“å­˜æ‰§è¡Œç»“æŸ" + LocalTime.now());</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    return totalNum - num;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">}</span><br></span><span class=token-line style=color:#393A34><span class="token plain">@Recover</span><br></span><span class=token-line style=color:#393A34><span class="token plain">public void recover(Exception e) {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    logger.warn("å‡åº“å­˜å¤±è´¥ï¼ï¼ï¼" + LocalTime.now());</span><br></span><span class=token-line style=color:#393A34><span class="token plain">}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">æ³¨æ„ï¼š</span><br></span><span class=token-line style=color:#393A34><span class="token plain">1ã€ä½¿ç”¨äº†@Retryableçš„æ–¹æ³•ä¸èƒ½åœ¨æœ¬ç±»è¢«è°ƒç”¨ï¼Œä¸ç„¶é‡è¯•æœºåˆ¶ä¸ä¼šç”Ÿæ•ˆã€‚ä¹Ÿå°±æ˜¯è¦æ ‡è®°ä¸º@Serviceï¼Œç„¶ååœ¨å…¶å®ƒç±»ä½¿ç”¨@Autowiredæ³¨å…¥æˆ–è€…@Beanå»å®ä¾‹æ‰èƒ½ç”Ÿæ•ˆã€‚</span><br></span><span class=token-line style=color:#393A34><span class="token plain">2 ã€è¦è§¦å‘@Recoveræ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨@Retryableæ–¹æ³•ä¸Šä¸èƒ½æœ‰è¿”å›å€¼ï¼Œåªèƒ½æ˜¯voidæ‰èƒ½ç”Ÿæ•ˆã€‚</span><br></span><span class=token-line style=color:#393A34><span class="token plain">3 ã€éå¹‚ç­‰æƒ…å†µä¸‹æ…ç”¨</span><br></span><span class=token-line style=color:#393A34><span class="token plain">4 ã€ä½¿ç”¨äº†@Retryableçš„æ–¹æ³•é‡Œé¢ä¸èƒ½ä½¿ç”¨tryâ€¦catchåŒ…è£¹ï¼Œè¦åœ¨æ–¹æ³•ä¸ŠæŠ›å‡ºå¼‚å¸¸ï¼Œä¸ç„¶ä¸ä¼šè§¦å‘ã€‚</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=springsecurityjwt>SpringSecurity+JWT<a href=#springsecurityjwt class=hash-link aria-label=SpringSecurity+JWTçš„ç›´æ¥é“¾æ¥ title=SpringSecurity+JWTçš„ç›´æ¥é“¾æ¥>â€‹</a></h3>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>&lt;!--SpringSecurityä¾èµ–é…ç½®--></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>dependency</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>groupId</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>groupId</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>artifactId</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain">spring-boot-starter-security</span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>artifactId</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>dependency</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>&lt;!--JWT(Json Web Token)ç™»å½•æ”¯æŒ--></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>dependency</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>groupId</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain">io.jsonwebtoken</span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>groupId</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>artifactId</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain">jjwt</span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>artifactId</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>version</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain">0.9.0</span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>version</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>dependency</span><span class="token tag punctuation" style=color:#393A34>></span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=springsecurity>SpringSecurity<a href=#springsecurity class=hash-link aria-label=SpringSecurityçš„ç›´æ¥é“¾æ¥ title=SpringSecurityçš„ç›´æ¥é“¾æ¥>â€‹</a></h4>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>-- SpringSecurityæ˜¯ä¸€ä¸ªå¼ºå¤§çš„å¯é«˜åº¦å®šåˆ¶çš„è®¤è¯å’Œæˆæƒæ¡†æ¶ï¼Œå¯¹äºSpringåº”ç”¨æ¥è¯´å®ƒæ˜¯ä¸€å¥—Webå®‰å…¨æ ‡å‡†ã€‚SpringSecurityæ³¨é‡äºä¸ºJavaåº”ç”¨æä¾›è®¤è¯å’ŒæˆæƒåŠŸèƒ½ï¼Œåƒæ‰€æœ‰çš„Springé¡¹ç›®ä¸€æ ·ï¼Œå®ƒå¯¹è‡ªå®šä¹‰éœ€æ±‚å…·æœ‰å¼ºå¤§çš„æ‰©å±•æ€§</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-java codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">@Configuration</span><br></span><span class=token-line style=color:#393A34><span class="token plain">@EnableWebSecurity</span><br></span><span class=token-line style=color:#393A34><span class="token plain">@EnableGlobalMethodSecurity(prePostEnabled=true)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">public class SecurityConfig extends WebSecurityConfigurerAdapter {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    @Autowired</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    private UmsAdminService adminService;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    @Autowired</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    private RestfulAccessDeniedHandler restfulAccessDeniedHandler;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    @Autowired</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    private RestAuthenticationEntryPoint restAuthenticationEntryPoint;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    @Override</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    protected void configure(HttpSecurity httpSecurity) throws Exception {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        httpSecurity.csrf()// ç”±äºä½¿ç”¨çš„æ˜¯JWTï¼Œæˆ‘ä»¬è¿™é‡Œä¸éœ€è¦csrf</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                .disable()</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                .sessionManagement()// åŸºäºtokenï¼Œæ‰€ä»¥ä¸éœ€è¦session</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                .and()</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                .authorizeRequests()</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                .antMatchers(HttpMethod.GET, // å…è®¸å¯¹äºç½‘ç«™é™æ€èµ„æºçš„æ— æˆæƒè®¿é—®</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                        "/",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                        "/*.html",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                        "/favicon.ico",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                        "/**/*.html",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                        "/**/*.css",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                        "/**/*.js",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                        "/swagger-resources/**",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                        "/v2/api-docs/**"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                )</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                .permitAll()</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                .antMatchers("/admin/login", "/admin/register")// å¯¹ç™»å½•æ³¨å†Œè¦å…è®¸åŒ¿åè®¿é—®</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                .permitAll()</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                .antMatchers(HttpMethod.OPTIONS)//è·¨åŸŸè¯·æ±‚ä¼šå…ˆè¿›è¡Œä¸€æ¬¡optionsè¯·æ±‚</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                .permitAll()</span><br></span><span class=token-line style=color:#393A34><span class="token plain">//                .antMatchers("/**")//æµ‹è¯•æ—¶å…¨éƒ¨è¿è¡Œè®¿é—®</span><br></span><span class=token-line style=color:#393A34><span class="token plain">//                .permitAll()</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                .anyRequest()// é™¤ä¸Šé¢å¤–çš„æ‰€æœ‰è¯·æ±‚å…¨éƒ¨éœ€è¦é‰´æƒè®¤è¯</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                .authenticated();</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        // ç¦ç”¨ç¼“å­˜</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        httpSecurity.headers().cacheControl();</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        // æ·»åŠ JWT filter</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        httpSecurity.addFilterBefore(jwtAuthenticationTokenFilter(), UsernamePasswordAuthenticationFilter.class);</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        //æ·»åŠ è‡ªå®šä¹‰æœªæˆæƒå’Œæœªç™»å½•ç»“æœè¿”å›</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        httpSecurity.exceptionHandling()</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                .accessDeniedHandler(restfulAccessDeniedHandler)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                .authenticationEntryPoint(restAuthenticationEntryPoint);</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    @Override</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    protected void configure(AuthenticationManagerBuilder auth) throws Exception {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        auth.userDetailsService(userDetailsService())</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                .passwordEncoder(passwordEncoder());</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    @Bean</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    public PasswordEncoder passwordEncoder() {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        return new BCryptPasswordEncoder();</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    @Bean</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    public UserDetailsService userDetailsService() {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        //è·å–ç™»å½•ç”¨æˆ·ä¿¡æ¯</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        return username -> {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            UmsAdmin admin = adminService.getAdminByUsername(username);</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            if (admin != null) {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                List&lt;UmsPermission> permissionList = adminService.getPermissionList(admin.getId());</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                return new AdminUserDetails(admin,permissionList);</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            throw new UsernameNotFoundException("ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯");</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        };</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    @Bean</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    public JwtAuthenticationTokenFilter jwtAuthenticationTokenFilter(){</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        return new JwtAuthenticationTokenFilter();</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    @Bean</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    @Override</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    public AuthenticationManager authenticationManagerBean() throws Exception {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        return super.authenticationManagerBean();</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id=æ–¹æ³•è¯´æ˜>æ–¹æ³•è¯´æ˜<a href=#æ–¹æ³•è¯´æ˜ class=hash-link aria-label=æ–¹æ³•è¯´æ˜çš„ç›´æ¥é“¾æ¥ title=æ–¹æ³•è¯´æ˜çš„ç›´æ¥é“¾æ¥>â€‹</a></h5>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">configure</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">HttpSecurity httpSecurity</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain">ï¼šç”¨äºé…ç½®éœ€è¦æ‹¦æˆªçš„urlè·¯å¾„ã€jwtè¿‡æ»¤å™¨åŠå‡ºå¼‚å¸¸åçš„å¤„ç†å™¨</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">configure</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">AuthenticationManagerBuilder auth</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain">ï¼šç”¨äºé…ç½®UserDetailsServiceåŠPasswordEncoder</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">RestfulAccessDeniedHandlerï¼šå½“ç”¨æˆ·æ²¡æœ‰è®¿é—®æƒé™æ—¶çš„å¤„ç†å™¨ï¼Œç”¨äºè¿”å›JSONæ ¼å¼çš„å¤„ç†ç»“æœ</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">RestAuthenticationEntryPointï¼šå½“æœªç™»å½•æˆ–tokenå¤±æ•ˆæ—¶ï¼Œè¿”å›JSONæ ¼å¼çš„ç»“æœ</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">UserDetailsService:SpringSecurityå®šä¹‰çš„æ ¸å¿ƒæ¥å£ï¼Œç”¨äºæ ¹æ®ç”¨æˆ·åè·å–ç”¨æˆ·ä¿¡æ¯ï¼Œéœ€è¦è‡ªè¡Œå®ç°</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">UserDetailsï¼šSpringSecurityå®šä¹‰ç”¨äºå°è£…ç”¨æˆ·ä¿¡æ¯çš„ç±»ï¼ˆä¸»è¦æ˜¯ç”¨æˆ·ä¿¡æ¯å’Œæƒé™ï¼‰ï¼Œéœ€è¦è‡ªè¡Œå®ç°</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">PasswordEncoderï¼šSpringSecurityå®šä¹‰çš„ç”¨äºå¯¹å¯†ç è¿›è¡Œç¼–ç åŠæ¯”å¯¹çš„æ¥å£ï¼Œç›®å‰ä½¿ç”¨çš„æ˜¯BCryptPasswordEncoder</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">JwtAuthenticationTokenFilterï¼šåœ¨ç”¨æˆ·åå’Œå¯†ç æ ¡éªŒå‰æ·»åŠ çš„è¿‡æ»¤å™¨ï¼Œå¦‚æœæœ‰jwtçš„tokenï¼Œä¼šè‡ªè¡Œæ ¹æ®tokenä¿¡æ¯è¿›è¡Œç™»å½•</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=ï¿½å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id=æ¥å£æƒé™>æ¥å£æƒé™<a href=#æ¥å£æƒé™ class=hash-link aria-label=æ¥å£æƒé™çš„ç›´æ¥é“¾æ¥ title=æ¥å£æƒé™çš„ç›´æ¥é“¾æ¥>â€‹</a></h5>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">ç»™æŸ¥è¯¢æ¥å£æ·»åŠ pms:brand:readæƒé™</span><br></span><span class=token-line style=color:#393A34><span class="token plain">ç»™ä¿®æ”¹æ¥å£æ·»åŠ pms:brand:updateæƒé™</span><br></span><span class=token-line style=color:#393A34><span class="token plain">ç»™åˆ é™¤æ¥å£æ·»åŠ pms:brand:deleteæƒé™</span><br></span><span class=token-line style=color:#393A34><span class="token plain">ç»™æ·»åŠ æ¥å£æ·»åŠ pms:brand:createæƒé™</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=jwt>JWT<a href=#jwt class=hash-link aria-label=JWTçš„ç›´æ¥é“¾æ¥ title=JWTçš„ç›´æ¥é“¾æ¥>â€‹</a></h4>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>-- JWTæ˜¯JSON WEB TOKENçš„ç¼©å†™ï¼Œå®ƒæ˜¯åŸºäº RFC 7519 æ ‡å‡†å®šä¹‰çš„ä¸€ç§å¯ä»¥å®‰å…¨ä¼ è¾“çš„çš„JSONå¯¹è±¡ï¼Œç”±äºä½¿ç”¨äº†æ•°å­—ç­¾åï¼Œæ‰€ä»¥æ˜¯å¯ä¿¡ä»»å’Œå®‰å…¨çš„</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id=jwtçš„ç»„æˆ>JWTçš„ç»„æˆ<a href=#jwtçš„ç»„æˆ class=hash-link aria-label=JWTçš„ç»„æˆçš„ç›´æ¥é“¾æ¥ title=JWTçš„ç»„æˆçš„ç›´æ¥é“¾æ¥>â€‹</a></h5>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>-- è§£æåœ°å€</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">https:</span><span class="token comment" style=color:#999988;font-style:italic>//jwt.io/</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>-- JWT tokençš„æ ¼å¼</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">header</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">payload</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">signature</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>-- headerä¸­ç”¨äºå­˜æ”¾ç­¾åçš„ç”Ÿæˆç®—æ³•</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">{</span><span class="token string" style=color:#e3116c>"alg"</span><span class="token plain">: </span><span class="token string" style=color:#e3116c>"HS512"</span><span class="token plain">}</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>-- payloadä¸­ç”¨äºå­˜æ”¾ç”¨æˆ·åã€tokençš„ç”Ÿæˆæ—¶é—´å’Œè¿‡æœŸæ—¶é—´</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">{</span><span class="token string" style=color:#e3116c>"sub"</span><span class="token plain">:</span><span class="token string" style=color:#e3116c>"admin"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token string" style=color:#e3116c>"created"</span><span class="token plain">:</span><span class="token number" style=color:#36acaa>1489079981393</span><span class="token punctuation" style=color:#393A34>,</span><span class="token string" style=color:#e3116c>"exp"</span><span class="token plain">:</span><span class="token number" style=color:#36acaa>1489684781</span><span class="token plain">}</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>-- signatureä¸ºä»¥headerå’Œpayloadç”Ÿæˆçš„ç­¾åï¼Œä¸€æ—¦headerå’Œpayloadè¢«ç¯¡æ”¹ï¼ŒéªŒè¯å°†å¤±è´¥</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>-- secretä¸ºåŠ å¯†ç®—æ³•çš„å¯†é’¥</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">String signature </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> HMACSHA512</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">base64UrlEncode</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">header</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>+</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"."</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>+</span><span class="token plain">base64UrlEncode</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">payload</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain">secret</span><span class="token punctuation" style=color:#393A34>)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id=jwtä½¿ç”¨åŸç†>JWTä½¿ç”¨åŸç†<a href=#jwtä½¿ç”¨åŸç† class=hash-link aria-label=JWTä½¿ç”¨åŸç†çš„ç›´æ¥é“¾æ¥ title=JWTä½¿ç”¨åŸç†çš„ç›´æ¥é“¾æ¥>â€‹</a></h5>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token number" style=color:#36acaa>1</span><span class="token plain">ã€ç”¨æˆ·è°ƒç”¨ç™»å½•æ¥å£ï¼Œç™»å½•æˆåŠŸåè·å–åˆ°JWTçš„token</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token number" style=color:#36acaa>2</span><span class="token plain">ã€ä¹‹åç”¨æˆ·æ¯æ¬¡è°ƒç”¨æ¥å£éƒ½åœ¨httpçš„headerä¸­æ·»åŠ ä¸€ä¸ªå«</span><span class="token keyword" style=color:#00009f>Authorization</span><span class="token plain">çš„å¤´ï¼Œå€¼ä¸ºJWTçš„token</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token number" style=color:#36acaa>3</span><span class="token plain">ã€åå°ç¨‹åºé€šè¿‡å¯¹</span><span class="token keyword" style=color:#00009f>Authorization</span><span class="token plain">å¤´ä¸­ä¿¡æ¯çš„è§£ç åŠæ•°å­—ç­¾åæ ¡éªŒæ¥è·å–å…¶ä¸­çš„ç”¨æˆ·ä¿¡æ¯ï¼Œä»è€Œå®ç°è®¤è¯å’Œæˆæƒ</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=hibernate-validator>Hibernate Validator<a href=#hibernate-validator class=hash-link aria-label="Hibernate Validatorçš„ç›´æ¥é“¾æ¥" title="Hibernate Validatorçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>-- Hibernate Validatoræ˜¯SpringBootå†…ç½®çš„æ ¡éªŒæ¡†æ¶ï¼Œåªè¦é›†æˆäº†SpringBootå°±è‡ªåŠ¨é›†æˆäº†å®ƒï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨å¯¹è±¡ä¸Šé¢ä½¿ç”¨å®ƒæä¾›çš„æ³¨è§£æ¥å®Œæˆå‚æ•°æ ¡éªŒ</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=å¸¸ç”¨æ³¨è§£>å¸¸ç”¨æ³¨è§£<a href=#å¸¸ç”¨æ³¨è§£ class=hash-link aria-label=å¸¸ç”¨æ³¨è§£çš„ç›´æ¥é“¾æ¥ title=å¸¸ç”¨æ³¨è§£çš„ç›´æ¥é“¾æ¥>â€‹</a></h4>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token variable" style=color:#36acaa>@Null</span><span class="token plain">ï¼šè¢«æ³¨é‡Šçš„å±æ€§å¿…é¡»ä¸º</span><span class="token boolean" style=color:#36acaa>null</span><span class="token plain">ï¼›</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token variable" style=color:#36acaa>@NotNull</span><span class="token plain">ï¼šè¢«æ³¨é‡Šçš„å±æ€§ä¸èƒ½ä¸º</span><span class="token boolean" style=color:#36acaa>null</span><span class="token plain">ï¼›</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token variable" style=color:#36acaa>@AssertTrue</span><span class="token plain">ï¼šè¢«æ³¨é‡Šçš„å±æ€§å¿…é¡»ä¸º</span><span class="token boolean" style=color:#36acaa>true</span><span class="token plain">ï¼›</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token variable" style=color:#36acaa>@AssertFalse</span><span class="token plain">ï¼šè¢«æ³¨é‡Šçš„å±æ€§å¿…é¡»ä¸º</span><span class="token boolean" style=color:#36acaa>false</span><span class="token plain">ï¼›</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token variable" style=color:#36acaa>@Min</span><span class="token plain">ï¼šè¢«æ³¨é‡Šçš„å±æ€§å¿…é¡»å¤§äºç­‰äºå…¶</span><span class="token keyword" style=color:#00009f>value</span><span class="token plain">å€¼ï¼›</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token variable" style=color:#36acaa>@Max</span><span class="token plain">ï¼šè¢«æ³¨é‡Šçš„å±æ€§å¿…é¡»å°äºç­‰äºå…¶</span><span class="token keyword" style=color:#00009f>value</span><span class="token plain">å€¼ï¼›</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token variable" style=color:#36acaa>@Size</span><span class="token plain">ï¼šè¢«æ³¨é‡Šçš„å±æ€§å¿…é¡»åœ¨å…¶minå’Œmaxå€¼ä¹‹é—´ï¼›</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token variable" style=color:#36acaa>@Pattern</span><span class="token plain">ï¼šè¢«æ³¨é‡Šçš„å±æ€§å¿…é¡»ç¬¦åˆå…¶</span><span class="token operator" style=color:#393A34>regexp</span><span class="token plain">æ‰€å®šä¹‰çš„æ­£åˆ™è¡¨è¾¾å¼ï¼›</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token variable" style=color:#36acaa>@NotBlank</span><span class="token plain">ï¼šè¢«æ³¨é‡Šçš„å­—ç¬¦ä¸²ä¸èƒ½ä¸ºç©ºå­—ç¬¦ä¸²ï¼›</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token variable" style=color:#36acaa>@NotEmpty</span><span class="token plain">ï¼šè¢«æ³¨é‡Šçš„å±æ€§ä¸èƒ½ä¸ºç©ºï¼›</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token variable" style=color:#36acaa>@Email</span><span class="token plain">ï¼šè¢«æ³¨é‡Šçš„å±æ€§å¿…é¡»ç¬¦åˆé‚®ç®±æ ¼å¼</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>&lt;!-- SpringBoot 2.3ç‰ˆæœ¬é»˜è®¤ç§»é™¤äº†æ ¡éªŒåŠŸèƒ½ï¼Œå¦‚æœæƒ³è¦å¼€å¯çš„è¯éœ€è¦æ·»åŠ å¦‚ä¸‹ä¾èµ– --></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>dependency</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>groupId</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>groupId</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>artifactId</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain">spring-boot-starter-validation</span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>artifactId</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>dependency</span><span class="token tag punctuation" style=color:#393A34>></span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>-- å®ç°æ ¡éªŒ</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token number" style=color:#36acaa>1</span><span class="token plain">ã€ä½¿ç”¨åˆ‡é¢æ–¹å¼ï¼Œéœ€è¦ ç„¶ååœ¨æ·»åŠ å“ç‰Œçš„æ¥å£ä¸­æ·»åŠ </span><span class="token variable" style=color:#36acaa>@Validated</span><span class="token plain">æ³¨è§£ï¼Œå¹¶æ³¨å…¥ä¸€ä¸ªBindingResultå‚æ•°</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token number" style=color:#36acaa>2</span><span class="token plain">ã€ä½¿ç”¨å…¨å±€å¼‚å¸¸æ–¹å¼ï¼Œåœ¨æ·»åŠ å“ç‰Œçš„æ¥å£ä¸­æ·»åŠ </span><span class="token variable" style=color:#36acaa>@Validated</span><span class="token plain">æ³¨è§£</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=è‡ªå®šä¹‰æ³¨è§£>è‡ªå®šä¹‰æ³¨è§£<a href=#è‡ªå®šä¹‰æ³¨è§£ class=hash-link aria-label=è‡ªå®šä¹‰æ³¨è§£çš„ç›´æ¥é“¾æ¥ title=è‡ªå®šä¹‰æ³¨è§£çš„ç›´æ¥é“¾æ¥>â€‹</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-java codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">/**</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> * é¦–å…ˆè‡ªå®šä¹‰ä¸€ä¸ªæ ¡éªŒæ³¨è§£ç±»FlagValidator</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> * ç„¶åæ·»åŠ @Constraintæ³¨è§£ï¼Œä½¿ç”¨å®ƒçš„validatedByå±æ€§æŒ‡å®šæ ¡éªŒé€»è¾‘çš„å…·ä½“å®ç°ç±»</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> * ç”¨æˆ·éªŒè¯çŠ¶æ€æ˜¯å¦åœ¨æŒ‡å®šèŒƒå›´å†…çš„æ³¨è§£</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> */</span><br></span><span class=token-line style=color:#393A34><span class="token plain">@Documented</span><br></span><span class=token-line style=color:#393A34><span class="token plain">@Retention(RetentionPolicy.RUNTIME)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">@Target({ElementType.FIELD,ElementType.PARAMETER})</span><br></span><span class=token-line style=color:#393A34><span class="token plain">@Constraint(validatedBy = FlagValidatorClass.class)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">public @interface FlagValidator {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    String[] value() default {};</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    String message() default "flag is not found";</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    Class&lt;?>[] groups() default {};</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    Class&lt;? extends Payload>[] payload() default {};</span><br></span><span class=token-line style=color:#393A34><span class="token plain">}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-java codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">/**</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> * çŠ¶æ€æ ‡è®°æ ¡éªŒå™¨</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> */</span><br></span><span class=token-line style=color:#393A34><span class="token plain">public class FlagValidatorClass implements ConstraintValidator&lt;FlagValidator,Integer> {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    private String[] values;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    @Override</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    public void initialize(FlagValidator flagValidator) {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        this.values = flagValidator.value();</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    }</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    @Override</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    public boolean isValid(Integer value, ConstraintValidatorContext constraintValidatorContext) {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        boolean isValid = false;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        if(value==null){</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            //å½“çŠ¶æ€ä¸ºç©ºæ—¶ä½¿ç”¨é»˜è®¤å€¼</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            return true;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        for(int i=0;i&lt;values.length;i++){</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            if(values[i].equals(String.valueOf(value))){</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                isValid = true;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                break;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        return isValid;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-java codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">public class PmsBrandParam {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    @ApiModelProperty(value = "æ˜¯å¦è¿›è¡Œæ˜¾ç¤º")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    @FlagValidator(value = {"0","1"}, message = "æ˜¾ç¤ºçŠ¶æ€ä¸æ­£ç¡®")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    private Integer showStatus;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=å…¨å±€å¼‚å¸¸å¤„ç†>å…¨å±€å¼‚å¸¸å¤„ç†<a href=#å…¨å±€å¼‚å¸¸å¤„ç† class=hash-link aria-label=å…¨å±€å¼‚å¸¸å¤„ç†çš„ç›´æ¥é“¾æ¥ title=å…¨å±€å¼‚å¸¸å¤„ç†çš„ç›´æ¥é“¾æ¥>â€‹</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=æ³¨è§£>æ³¨è§£<a href=#æ³¨è§£ class=hash-link aria-label=æ³¨è§£çš„ç›´æ¥é“¾æ¥ title=æ³¨è§£çš„ç›´æ¥é“¾æ¥>â€‹</a></h4>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token variable" style=color:#36acaa>@ControllerAdvice</span><span class="token plain">ï¼šç±»ä¼¼äº</span><span class="token variable" style=color:#36acaa>@Component</span><span class="token plain">æ³¨è§£ï¼Œå¯ä»¥æŒ‡å®šä¸€ä¸ªç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶ä¸»è¦ç”¨äºå¢å¼º</span><span class="token variable" style=color:#36acaa>@Controller</span><span class="token plain">æ³¨è§£ä¿®é¥°çš„ç±»çš„åŠŸèƒ½ï¼Œæ¯”å¦‚è¯´è¿›è¡Œå…¨å±€å¼‚å¸¸å¤„ç†</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token variable" style=color:#36acaa>@ExceptionHandler</span><span class="token plain">ï¼šç”¨æ¥ä¿®é¥°å…¨å±€å¼‚å¸¸å¤„ç†çš„æ–¹æ³•ï¼Œå¯ä»¥æŒ‡å®šå¼‚å¸¸çš„ç±»å‹</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=ä½¿ç”¨å®ç°>ä½¿ç”¨å®ç°<a href=#ä½¿ç”¨å®ç° class=hash-link aria-label=ä½¿ç”¨å®ç°çš„ç›´æ¥é“¾æ¥ title=ä½¿ç”¨å®ç°çš„ç›´æ¥é“¾æ¥>â€‹</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-java codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">//é¦–å…ˆæˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰ä¸€ä¸ªå¼‚å¸¸ç±»ApiExceptionï¼Œå½“æˆ‘ä»¬æ ¡éªŒå¤±è´¥æ—¶æŠ›å‡ºè¯¥å¼‚å¸¸</span><br></span><span class=token-line style=color:#393A34><span class="token plain">/** </span><br></span><span class=token-line style=color:#393A34><span class="token plain"> * è‡ªå®šä¹‰APIå¼‚å¸¸</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> * Created by macro on 2020/2/27.</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> */</span><br></span><span class=token-line style=color:#393A34><span class="token plain">public class ApiException extends RuntimeException {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    private IErrorCode errorCode;</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    public ApiException(IErrorCode errorCode) {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        super(errorCode.getMessage());</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        this.errorCode = errorCode;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    }</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    public ApiException(String message) {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        super(message);</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    }</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    public ApiException(Throwable cause) {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        super(cause);</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    }</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    public ApiException(String message, Throwable cause) {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        super(message, cause);</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    }</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    public IErrorCode getErrorCode() {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        return errorCode;</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-java codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">//ç„¶ååˆ›å»ºä¸€ä¸ªæ–­è¨€å¤„ç†ç±»Assertsï¼Œç”¨äºæŠ›å‡ºå„ç§ApiException</span><br></span><span class=token-line style=color:#393A34><span class="token plain">/**</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> * æ–­è¨€å¤„ç†ç±»ï¼Œç”¨äºæŠ›å‡ºå„ç§APIå¼‚å¸¸</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> * Created by macro on 2020/2/27.</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> */</span><br></span><span class=token-line style=color:#393A34><span class="token plain">public class Asserts {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    public static void fail(String message) {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        throw new ApiException(message);</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    }</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    public static void fail(IErrorCode errorCode) {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        throw new ApiException(errorCode);</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-java codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">//ç„¶åå†åˆ›å»ºæˆ‘ä»¬çš„å…¨å±€å¼‚å¸¸å¤„ç†ç±»GlobalExceptionHandlerï¼Œç”¨äºå¤„ç†å…¨å±€å¼‚å¸¸ï¼Œå¹¶è¿”å›å°è£…å¥½çš„CommonResultå¯¹è±¡</span><br></span><span class=token-line style=color:#393A34><span class="token plain">/**</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> * å…¨å±€å¼‚å¸¸å¤„ç†</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> * Created by macro on 2020/2/27.</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> */</span><br></span><span class=token-line style=color:#393A34><span class="token plain">@ControllerAdvice</span><br></span><span class=token-line style=color:#393A34><span class="token plain">public class GlobalExceptionHandler {</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    @ResponseBody</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    @ExceptionHandler(value = ApiException.class)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    public CommonResult handle(ApiException e) {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        if (e.getErrorCode() != null) {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            return CommonResult.failed(e.getErrorCode());</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        return CommonResult.failed(e.getMessage());</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col><a href=https://github.dev/mhuahe/mhuahe.com/blob/master-ts/docs/java/JAVA-SpringBoot-Stack.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>ç¼–è¾‘æ­¤é¡µ</a></div><div class="col lastUpdated_JAkA"><span class=theme-last-updated>æœ€å<!-- -->ç”± <b>heminhua</b> <!-- -->äº <b><time datetime=2024-09-03T17:00:06.000Z itemprop=dateModified>2024å¹´9æœˆ3æ—¥</time></b> <!-- -->æ›´æ–°</span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label=æ–‡ä»¶é€‰é¡¹å¡><a class="pagination-nav__link pagination-nav__link--prev" href=/mhuahe.com/docs/java/JAVA-Servlet><div class=pagination-nav__sublabel>ä¸Šä¸€é¡µ</div><div class=pagination-nav__label>JAVA-Servlet</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/mhuahe.com/docs/java/JAVA-SpringBoot-Version><div class=pagination-nav__sublabel>ä¸‹ä¸€é¡µ</div><div class=pagination-nav__label>JAVA-SpringBootç‰ˆæœ¬</div></a></nav><div id=disqus_thread></div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#spring-boot-redis class="table-of-contents__link toc-highlight">spring-boot-redis</a><ul><li><a href=#å¯åŠ¨å‘½ä»¤ class="table-of-contents__link toc-highlight">å¯åŠ¨å‘½ä»¤</a><li><a href=#ä¾èµ– class="table-of-contents__link toc-highlight">ä¾èµ–</a><li><a href=#æ–‡ä»¶é…ç½® class="table-of-contents__link toc-highlight">æ–‡ä»¶é…ç½®</a><li><a href=#é…ç½®ç±» class="table-of-contents__link toc-highlight">é…ç½®ç±»</a><li><a href=#è¿‡æœŸç›‘å¬ class="table-of-contents__link toc-highlight">è¿‡æœŸç›‘å¬</a><li><a href=#ç¼“å­˜æ³¨è§£ class="table-of-contents__link toc-highlight">ç¼“å­˜æ³¨è§£</a><li><a href=#redisè¿æ¥æ±  class="table-of-contents__link toc-highlight">Redisè¿æ¥æ± </a></ul><li><a href=#spring-retry class="table-of-contents__link toc-highlight">spring-retry</a><li><a href=#springsecurityjwt class="table-of-contents__link toc-highlight">SpringSecurity+JWT</a><ul><li><a href=#springsecurity class="table-of-contents__link toc-highlight">SpringSecurity</a><ul><li><a href=#æ–¹æ³•è¯´æ˜ class="table-of-contents__link toc-highlight">æ–¹æ³•è¯´æ˜</a><li><a href=#æ¥å£æƒé™ class="table-of-contents__link toc-highlight">æ¥å£æƒé™</a></ul><li><a href=#jwt class="table-of-contents__link toc-highlight">JWT</a><ul><li><a href=#jwtçš„ç»„æˆ class="table-of-contents__link toc-highlight">JWTçš„ç»„æˆ</a><li><a href=#jwtä½¿ç”¨åŸç† class="table-of-contents__link toc-highlight">JWTä½¿ç”¨åŸç†</a></ul></ul><li><a href=#hibernate-validator class="table-of-contents__link toc-highlight">Hibernate Validator</a><ul><li><a href=#å¸¸ç”¨æ³¨è§£ class="table-of-contents__link toc-highlight">å¸¸ç”¨æ³¨è§£</a><li><a href=#è‡ªå®šä¹‰æ³¨è§£ class="table-of-contents__link toc-highlight">è‡ªå®šä¹‰æ³¨è§£</a></ul><li><a href=#å…¨å±€å¼‚å¸¸å¤„ç† class="table-of-contents__link toc-highlight">å…¨å±€å¼‚å¸¸å¤„ç†</a><ul><li><a href=#æ³¨è§£ class="table-of-contents__link toc-highlight">æ³¨è§£</a><li><a href=#ä½¿ç”¨å®ç° class="table-of-contents__link toc-highlight">ä½¿ç”¨å®ç°</a></ul></ul></div></div></div></div></main></div></div></div><footer class=footer><div class="container container-fluid"><div class="footer__bottom text--center"><div class=footer__copyright>Â© 2024 mhuahe. Built with Docusaurus.</div></div></div></footer></div>